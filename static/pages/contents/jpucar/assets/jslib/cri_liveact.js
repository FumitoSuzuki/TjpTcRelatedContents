/****************************************************************************
 *
 * LiveAct(R) PRO
 * Runtime Library
 *
 * (c) 2016 CRI Middleware Co., Ltd.
 * Version : 1.85.603.0 Analytics
 *
 ****************************************************************************/
"use strict";
var CriLaVersion={MAJOR:1,MINOR:85,BUILD:603,REVISION:0};Object.freeze(CriLaVersion);function CriGrxMath(){}CriGrxMath.lerp=function(b,a,c){return(b+(a-b)*c)};CriGrxMath.degreeToRadian=function(a){return a*(Math.PI/180)};CriGrxMath.clamp=function(b,a,c){return Math.min(a,Math.max(b,c))};function CriGrxRealNumberOperator(a){this.eps=a==null?CriGrxRealNumberOperator.EPS:a}CriGrxRealNumberOperator.EPS=0.000001;CriGrxRealNumberOperator.eq=function(f,d,c){var e=c==null?CriGrxRealNumberOperator.EPS:c;return Math.abs(f-d)<e};CriGrxRealNumberOperator.lt=function(f,d,c){var e=c==null?CriGrxRealNumberOperator.EPS:c;return !CriGrxRealNumberOperator.eq(f,d,e)&&f<d+e};CriGrxRealNumberOperator.le=function(e,d,c){return CriGrxRealNumberOperator.eq(e,d,c)||CriGrxRealNumberOperator.lt(e,d,c)};CriGrxRealNumberOperator.gt=function(e,d,c){return CriGrxRealNumberOperator.lt(d,e,c)};CriGrxRealNumberOperator.ge=function(e,d,c){return CriGrxRealNumberOperator.le(d,e,c)};CriGrxRealNumberOperator.between=function(d,b,c,a){return CriGrxRealNumberOperator.ge(c,d,a)&&CriGrxRealNumberOperator.le(c,b,a)};CriGrxRealNumberOperator.betweenHalfOpen=function(d,b,c,a){return CriGrxRealNumberOperator.ge(c,d,a)&&CriGrxRealNumberOperator.lt(c,b,a)};(function(a){["eq","lt","le","gt","ge","between","betweenHalfOpen"].forEach(function(b){a[b]=function(){var c=Array.prototype.slice.call(arguments);c.push(this.eps);return CriGrxRealNumberOperator[b].apply(null,c)}})})(CriGrxRealNumberOperator.prototype);function CriGrxVector2(){this.x=0;this.y=0}CriGrxVector2.createFromXY=function(a,c){var b=new CriGrxVector2();b.x=a;b.y=c;return b};(function(a){a.getLength=function(){var b=this.x;var c=this.y;return Math.sqrt(b*b+c*c)};a.normalize=function(b,e){var d=this.getLength();var c=1/d;this.x=this.x*c;this.y=this.y*c;return this}})(CriGrxVector2.prototype);function CriGrxVector2_Add(d,c){var e=new CriGrxVector2();e.x=d.x+c.x;e.y=d.y+c.y;return e}function CriGrxVector2_Sub(d,c){var e=new CriGrxVector2();e.x=d.x-c.x;e.y=d.y-c.y;return e}function CriGrxVector2_Scale(b,d){var c=new CriGrxVector2();c.x=b.x*d;c.y=b.y*d;return c}function CriGrxVector2_Div(b,d){var c=new CriGrxVector2();c.x=b.x/d;c.y=b.y/d;return c}function CriGrxVector2_Dot(d,c){var e=d.x*c.x+d.y*c.y;return e}function CriGrxVector2_CenterOfGravity(b){var a=b.length;if(!a){return null}return CriGrxVector2_Div(b.reduce(CriGrxVector2_Add),a)}function CriGrxVector3(){this.x=0;this.y=0;this.z=0}CriGrxVector3.createFromXYZ=function(a,d,c){var b=new CriGrxVector3();b.x=a;b.y=d;b.z=c;return b};(function(a){a.setXYZ=function(b,d,c){this.x=b;this.y=d;this.z=c;return this};a.getLength=function(){var b=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z);return b};a.normalize=function(){var b=1/this.getLength();this.x*=b;this.y*=b;this.z*=b};a.add=function(b){this.x+=b.x;this.y+=b.y;this.z+=b.z;return this};a.sub=function(b){this.x-=b.x;this.y-=b.y;this.z-=b.z;return this};a.dot=function(b){return this.x*b.x+this.y*b.y+this.z*b.z};a.cross=function(c){var b,e,d;b=this.y*c.z-this.z*c.y;e=this.z*c.x-this.x*c.z;d=this.x*c.y-this.y*c.x;this.x=b;this.y=e;this.z=d;return this};a.copy=function(){var b=new CriGrxVector3();b.x=this.x;b.y=this.y;b.z=this.z;return b};a.transform3x3=function(d){var c=this.x;var b=this.y;var e=this.z;this.x=(c*d.m00)+(b*d.m10)+(e*d.m20);this.y=(c*d.m01)+(b*d.m11)+(e*d.m21);this.z=(c*d.m02)+(b*d.m12)+(e*d.m22);return this}})(CriGrxVector3.prototype);function CriGrxMatrix(){this.m00=0;this.m01=0;this.m02=0;this.m03=0;this.m10=0;this.m11=0;this.m12=0;this.m13=0;this.m20=0;this.m21=0;this.m22=0;this.m23=0;this.m30=0;this.m31=0;this.m32=0;this.m33=0}(function(a){a.setIdentity=function(){this.m00=1;this.m01=0;this.m02=0;this.m03=0;this.m10=0;this.m11=1;this.m12=0;this.m13=0;this.m20=0;this.m21=0;this.m22=1;this.m23=0;this.m30=0;this.m31=0;this.m32=0;this.m33=1};a.translateXY=function(b,c){this.m30=this.m30+b;this.m31=this.m31+c};a.translateXYZ=function(b,d,c){this.m30+=b;this.m31+=d;this.m32+=c;return this};a.translateV=function(b){this.translateXY(b.x,b.y)};a.setTranslationXY=function(b,c){this.setIdentity();this.m30=b;this.m31=c};a.setTranslationV=function(b){this.setTranslationXY(b.x,b.y)};a.scaleXY=function(b,c){this.m00*=b;this.m01*=c;this.m10*=b;this.m11*=c;this.m30*=b;this.m31*=c};a.scale=function(b){this.scaleXY(b,b)};a.scaleV=function(b){this.scaleXY(b.x,b.y)};a.setScale=function(b){this.setScaleXY(b,b)};a.setScaleXY=function(b,c){this.setIdentity();this.m00=b;this.m11=c};a.setScaleV=function(b){this.setScaleXY(b.x,b.y)};a.rotateX=function(e){var b=new Array(8);var d=Math.sin(e);var f=Math.cos(e);b[0]=this.m01*f+this.m02*-d;b[1]=this.m11*f+this.m12*-d;b[2]=this.m21*f+this.m22*-d;b[3]=this.m31*f+this.m32*-d;b[4]=this.m01*d+this.m02*f;b[5]=this.m11*d+this.m12*f;b[6]=this.m21*d+this.m22*f;b[7]=this.m31*d+this.m32*f;this.m01=b[0];this.m11=b[1];this.m21=b[2];this.m31=b[3];this.m02=b[4];this.m12=b[5];this.m22=b[6];this.m32=b[7];return this};a.rotateY=function(e){var b=new Array(8);var d=Math.sin(e);var f=Math.cos(e);b[0]=this.m00*f+this.m02*d;b[1]=this.m10*f+this.m12*d;b[2]=this.m20*f+this.m22*d;b[3]=this.m30*f+this.m32*d;b[4]=this.m00*-d+this.m02*f;b[5]=this.m10*-d+this.m12*f;b[6]=this.m20*-d+this.m22*f;b[7]=this.m30*-d+this.m32*f;this.m00=b[0];this.m10=b[1];this.m20=b[2];this.m30=b[3];this.m02=b[4];this.m12=b[5];this.m22=b[6];this.m32=b[7];return this};a.rotateZ=function(e){var b=new Array(8);var d=Math.sin(e);var f=Math.cos(e);b[0]=this.m00*f+this.m01*-d;b[1]=this.m10*f+this.m11*-d;b[2]=this.m20*f+this.m21*-d;b[3]=this.m30*f+this.m31*-d;b[4]=this.m00*d+this.m01*f;b[5]=this.m10*d+this.m11*f;b[6]=this.m20*d+this.m21*f;b[7]=this.m30*d+this.m31*f;this.m00=b[0];this.m10=b[1];this.m20=b[2];this.m30=b[3];this.m01=b[4];this.m11=b[5];this.m21=b[6];this.m31=b[7];return this};a.rotate=a.rotateZ;a.setRotation=function(b){this.setIdentity();var d=Math.cos(b);var c=Math.sin(b);this.m00=d;this.m01=c;this.m10=(-c);this.m11=d};a.setRotationQ=function(d){var c;var p,f,m,j;var i,h,g;var b,o,n;var l,k,e;c=d.x*d.x+d.y*d.y+d.z*d.z+d.w*d.w;p=(c>0)?(2/c):0;f=d.x*p;m=d.y*p;j=d.z*p;i=d.w*f;h=d.w*m;g=d.w*j;b=d.x*f;o=d.x*m;n=d.x*j;l=d.y*m;k=d.y*j;e=d.z*j;this.m00=1-(l+e);this.m10=o+g;this.m20=n-h;this.m01=o-g;this.m11=1-(b+e);this.m21=k+i;this.m02=n+h;this.m12=k-i;this.m22=1-(b+l);this.m03=this.m13=this.m23=0;this.m30=this.m31=this.m32=0;this.m33=1;return this};a.transpose=function(h){var n=this.m01;var l=this.m02;var j=this.m03;var g=this.m10;var f=this.m12;var e=this.m13;var d=this.m20;var c=this.m21;var b=this.m23;var m=this.m30;var k=this.m31;var i=this.m32;this.m01=g;this.m02=d;this.m03=m;this.m10=n;this.m12=c;this.m13=k;this.m20=l;this.m21=f;this.m23=i;this.m30=j;this.m31=e;this.m32=b};a.inverse=function(){var b=[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]];var j=new CriGrxMatrix();j.setIdentity();function i(n,m,l){n[0][0]=m.m00;n[0][1]=m.m01;n[0][2]=m.m02;n[0][3]=m.m03;n[1][0]=m.m10;n[1][1]=m.m11;n[1][2]=m.m12;n[1][3]=m.m13;n[2][0]=m.m20;n[2][1]=m.m21;n[2][2]=m.m22;n[2][3]=m.m23;n[3][0]=m.m30;n[3][1]=m.m31;n[3][2]=m.m32;n[3][3]=m.m33;n[0][4]=l.m00;n[0][5]=l.m01;n[0][6]=l.m02;n[0][7]=l.m03;n[1][4]=l.m10;n[1][5]=l.m11;n[1][6]=l.m12;n[1][7]=l.m13;n[2][4]=l.m20;n[2][5]=l.m21;n[2][6]=l.m22;n[2][7]=l.m23;n[3][4]=l.m30;n[3][5]=l.m31;n[3][6]=l.m32;n[3][7]=l.m33}i(b,this,j);for(var h=0;h<4;h++){var k=b[h][h];if(k!=1){if(k==0){var c;for(c=h+1;c<4;c++){if(b[c][h]!=0){break}}if(c==4){return j}var f=b[h];b[h]=b[c];b[c]=f;k=b[h][h]}var e=1/k;for(var d=h;d<8;d++){b[h][d]*=e}}for(var c=0;c<4;c++){if(c==h){continue}var e=b[c][h];if(e==0){continue}for(var d=h;d<8;d++){b[c][d]-=(b[h][d]*e)}}}var g=new CriGrxMatrix();g.m00=b[0][4];g.m01=b[0][5];g.m02=b[0][6];g.m03=b[0][7];g.m10=b[1][4];g.m11=b[1][5];g.m12=b[1][6];g.m13=b[1][7];g.m20=b[2][4];g.m21=b[2][5];g.m22=b[2][6];g.m23=b[2][7];g.m30=b[3][4];g.m31=b[3][5];g.m32=b[3][6];g.m33=b[3][7];this.copyMatrix(g)};a.copy=function(){var b=new CriGrxMatrix();b.copyMatrix(this);return b};a.copyMatrix=function(b){this.m00=b.m00;this.m01=b.m01;this.m02=b.m02;this.m03=b.m03;this.m10=b.m10;this.m11=b.m11;this.m12=b.m12;this.m13=b.m13;this.m20=b.m20;this.m21=b.m21;this.m22=b.m22;this.m23=b.m23;this.m30=b.m30;this.m31=b.m31;this.m32=b.m32;this.m33=b.m33};a.determinant=function(){var b=((this.m00*this.m11)-(this.m10*this.m01))*((this.m22*this.m33)-(this.m32*this.m23))-((this.m00*this.m21)-(this.m20*this.m01))*((this.m12*this.m33)-(this.m32*this.m13))+((this.m00*this.m31)-(this.m30*this.m01))*((this.m12*this.m23)-(this.m22*this.m13))+((this.m10*this.m21)-(this.m20*this.m11))*((this.m02*this.m33)-(this.m32*this.m03))-((this.m10*this.m31)-(this.m30*this.m11))*((this.m02*this.m23)-(this.m22*this.m03))+((this.m20*this.m31)-(this.m30*this.m21))*((this.m02*this.m13)-(this.m12*this.m03));return b};a.determinant3x3=function(){var b=this.m00*((this.m11*this.m22)-(this.m12*this.m21))+this.m01*((this.m12*this.m20)-(this.m10*this.m22))+this.m02*((this.m10*this.m21)-(this.m11*this.m20));return b};a.multiplyMatrix=function(c){var d=new CriGrxMatrix();d.m00=this.m00*c.m00+this.m01*c.m10+this.m02*c.m20+this.m03*c.m30;d.m01=this.m00*c.m01+this.m01*c.m11+this.m02*c.m21+this.m03*c.m31;d.m02=this.m00*c.m02+this.m01*c.m12+this.m02*c.m22+this.m03*c.m32;d.m03=this.m00*c.m03+this.m01*c.m13+this.m02*c.m23+this.m03*c.m33;d.m10=this.m10*c.m00+this.m11*c.m10+this.m12*c.m20+this.m13*c.m30;d.m11=this.m10*c.m01+this.m11*c.m11+this.m12*c.m21+this.m13*c.m31;d.m12=this.m10*c.m02+this.m11*c.m12+this.m12*c.m22+this.m13*c.m32;d.m13=this.m10*c.m03+this.m11*c.m13+this.m12*c.m23+this.m13*c.m33;d.m20=this.m20*c.m00+this.m21*c.m10+this.m22*c.m20+this.m23*c.m30;d.m21=this.m20*c.m01+this.m21*c.m11+this.m22*c.m21+this.m23*c.m31;d.m22=this.m20*c.m02+this.m21*c.m12+this.m22*c.m22+this.m23*c.m32;d.m23=this.m20*c.m03+this.m21*c.m13+this.m22*c.m23+this.m23*c.m33;d.m30=this.m30*c.m00+this.m31*c.m10+this.m32*c.m20+this.m33*c.m30;d.m31=this.m30*c.m01+this.m31*c.m11+this.m32*c.m21+this.m33*c.m31;d.m32=this.m30*c.m02+this.m31*c.m12+this.m32*c.m22+this.m33*c.m32;d.m33=this.m30*c.m03+this.m31*c.m13+this.m32*c.m23+this.m33*c.m33;return d};a.multiply=function(b){var c=this.multiplyMatrix(b);var b=this;b.m00=c.m00;b.m01=c.m01;b.m02=c.m02;b.m03=c.m03;b.m10=c.m10;b.m11=c.m11;b.m12=c.m12;b.m13=c.m13;b.m20=c.m20;b.m21=c.m21;b.m22=c.m22;b.m23=c.m23;b.m30=c.m30;b.m31=c.m31;b.m32=c.m32;b.m33=c.m33;return this};a.multiplyVector2=function(c){var d=new CriGrxVector2();d.x=this.m00*c.x+this.m10*c.y+this.m30;d.y=this.m01*c.x+this.m11*c.y+this.m31;return d};a.lookAtRH=function(h,g,b){var c=new CriGrxMatrix();var f,e,d;d=h.copy();d.sub(g);d.normalize();f=b.copy();f.cross(d);f.normalize();e=d.copy();e.cross(f);e.normalize();c.m00=f.x;c.m01=e.x;c.m02=d.x;c.m03=0;c.m10=f.y;c.m11=e.y;c.m12=d.y;c.m13=0;c.m20=f.z;c.m21=e.z;c.m22=d.z;c.m23=0;c.m30=0;c.m31=0;c.m32=0;c.m33=1;this.multiply(c);this.translateXYZ(-h.x,-h.y,-h.z);return this};a.setPerspectiveRH=function(h,d,e,i){var f=1/Math.tan(h*0.5);var b=f/d;var g=i/(i-e);var c=this;c.m00=b;c.m01=0;c.m02=0;c.m03=0;c.m10=0;c.m11=f;c.m12=0;c.m13=0;c.m20=0;c.m21=0;c.m22=-g;c.m23=-1;c.m30=0;c.m31=0;c.m32=-e*g;c.m33=0;return this}})(CriGrxMatrix.prototype);function criLaMg_getTransformMatrix(a,i,f,c,e){var n=new CriGrxMatrix();var j=new CriGrxMatrix();var d=new CriGrxMatrix();n.setIdentity();j.setIdentity();d.setIdentity();var b=new CriGrxMatrix();b.setIdentity();var k=new CriGrxMatrix();var o=new CriGrxMatrix();var l=new CriGrxMatrix();k.setIdentity();o.setIdentity();l.setIdentity();b.translateXY(a.x,a.y);var h=c.x*f.x;var g=c.y*f.y;o.translateXY(h,g);k.rotate(i);l.translateXY(-h,-g);j.translateXY(e.x*f.x,e.y*f.y);n.scaleXY(f.x,f.y);d.translateXY(-e.x,-e.y);var m=new CriGrxMatrix();m.setIdentity();m=d.multiplyMatrix(n);m=m.multiplyMatrix(j);m=m.multiplyMatrix(l);m=m.multiplyMatrix(k);m=m.multiplyMatrix(o);m=m.multiplyMatrix(b);return m}function criLaMg_getTransformInverseMatrix(a,i,f,c,e){var n=new CriGrxMatrix();var j=new CriGrxMatrix();var d=new CriGrxMatrix();n.setIdentity();j.setIdentity();d.setIdentity();var b=new CriGrxMatrix();b.setIdentity();var k=new CriGrxMatrix();var o=new CriGrxMatrix();var l=new CriGrxMatrix();k.setIdentity();o.setIdentity();l.setIdentity();b.translateXY(-a.x,-a.y);var h=c.x*f.x;var g=c.y*f.y;o.translateXY(h,g);k.rotate(-i);l.translateXY(-h,-g);j.translateXY(e.x*1/f.x,e.y*1/f.y);n.scaleXY(1/f.x,1/f.y);d.translateXY(-e.x,-e.y);var m=new CriGrxMatrix();m.setIdentity();m=b.multiplyMatrix(l);m=m.multiplyMatrix(k);m=m.multiplyMatrix(o);m=m.multiplyMatrix(d);m=m.multiplyMatrix(n);m=m.multiplyMatrix(j);return m}function CriGrxQuat(){this.x=0;this.y=0;this.z=0;this.w=1}(function(a){a.setIdentity=function(){this.x=0;this.y=0;this.z=0;this.w=1};a.set=function(b,e,d,c){this.x=b;this.y=e;this.z=d;this.w=c};a.setAxisXYZ=function(b,h,f){var e=angle=-angle*0.5;var d=Math.sin(e);var g=Math.cos(e);this.x=d*axis_x;this.y=d*axis_y;this.z=d*axis_z;this.w=g;this.normalize()};a.setMatrix=function(f){var d=f.m00+f.m11+f.m22;var i;var g;var e;var j;if(d>=0){var k=Math.sqrt(d+1);j=k*0.5;k=0.5/k;i=(f.m21-f.m12)*k;g=(f.m02-f.m20)*k;e=(f.m10-f.m01)*k}else{var b=0;var c=f.m00;if(f.m11>f.m00){b=1;c=f.m11}if(f.m22>c){b=2}switch(b){case 0:k=Math.sqrt(f.m00-(f.m11+f.m22)+1);i=k*0.5;k=0.5/k;g=(f.m01+f.m10)*k;e=(f.m20+f.m02)*k;j=(f.m21-f.m12)*k;break;case 1:k=Math.sqrt(f.m11-(f.m22+f.m00)+1);g=k*0.5;k=0.5/k;e=(f.m12+f.m21)*k;i=(f.m01+f.m10)*k;j=(f.m02-f.m20)*k;break;case 2:k=Math.sqrt(f.m22-(f.m00+f.m11)+1);e=k*0.5;k=0.5/k;i=(f.m20+f.m02)*k;g=(f.m12+f.m21)*k;j=(f.m10-f.m01)*k;break}}this.x=i;this.y=g;this.z=e;this.w=j};a.setRotateAxis=function(d,e){var b,f;b=Math.sin(-e*0.5);f=Math.cos(-e*0.5);this.x=b*d.x;this.y=b*d.y;this.z=b*d.z;this.w=f;this.normalize();return this};a.setFromTo=function(e,d){var b=new CriGrxVector3();b=e.copy();b.cross(d);b.normalize();var c=e.dot(d);c=Math.acos(c);this.setRotateAxis(b,c)};a.getLength=function(){var b=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);return b};a.normalize=function(){var b=1/this.getLength();this.x*=b;this.y*=b;this.z*=b;this.w*=b}})(CriGrxQuat.prototype);var CriLaSeekStyle={ALL:"all",FORWARD:"forward",BACK:"back"};var CriUABrowser={Uninit:-1,IE:1,Edge:2,Chrome:3,Safari:4,Firefox:5,Other:-2};Object.freeze(CriUABrowser);var CriUAOS={Uninit:-1,Windows:1,macOS:2,iOS:3,Android:4,Other:-2};Object.freeze(CriUAOS);var CriUABrowserVersion={Uninit:-1,Unimplement:-2};Object.freeze(CriUABrowserVersion);var CriUAChecker={rawUA_:null,browser_:CriUABrowser.Uninit,os_:CriUAOS.Uninit,browserVer_:CriUABrowserVersion.Uninit};CriUAChecker.initialize_=function(){if(this.rawUA_==null){this.rawUA_=window.navigator.userAgent.toLowerCase()}};CriUAChecker.getBrowser=function(){this.initialize_();var b=this.browser_;if(b!=CriUABrowser.Uninit){return b}var a=this.rawUA_;b=CriUABrowser.Other;if(a.indexOf("msie")!=-1||a.indexOf("trident")!=-1){b=CriUABrowser.IE}else{if(a.indexOf("edge")!=-1||a.indexOf("edgios")!=-1){b=CriUABrowser.Edge}else{if(a.indexOf("chrome")!=-1||a.indexOf("crios")!=-1){b=CriUABrowser.Chrome}else{if(a.indexOf("safari")!=-1){b=CriUABrowser.Safari}else{if(a.indexOf("firefox")!=-1){b=CriUABrowser.Firefox}}}}}this.browser_=b;return b};CriUAChecker.getOS=function(){this.initialize_();var b=this.os_;if(b!=CriUAOS.Uninit){return b}var a=this.rawUA_;b=CriUAOS.Other;if(a.indexOf("windows")!=-1){b=CriUAOS.Windows}else{if(a.indexOf("iphone")!=-1||a.indexOf("ipad")!=-1||a.indexOf("ipod")!=-1){b=CriUAOS.iOS}else{if(a.indexOf("mac os x")!=-1){b=CriUAOS.macOS}else{if(a.indexOf("android")!=-1){b=CriUAOS.Android}}}}this.os_=b;return b};CriUAChecker.isMobile=function(){var a=navigator.userAgent;return/(iPhone|iPod|iPad|Android)/.test(a)};CriUAChecker.isTablet=function(){var a=navigator.userAgent;if(a.indexOf("Android")!==-1){return a.indexOf("Mobile")===-1}else{return/(iPad|Tablet|kindle|silk)/.test(a)}};CriUAChecker.isSmallScreen=function(){var a=navigator.userAgent;return/(iPhone|iPod|Android)/.test(a)};CriUAChecker.getOSVersion=function(){this.initialize_();var e=this.os_;if(e==CriUAOS.Uninit){e=this.getOS()}function d(f){if(f==null){return null}var h=String(f[2]).length;var g=parseFloat(parseInt(f[1],10)+parseInt(f[2],10)/Math.pow(10,h));return g}var c=this.rawUA_;var b=null;if(CriUAOS.Windows==e){}else{if(CriUAOS.macOS==e){var a=c.match(/os x (\d+)_(\d+)/);b=d(a)}else{if(CriUAOS.iOS==e){var a=c.match(/os (\d+)_(\d+)/);b=d(a)}else{if(CriUAOS.Android==e){b=parseFloat(c.slice(c.indexOf("android")+8))}else{}}}}return b};CriUAChecker.getBrowserVersion=function(){this.initialize_();var d=this.browserVer_;if(d!=CriUABrowserVersion.Uninit){return d}var c=this.rawUA_;d=CriUABrowserVersion.Unimplement;var b=this.getBrowser();if(b==CriUABrowser.IE){d=c.match(/(msie\s|rv:)([\d\.]+)/)[2]}else{if(b==CriUABrowser.Chrome){var a=c.match(/chrome\/([\d\.]+)/)[1];d=a.split(".")[0]}}this.browserVer_=d;return d};var CriTypeUtil={};CriTypeUtil.typeOf=function(b){var a=Object.prototype.toString.call(b).slice(8,-1);if(a==null){return undefined.toString()}return a};var CriUnitValue={};CriUnitValue.splitUnit=function(a,b){return CriUnitValue.splitUnitInt(a,b)};CriUnitValue.splitUnitInt=function(b,c){var a=CriUnitValue.splitUnitFloat(b,c);return[parseInt(a[0]),a[1]]};CriUnitValue.splitUnitFloat=function(d,f){var a="";if(f!=null){a=f}var c=d;if(CriTypeUtil.typeOf(d)==="String"){c=parseFloat(d);var b=d.split(/\d+/);var e=b[b.length-1];if(e!=""){a=e}}return[c,a]};CriUnitValue.parseAngleToRadian=function(a){var b=CriUnitValue.splitUnitFloat(a+"");var e=b[0]||0;var c=b[1]||"";var d=e;if(c){if(c==="deg"){d=CriGrxMath.degreeToRadian(e)}}return d};CriUnitValue.frameToSecond=function(a,b){return b/a};CriUnitValue.secondToFrame=function(b,a){return a*b};var CriLaHtmlCss={};(function(d){function a(i){var h=parseFloat(i);if(isNaN(h)){return 1}var g=CriUnitValue.splitUnitFloat(i);if(g[1]==="%"){h/=100}return h}d.getZoom=(function(){function h(j){var k="";if(j===document.documentElement){k=j.style.zoom}else{k=g(j)}return k}function g(j){return d.getComputedStyle(j).zoom}var i;switch(CriUAChecker.getBrowser()){case CriUABrowser.IE:case CriUABrowser.Edge:i=g;break;default:i=h;break}return function(j){var k=i(j);return a(k)}})();d.getHtmlZoom=function(){return d.getZoom(document.documentElement)};d.getTransform=function(j){var g=new CriGrxMatrix();g.setIdentity();var i=this.getComputedStyle(j).transform;var h=i.match(/matrix\((.+)\)/);if(h==null){var h=i.match(/matrix3d\((.+)\)/)}if(h!=null){var k=h[1];var l=k.split(",").map(function(m){m=m.trim();return Number(m)});if(l.length==6){g.scaleXY(l[0],l[3]);g.translateXY(l[4],l[5])}else{if(l.length==16){g.scaleXY(l[0],l[5]);g.translateXY(l[12],l[13])}}}return g};d.getTransformOrigin=function(i){var g={x:0,y:0};var j=this.getComputedStyle(i).transformOrigin;var h=j.match(/([0-9\\.]+)(px)? +([0-9\\.]+)(px)?/);if(h){g.x=Number(h[1]);g.y=Number(h[3])}return g};d.getTransformWithOrigin=(function(){return function(i){var h=d.getTransform(i);var g=d.getTransformOrigin(i);var j=new CriGrxMatrix();j.setIdentity();j.translateXY(-g.x,-g.y);j=j.multiplyMatrix(h);j.translateXY(g.x,g.y);return j}})();d.calcTotalTransformWithOrigin=(function(){function h(i){return i.parentElement}function g(i,k){var j=d.getTransformWithOrigin(k);return i.multiplyMatrix(j)}return function(i){var j=new CriGrxMatrix();j.setIdentity();return e(i,h,j,g)}})();d.isInViewPort=function(h){if(d.isAncestorFixed(h)){return true}var i=CriLaRectangle.createFromElement(h);var g=CriLaRectangle.createFromViewPort();return CriLaRectangle.collision(i,g)};d.isInvisible=function(j){if(!d.isInViewPort(j)){return true}var k=d.getElementWidthHeight(j);var h=k.getWidth();var l=k.getHeight();if(h===0||l===0){return true}var i=d.getComputedStyle(j);var g=i.visibility;if(g==="hidden"){return true}return false};d.addClassName=function(g,h){g.classList.add(h)};d.removeClassName=function(g,h){g.classList.remove(h)};d.toggleClassName=function(g,h){g.classList.toggle(h)};d.getComputedStyle=function(h,g){return h.currentStyle||document.defaultView.getComputedStyle(h,g)};d.setVisibility=function(h,g){g=Boolean(g);var i="liveact-player__element--invisible";if(g){h.classList.remove(i)}else{h.classList.add(i)}};d.getVisibility=function(g){var i="liveact-player__element--invisible";var h=g.classList.contains(i);return(h==false)};d.wrap=function(g,i){var h=g.parentNode;h.insertBefore(i,g);i.appendChild(g)};d.unwrap=function(g){var i=g.parentNode;var h=i.parentNode;h.insertBefore(g,i);h.removeChild(i)};d.isFixed=function(g){return d.getComputedStyle(g).position==="fixed"};d.isAncestorFixed=(function(){function g(h){return h.parentElement}return function(h){return b(h,g,d.isFixed)}})();function c(j,g,i){for(var h=j;h;h=g(h)){i(h)}}function e(k,h,j,g){var i=j;c(k,h,function(l){i=g(i,l)});return i}function b(j,h,g){for(var i=j;i;i=h(i)){if(g(i)){return true}}return false}function f(h,g){return h*d.getZoom(g)}d.calcTotalZoom=(function(){function g(j){return d.isFixed(j)?null:j.parentElement}function i(j){return j.parentElement}var h=CriUAChecker.getBrowser()===CriUABrowser.IE?g:i;return function(j){return e(j,h,1,f)}})();d.getElementPosition=(function(){function m(p){var o=p.parentElement;if(o==null){return null}if(o.offsetParent!==p.offsetParent){return null}return o}function j(o){return o.offsetParent}function n(q,p){var o=p.parentElement;return o===q?null:o}function h(r,q){var p=false;var s={x:0,y:0};c(r,j,function(t){c(t,n.bind(null,j(t)),function(w){var v=d.getTransformWithOrigin(w);var u=v.multiplyVector2(s);s.x=u.x;s.y=u.y});q(s,t,p);if(d.isFixed(t)){p=true}});if(p){var o=CriLaRectangle.createFromViewPort();s.x+=o.left;s.y+=o.top}return s}function i(r,q,o){if(!o){r.x+=q.offsetLeft;r.y+=q.offsetTop}var p=e(q,m,1,f);r.x*=p;r.y*=p}function g(q,p,o){if(!o){q.x+=p.offsetLeft;q.y+=p.offsetTop}}function l(q,p,o){if(!o){c(p,m,function(t){q.x+=t.offsetLeft;q.y+=t.offsetTop;var r=t.parentElement;if(r){if(t.offsetParent===r.offsetParent){q.x-=r.offsetLeft;q.y-=r.offsetTop}var s=d.getZoom(r);q.x*=s;q.y*=s}})}}var k;switch(CriUAChecker.getBrowser()){case CriUABrowser.Edge:k=g;break;case CriUABrowser.IE:k=l;break;default:k=i;break}return function(o){return h(o,k)}})();d.getElementWidthHeight=function(i){var h=d.calcTotalZoom(i);var g=d.calcTotalTransformWithOrigin(i);return CriLaRectangle.createFromXYWH(0,0,i.clientWidth*h*g.m00,i.clientHeight*h*g.m11)};d.middle=function(g){var h="calc((100% - "+g.clientHeight+"px) / 2)";g.style.top=h};d.center=function(g){var h="calc((100% - "+g.clientWidth+"px) / 2)";g.style.left=h};d.getEventPageX=function(g){return(g.changedTouches&&g.changedTouches[0])?g.changedTouches[0].pageX:g.pageX};d.calcEventNormalizedLeftPosition=function(k,i){var h=CriLaRectangle.createFromElement(k);var j=h.getWidth()||1;var g=d.getEventPageX(i);var l=(g-h.left)/j;return CriGrxMath.clamp(0,1,l)};d.createHorizontalLinearGradient=function(g){return"linear-gradient("+["90deg",g.map(function(h){return h.color+" "+h.percent+"%"})].join(",")+")"};d.createHorizontalStripedGradient=function(h,g,j){var i=[{color:h,percent:0}];j.forEach(function(l,k){i.push({color:k%2?g:h,percent:l});i.push({color:k%2?h:g,percent:l})});i.push({color:j.length%2?g:h,percent:100});return this.createHorizontalLinearGradient(i)};d.escapeHtml=function(g){return g.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}})(CriLaHtmlCss);var CriLaPolyfill={};(function(c){function b(d){throw new Error("Fullscreen APIがサポートされていません")}c.Object={};c.Object.setPrototypeOf=Object.setPrototypeOf||function(e,d){e.__proto__=d;return e};c.Event={};c.Event.CustomEvent=(function(){if(typeof(window.CustomEvent)==="function"){return window.CustomEvent}var d=function(f,g){g=g||{bubbles:false,cancelable:false,detail:void (0)};var e=document.createEvent("CustomEvent");e.initCustomEvent(f,g.bubbles,g.cancelable,g.detail);return e};d.prototype=window.Event.prototype;return d})();c.Event.MouseEvent=(function(d){if(typeof(window.MouseEvent)==="function"){var f=CriUAChecker.getBrowser();if(f!==CriUABrowser.Edge){return window.MouseEvent}}var e=function(i,h){h=h||{bubbles:false,cancelable:false,detail:void (0)};var g=document.createEvent("MouseEvent");g.initMouseEvent(i,h.bubbles,h.cancelable,d,h.detail,h.screenX,h.screenY,h.clientX,h.clientY,h.ctrlKey,h.altKey,h.shiftKey,h.metaKey,h.button,h.relatedTarget);return g};e.prototype=Event.prototype;return e})(window);c.Event.PointerEvent=(function(d){if(typeof(window.PointerEvent)==="function"){var f=CriUAChecker.getBrowser();if(f!==CriUABrowser.Edge){return window.PointerEvent}}var e=function(i,h){h=h||{bubbles:false,cancelable:false,detail:void (0)};var g=document.createEvent("PointerEvent");g.initPointerEvent(i,h.bubbles,h.cancelable,d,h.detail,h.screenX,h.screenY,h.clientX,h.clientY,h.ctrlKey,h.altKey,h.shiftKey,h.metaKey,h.button,h.relatedTarget,h.offsetX,h.offsetY,h.width,h.height,h.pressure,h.rotation,h.tiltX,h.tiltY,h.pointerId,h.pointerType,h.hwtimeStamp,h.isPrimary);return g};e.prototype=window.Event.prototype;return e})(window);c.Array={};c.Array.find=function(k,f,e){var g=void (0);for(var h=0,d=k.length;h<d;++h){var j=k[h];if(f.call(e,j,h,k)){g=j;break}}return g};c.Array.findIndex=function(k,f,e){var g=-1;for(var h=0,d=k.length;h<d;++h){var j=k[h];if(f.call(e,j,h,k)){g=h;break}}};c.Array.from=(function(){function d(e){return e}return function(e){return Array.prototype.map.call(e,d)}})();c.Element={};c.Element.requestFullscreen=(function(){var d=["webkitRequestFullscreen","mozRequestFullScreen","msRequestFullscreen","requestFullscreen"];var e=c.Array.find(d,function(f){return f in document.documentElement});if(e!=null){return function(f){f[e]()}}else{return b}})();c.Document={};c.Document.exitFullscreen=(function(){var e=["webkitCancelFullScreen","mozCancelFullScreen","msExitFullscreen","cancelFullScreen","exitFullscreen"];var d=c.Array.find(e,function(f){return f in document});if(d!=null){return function(){document[d]()}}else{return b}})();var a=(function(){var d=["webkitFullscreenElement","mozFullScreenElement","msFullscreenElement","fullscreenElement"];var e=c.Array.find(d,function(f){return f in document});if(e!=null){return function(){return document[e]}}else{return b}})();Object.defineProperty(c.Document,"fullscreenElement",{get:a});c.Canvas={};c.Canvas.toBlob=(function(h,l,k,g){if(HTMLCanvasElement.prototype.toBlob!=null){return h.toBlob(l,k,g)}var f=atob(h.toDataURL(k,g).split(",")[1]),e=f.length,d=new Uint8Array(e);for(var j=0;j<e;j++){d[j]=f.charCodeAt(j)}l(new Blob([d],{type:k||"image/png"}))})})(CriLaPolyfill);function criLiveActRelease(){if(window.CollectGarbage){window.CollectGarbage()}}var CriLaId={};CriLaId.createUniqueId=(function(){var a=Math.round;var d=Math.pow(2,31)-1;var c={};var b=function(){var f=a(d*Math.random())&d;var e=a(Date.now()/1000);var g=f+"."+e;if(g in c){return b()}else{c[g]=true;return g}};return b})();CriLaId.createUUIDv4=function(){var b=CriUAChecker.rawUA_;var f=encodeURI(b).split("").map(function(h){var g=h.charCodeAt();return isNaN(g)?0:g});var a=""+Date.now();var e=a.slice(0,a.length/2);var d=a.slice(a.length/2);f.push(parseInt(e));f.push(parseInt(d));var c=new CriLaMT(f);return"xxxxxxxx.xxxx.4xxx.yxxx.xxxxxxxxxxxx".replace(/x/g,function(){return Math.floor(c.random()*16).toString(16)}).replace(/y/g,function(){return(Math.floor(c.random()*4)+8).toString(16)})};CriLaId.getIdFromObject=(function(){var b=[];var a=[];var c=0;return function(e){var d=b.indexOf(e);if(d===-1){b.push(e);var f=CriLaId.createUniqueId();a.push(f);++c;return f}else{return a[d]}}})();CriLaId.getClientId=function(){var a="_la-cid";var d=null;var c=null;try{c=localStorage}catch(b){console.warn("LiveAct Warning: localStorage disabled")}if(c){d=c.getItem(a)}if(!d){d=CriLaId.createUUIDv4();if(c){c.setItem(a,d)}}return d};var CriLaXHR={};CriLaXHR.requestLoad=function(d,f,b,a,e){var c=e||{async:true};if(!b||typeof b!=="function"){b=null}if(!a||typeof a!=="function"){a=null}f=f.toLowerCase();var g=new XMLHttpRequest();g.open("GET",d,c.async,c.user,c.password);g.responseType=this.mapResponseType_(f);if(a){g.onerror=a;g.onabort=a;g.ontimeout=a}if(b){g.onload=this.onloadFactory_(f,b)}g.send(null)};CriLaXHR.requestLoadSync=function(a){var b=new XMLHttpRequest();b.open("GET",a,false);b.send(null);return b};CriLaXHR.mapResponseType_=function(a){return this.RESPONSE_TYPE_MAP[a]||a};CriLaXHR.RESPONSE_TYPE_MAP={json:"text"};CriLaXHR.onloadFactory_=function(b,a){switch(b){case"text":return function(c){var d=c.target.responseText;a(d)};case"json":return function(c){var e=c.target.responseText;var d=JSON.parse(e);a(d)};case"arraybuffer":return function(d){var c=d.target.response;a(c)};case"blob":return function(d){var c=window.URL.createObjectURL(d.target.response);a(c)};default:throw new Error("invalid responseType")}};var CriLaBrowserSetting={};CriLaBrowserSetting.isSaveData=function(){if(window.navigator.connection==null){return false}if(window.navigator.connection.saveData==null){return false}return window.navigator.connection.saveData};function CriLaMT(a){a=a||[new Date().getTime()];this.array_=new Array(624);this.initalize(a)}(function(a){a.initalize=function(c){this.setSeed(19650218);var g=this.array_;var f=1;var e=0;for(var d=Math.max(g.length,c.length);d>0;d--){var b=(g[f-1]^(g[f-1]>>>30));b=this.multUint32_(b,1664525);g[f]=(g[f]^b)+(c[e]>>>0)+e;f++;e++;if(f>=g.length){g[0]=g[g.length-1];f=1}if(e>=c.length){e=0}}for(var d=g.length-1;d>0;d--){var b=(g[f-1]^(g[f-1]>>>30));b=this.multUint32_(b,1566083941);g[f]=(g[f]^b)-f;f++;if(f>=g.length){g[0]=g[g.length-1];f=1}}g[0]=2147483648};a.multUint32_=function(f,d){var e=f>>>16,c=f&65535;var h=d>>>16,g=d&65535;return(((e*g+c*h)<<16)+c*g)>>>0};a.setSeed=function(b){var d=this.array_;d[0]=b>>>0;for(var c=1;c<d.length;c++){d[c]=this.multUint32_((d[c-1]^(d[c-1]>>30))+c,1812433253)}this.index_=d.length};a.randInt32_=function(){var e=this.array_;var g=0;var c=2147483648;var d=2147483647;var f=2567483615;if(this.index_>=e.length){var h=397;for(var b=0;b<(e.length-h);b++){g=(e[b]&c)|(e[b+1]&d);e[b]=e[b+h]^(g>>>1)^((g&1)?f:0)}for(var b=(e.length-h);b<e.length;b++){g=(e[b]&c)|(e[b+1]&d);e[b]=e[b+h-e.length]^(g>>>1)^((g&1)?f:0)}this.index_=0}g=e[this.index_++];g^=g>>>11;g^=(g<<7)&2636928640;g^=(g<<15)&4022730752;g^=g>>>18;return g};a.random=function(){var d=this.randInt32_()>>>5;var c=this.randInt32_()>>>6;return(d*67108864+c)/9007199254740992}})(CriLaMT.prototype);var CriLaUtility={};CriLaUtility.functionExists=function(c,a){var b=a||window;return typeof b[c]==="function"};CriLaUtility.Array={};CriLaUtility.Array.zip=function(d){var a=CriLaPolyfill.Array.from(arguments).map(function(f){return CriLaPolyfill.Array.from(f)});if(a.length===0){return[]}var e=Math.max.apply(Math,a.map(function(f){return f.length}));a.forEach(function(f){f.length=e});var c=[];for(var b=0;b<e;++b){c.push(a.map(function(f){return f[b]}))}return c};CriLaUtility.Array.isEqual=function(a,b,d){if(!a||!b||a.length!==b.length){return false}a=CriLaPolyfill.Array.from(a);b=CriLaPolyfill.Array.from(b);var c=d||function(f,e){return f===e};return CriLaUtility.Array.zip(a,b).every(function(e){return c(e[0],e[1])})};CriLaUtility.Array.copy=function(a,b){Array.prototype.splice.apply(b,[0,b.length].concat(a))};CriLaUtility.colorStringToArray=function(d){var a=[0,0,0,0];if(typeof d=="string"){if(d.indexOf("#")===0){d=d.substr(1);if(d.length==3){a=[parseInt(d[0]+d[0],16),parseInt(d[1]+d[1],16),parseInt(d[2]+d[2],16),1]}else{a=[parseInt(d.substr(0,2),16),parseInt(d.substr(2,2),16),parseInt(d.substr(4,2),16),1]}}else{if(d.indexOf("rgb(")===0){var c=d.indexOf(",");a=[parseInt(d.substr(4,c)),parseInt(d.substr(c+1,d.indexOf(",",c))),parseInt(d.substr(d.indexOf(",",c+1)+1,d.indexOf(")"))),1]}else{if(d.indexOf("rgba(")===0){var c=d.indexOf(","),b=d.indexOf(",",c+1);a=[parseInt(d.substr(5,c)),parseInt(d.substr(c+1,b)),parseInt(d.substr(d.indexOf(",",c+1)+1,d.indexOf(",",b))),parseFloat(d.substr(d.indexOf(",",b+1)+1,d.indexOf(")")))]}else{var e={acqua:"#0ff",teal:"#008080",blue:"#00f",navy:"#000080",yellow:"#ff0",olive:"#808000",lime:"#0f0",green:"#008000",fuchsia:"#f0f",purple:"#800080",red:"#f00",maroon:"#800000",white:"#fff",gray:"#808080",silver:"#c0c0c0",black:"#000",orange:"#ffa500"};if(e[d]!=undefined){a=this.colorStringToArray(e[d])}}}}}return a};CriLaUtility.FitASizetoBSize=function(f,a,c,h){var g=a/f;var e=Math.min(c,h);var b=f>a?c:h/g;var d=f>a?c*g:h;if(g==1){b=e;d=e}return[b,d]};CriLaUtility.getParentLocation=function(){return window!==window.parent?document.referrer:""};CriLaUtility.getDomainFromUrl=function(b){var a="";a=b.indexOf("://")>-1?b.split("/")[2]:b.split("/")[0];a=a.split(":")[0];return a};function CriLaFrameRange(a,b){this.resolution_=CriLaFrameRange.DEFAULT_RESOLUTION;this.eps_=CriLaFrameRange.DEFAULT_EPS;this.op_=CriLaFrameRange.DEFAULT_OPERATOR;this.begin_=this.normalizeNumber_(a);this.duration_=this.normalizeNumber_(b)}CriLaFrameRange.DEFAULT_RESOLUTION=0.1;CriLaFrameRange.DEFAULT_EPS=CriLaFrameRange.DEFAULT_RESOLUTION/10;CriLaFrameRange.DEFAULT_OPERATOR=new CriGrxRealNumberOperator(CriLaFrameRange.DEFAULT_EPS);CriLaFrameRange.op=CriLaFrameRange.DEFAULT_OPERATOR;(function(a){Object.defineProperty(a,"begin",{get:function(){return this.begin_},set:function(b){this.begin_=this.normalizeNumber_(b)},enumerable:true});Object.defineProperty(a,"start",Object.getOwnPropertyDescriptor(a,"begin"));Object.defineProperty(a,"duration",{get:function(){return this.duration_},set:function(b){this.duration_=this.normalizeNumber_(b)},enumerable:true});Object.defineProperty(a,"end",{get:function(){return this.begin+this.duration},set:function(b){b=this.normalizeNumber_(b);if(this.lt(b,this.begin)){throw new Error("end frame must be greater than or equal to begin frame: "+JSON.stringify({begin:this.begin,end:b}))}this.duration=this.normalizeNumber_(b-this.begin)},enumerable:true});Object.defineProperty(a,"last",{get:function(){return Math.max(this.begin,this.end-this.resolution_)},set:function(b){b=this.normalizeNumber_(b);if(this.lt(b,this.begin)){throw new Error("last frame must be greater than or equal to begin frame: "+JSON.stringify({begin:this.begin,last:b}))}this.end=this.normalizeNumber_(b+this.resolution_)},enumerable:true});a.clone=function(){return new CriLaFrameRange(this.begin,this.duration)};a.setResolution=function(b){this.resolution_=this.normalizeNumber_(b);this.eps_=this.resolution_/10;this.op_=new CriGrxRealNumberOperator(this.eps_)};["eq","lt","le","gt","ge","between","betweenHalfOpen"].forEach(function(b){a[b]=function(){return this.op_[b].apply(this.op_,arguments)}});a.isInnerFrame=function(b){return this.eq(this.duration,0)?this.eq(b,this.begin):this.betweenHalfOpen(this.begin,this.end,b)};a.isPlayableFrame=function(b){return this.eq(this.duration,0)?this.eq(b,this.begin):this.between(this.begin,this.last,b)};a.isExceededLastFrame=function(b){return 0<=this.last&&this.ge(b,this.last)};a.clamp=function(b){return CriGrxMath.clamp(this.begin,this.end,b)};a.clampWithPlayableFrame=function(b){return CriGrxMath.clamp(this.begin,this.last,b)};a.normalizeNumber_=function(b){b=Number(b);if(isNaN(b)){return 0}return Math.max(b,0)}})(CriLaFrameRange.prototype);var CriLaData={};CriLaData.KeyValuePair=function(a,b){this.key=a;this.val=b};CriLaData.KeyValuePair.fromString=function(f,e){var a=e.split(f);var b=null;if(a.length==2){b=new CriLaData.KeyValuePair(a[0].trim(),a[1].trim())}else{if(a.length>2){var c=a.shift().trim();var d=a.join(f).trim();b=new CriLaData.KeyValuePair(c,d)}}return b};CriLaData.Dict={};CriLaData.Dict.fromListWith=function(c,b){var a={};c.forEach(function(d){a[d.key]=b(a[d.key],d.val)});return a};CriLaData.Dict.fromList=function(a){return CriLaData.Dict.fromListWith(a,function(d,c){return c})};CriLaData.Dict.fromStringWith=function(a,b,e,c){var d=e.split(a).map(function(f){return f.trim()}).map(CriLaData.KeyValuePair.fromString.bind(null,b)).filter(Boolean);return CriLaData.Dict.fromListWith(d,c)};CriLaData.Dict.fromString=function(a,b,c){return CriLaData.Dict.fromStringWith(a,b,c,function(e,d){return d})};var CriLaFunctional={};CriLaFunctional.throttle=function(c,a){function b(){return new Date().getTime()}var d=b()-c;return function(){var e=b();if((d+c)<=e){d=e;a()}}};CriLaFunctional.debounce=function(b,a){var c=null;return function(){clearTimeout(c);c=setTimeout(a,b)}};var CriLaURL={};(function(a){CriLaURL.appendSlash=function(b){if(b.slice(-1)!="/"){b+="/"}return b};CriLaURL.absPath=function(c){var b=document.createElement("a");b.href=c;return b.href};CriLaURL.getDirectory=function(d){var c=d.split(/[\/\\]/);var e=c.slice(0,-1);var b=e.join("/")||"./";return b};CriLaURL.addPwToUrl=function(c,b){var d=c+"?pw="+b;return(!b||b=="")?c:d};CriLaURL.sanitize=function(b,f){var c=Boolean(f);if(!b){return""}b=b+"";b=decodeURIComponent(b);var e=[];e.push("^https?:\\/\\/.*$");e.push("^\\/.*$");e.push("^[^:]+$");var d=new RegExp(e.map(function(g){return"("+g+")"}).join("|"));if(!b.match(d)){if(!c){console.warn(b+" をリンクに設定することができません。");console.warn("data-linkに渡すことのできる文字列は、'http://' または 'https://' から始まるURL、もしくは相対パスのみです。")}return""}b=encodeURI(b);b=b.replace(/['()*]/g,function(g){return"%"+g.charCodeAt(0).toString(16)});b=b.replace(/[^#]!/g,function(g,h){if(g.length==1){return"%"+g.charCodeAt(0).toString(16)}else{return g[0]+"%"+g[1].charCodeAt(0).toString(16)}});return b}})(CriLaURL);function CriTransition(a,d,f,e){var c=this.propertyFunctionDictionary_={};for(var b in a){c[b]=a[b]}d=Number(d);d=d===d?d:0;this.duration_=d<0?0:d;this.easing_=f||CriTransition.Easing.linear;this.endCallback_=e||function(){};this.time_=0;this.ended_=false}CriTransition.simplePropertyCurve=function(b,a){return function(c){return b*(1-c)+a*c}};CriTransition.Easing=(function(){var s={};var o=Math.PI;var b=Math.sin;var d=Math.cos;var f=Math.pow;var r=Math.sqrt;s.linear=function(v){return v};var j=function(v){return function(w){return 1-v(1-w)}};var q=function(w,v){return function(y){return y<0.5?w(y*2)/2:0.5+v(y*2-1)/2}};var t=s.easeInSine=function(v){return 1-d(v*o/2)};var k=s.easeOutSine=j(t);s.easeInOutSine=q(t,k);var n=function(w,v){return f(v,w)};var p=s.easeInQuad=n.bind(null,2);var i=s.easeOutQuad=j(p);s.easeInOutQuad=q(p,i);var m=s.easeInCubic=n.bind(null,3);var e=s.easeOutCubic=j(m);s.easeInOutCubic=q(m,e);var g=s.easeInQuart=n.bind(null,4);var u=s.easeOutQuart=j(g);s.easeInOutQuart=q(g,u);var h=s.easeInQuint=n.bind(null,5);var c=s.easeOutQuint=j(h);s.easeInOutQuint=q(h,c);var a=s.easeInCirc=function(v){return 1-r(1-v*v)};var l=s.easeOutCirc=j(a);s.easeInOutCirc=q(a,l);Object.freeze(s);return s})();(function(a){a.next=(function(){var b=function(d,c){return d<0?0:d>c?c:d};return function(c){if(this.ended_){this.endCallback_();return null}var h=this.duration_;var g=this.time_=b(this.time_+c,h);var f=h?g/h:1;if(f===1){this.ended_=true}var e={};var i=this.easing_(f);var d=this.propertyFunctionDictionary_;for(var j in d){e[j]=d[j](i)}return e}})()})(CriTransition.prototype);var CriLaCustomPointerEventFtbl={};var CriLaCustomPointerEvent=(function(c){var b=0;var e=[];var a=[];var d=function(h){var f=e.indexOf(h);if(f>=0){this.context_=a[f]}else{var g=new CriLaCustomPointerEvent.Context(h);this.context_=g;e[b]=h;a[b]=g;++b;this.initialize()}};CriLaPolyfill.Object.setPrototypeOf(d.prototype,c);return d})(CriLaCustomPointerEventFtbl);CriLaCustomPointerEventFtbl.constructor=CriLaCustomPointerEvent;CriLaCustomPointerEvent.CSS={RESET_TOUCH:"liveact-player__element--reset-touch",ELEM_MS:"liveact-player__element--MS"};CriLaCustomPointerEvent.EventType={DOWN:"down",UP:"up",MOVE:"move",OUT:"out"};Object.freeze(CriLaCustomPointerEvent.EventType);CriLaCustomPointerEvent.isValidEventType=function(b){for(var a in CriLaCustomPointerEvent.EventType){if(b===CriLaCustomPointerEvent.EventType[a]){return true}}return false};CriLaCustomPointerEventFtbl.initialize=function(){this.context_.initialize()};CriLaCustomPointerEventFtbl.finalize=function(){this.context_.finalize()};CriLaCustomPointerEventFtbl.addEventListener=function(a,c,b){this.context_.addEventListener(a,c,b)};CriLaCustomPointerEventFtbl.removeEventListener=function(a,b){this.context_.removeEventListener(a,b)};CriLaCustomPointerEvent.Context=function(c){this.elem_=c;this.lowLevelEventListenerList_=[];var e={};for(var a in CriLaCustomPointerEvent.EventType){var b=CriLaCustomPointerEvent.EventType[a];e[b]=[]}this.highLevelEventListenerListDict_=e;var d=this.eventAvailability_={};d.mouse=(typeof(window.onmousedown))!=="undefined";d.touch=(typeof(window.ontouchstart))!=="undefined";d.pointer=(typeof(window.onpointerdown))!=="undefined";if(d.touch&&d.pointer){d.pointer=false}this.eventLock_="";this.eventUnlocking_=false;this.moveEnabled_=false;this.pointDict_={}};(function(a){a.initialize=function(){if(this.lowLevelEventListenerList_.length){return}var d=this.eventAvailability_;var c=this.elem_;var b=this;if(d.mouse){var e=-1;this.addLLEventListener_("mousedown",function(f){if(b.eventLock_){return}if(b.eventUnlocking_){b.eventUnlocking_=false;return}b.singlePointDown_(f,e);b.eventUnlocking_=false});this.addLLEventListener_("mousemove",function(f){if(b.eventLock_){return}if(b.eventUnlocking_){return}b.singlePointMove_(f,e);b.eventUnlocking_=false});this.addLLEventListener_("mouseup",function(f){if(b.eventLock_){return}if(b.eventUnlocking_){return}b.singlePointUpOrOut_(f,e,"up")});this.addLLEventListener_("mouseout",function(f){if(b.eventLock_){return}if(b.eventUnlocking_){return}b.singlePointUpOrOut_(f,e,"out")})}if(d.touch){this.addLLEventListener_("touchstart",function(f){b.lockEvent_();b.multiPointsDown_(f)});this.addLLEventListener_("touchmove",function(f){b.multiPointsMove_(f);b.unlockEvent_()});this.addLLEventListener_("touchend",function(f){b.multiPointsUpOrOut_(f,"up");b.unlockEvent_()});this.addLLEventListener_("touchcancel",function(f){b.multiPointsUpOrOut_(f,"out");b.unlockEvent_()})}if(d.pointer){this.addLLEventListener_("pointerdown",function(f){if(f.pointerType==="mouse"){return}b.lockEvent_();b.singlePointDown_(f,f.pointerId)});this.addLLEventListener_("pointermove",function(f){if(f.pointerType==="mouse"){return}b.singlePointMove_(f,f.pointerId);b.unlockEvent_()});this.addLLEventListener_("pointerup",function(f){if(f.pointerType==="mouse"){return}b.singlePointUpOrOut_(f,f.pointerId,"up");b.unlockEvent_()});this.addLLEventListener_("pointerout",function(f){if(f.pointerType==="mouse"){return}b.singlePointUpOrOut_(f,f.pointerId,"out");b.unlockEvent_()});this.addLLEventListener_("pointercancel",function(f){if(f.pointerType==="mouse"){return}b.singlePointUpOrOut_(f,f.pointerId,"out");b.unlockEvent_()})}};a.finalize=function(){var b=this.elem_;this.lowLevelEventListenerList_.forEach(function(c){var d=c.type;var e=c.listener;b.removeEventListener(d,e)});this.lowLevelEventListenerList_.length=0};a.addEventListener=function(d,f,e){if(!CriLaCustomPointerEvent.isValidEventType(d)){return}var c=new CriLaCustomPointerEvent.EventListener(d,f,e);var g=this.highLevelEventListenerListDict_[d];g.push(c);if(!this.moveEnabled_&&d===CriLaCustomPointerEvent.EventType.MOVE){this.elem_.classList.add(CriLaCustomPointerEvent.CSS.RESET_TOUCH);var b=CriUAChecker.getBrowser();if(b===CriUABrowser.IE||b===CriUABrowser.Edge){this.elem_.classList.add(CriLaCustomPointerEvent.CSS.ELEM_MS)}this.moveEnabled_=true}};a.removeEventListener=function(d,e){if(!CriLaCustomPointerEvent.isValidEventType(d)){return}var f=this.highLevelEventListenerListDict_[d];var b=CriLaPolyfill.Array.findIndex(f,function(g){return g.listener===e});if(b>=0){f.splice(b,1)}if(this.moveEnabled_&&d===CriLaCustomPointerEvent.EventType.MOVE&&f.length===0){this.elem_.classList.remove(CriLaCustomPointerEvent.CSS.RESET_TOUCH);var c=CriUAChecker.getBrowser();if(c===CriUABrowser.IE||c===CriUABrowser.Edge){this.elem_.classList.remove(CriLaCustomPointerEvent.CSS.ELEM_MS)}this.moveEnabled_=false}};a.addLLEventListener_=function(c,e,d){this.elem_.addEventListener(c,e,d);var b=new CriLaCustomPointerEvent.EventListener(c,e,d);this.lowLevelEventListenerList_.push(b)};a.lockEvent_=function(){this.eventLock_=true;this.eventUnlocking_=false};a.unlockEvent_=function(){var b=Object.keys(this.pointDict_);if(b.length===0){this.eventLock_=false;this.eventUnlocking_=true}};a.dispatch_=function(b,d){if(!CriLaCustomPointerEvent.isValidEventType(b)){return}var e=this.highLevelEventListenerListDict_[b];var c=this.elem_;e.forEach(function(f){f.listener.call(c,d)})};a.createPoint_=function(c,b,e){var d=CriLaRectangle.createFromElement(this.elem_);return new CriLaCustomPointerEvent.Point(c-d.left,b-d.top,"id"+e)};a.createPointDictFromTouches_=function(c){var d={};for(var b=0;b!=c.length;++b){var e=c[b];d[e.identifier]=this.createPoint_(e.pageX,e.pageY,e.identifier)}return d};a.isOutOfBound_=function(c){var b=c.x;var f=c.y;var e=this.elem_;var d=CriLaHtmlCss.getElementWidthHeight(e);return b<0||d.getWidth()<=b||f<0||d.getHeight()<=f};CriLaCustomPointerEvent.Context.isPointerOrMouseDown_=function(b){if(b.buttons===1){return true}if(b.which===1&&b.buttons==undefined){return true}return false};a.singlePointDown_=function(e,f){f=f+"";if(e.button!==0){return}var d=this.pointDict_;var b=this.createPoint_(e.pageX,e.pageY,f);var c={};c[f]=b;d[f]=b;this.deletTimeoutPointDict_();this.dispatch_("down",new CriLaCustomPointerEvent.Event("down",c,d,e))};a.singlePointMove_=function(f,g){g=g+"";var d=CriLaCustomPointerEvent.Context.isPointerOrMouseDown_(f);var e=this.pointDict_;if(!d){delete e[g];return}if(!(g in e)){return}var b=this.createPoint_(f.pageX,f.pageY,g);var c={};c[g]=b;if(this.isOutOfBound_(b)){delete e[g];this.dispatch_("out",new CriLaCustomPointerEvent.Event("out",c,e,f))}else{this.updatePointTime(b);e[g]=b;this.dispatch_("move",new CriLaCustomPointerEvent.Event("move",c,e,f))}};a.singlePointUpOrOut_=function(f,g,e){g=g+"";var d=this.pointDict_;if(!(g in d)){return}if(e==="up"&&f.button!==0){return}var b=this.createPoint_(f.pageX,f.pageY,g);var c={};c[g]=b;delete d[g];this.deletTimeoutPointDict_();this.dispatch_(e,new CriLaCustomPointerEvent.Event(e,c,d,f))};a.multiPointsDown_=function(d){var c=this.pointDict_;var b=this.createPointDictFromTouches_(d.changedTouches);for(var e in b){c[e]=b[e]}this.dispatch_("down",new CriLaCustomPointerEvent.Event("down",b,c,d));this.deletTimeoutPointDict_()};a.multiPointsMove_=function(f){var e=this.pointDict_;var c=this.createPointDictFromTouches_(f.changedTouches);for(var h in c){if(!(h in e)){delete c[h]}}var g={};var d={};for(var h in c){var b=c[h];if(this.isOutOfBound_(b)){d[h]=b;delete e[h]}else{this.updatePointTime(b);g[h]=b}}if(Object.keys(d).length){this.dispatch_("out",new CriLaCustomPointerEvent.Event("out",d,e,f))}if(Object.keys(g).length){for(var h in g){e[h]=g[h]}this.dispatch_("move",new CriLaCustomPointerEvent.Event("move",g,e,f))}};a.multiPointsUpOrOut_=function(e,d){var c=this.pointDict_;var b=this.createPointDictFromTouches_(e.changedTouches);for(var f in b){if(f in c){delete c[f]}else{delete b[f]}}this.deletTimeoutPointDict_();this.dispatch_(d,new CriLaCustomPointerEvent.Event(d,b,c,e))};a.deletTimeoutPointDict_=function(){if(CriUAChecker.getBrowser()!=CriUABrowser.Edge){return}var b=this.pointDict_;for(var d in b){var c=this.getPointTimeDelta(b[d]);if(c>3000){delete b[d]}}};a.getPointTimeDelta=function(b){return criLaTimer_GetTimeMs()-b.time};a.updatePointTime=function(b){b.time=criLaTimer_GetTimeMs()}})(CriLaCustomPointerEvent.Context.prototype);CriLaCustomPointerEvent.EventListener=function(a,c,b){this.type=a;this.listener=c;this.options=b||null};CriLaCustomPointerEvent.Event=function(f,b,e,g,a){var d={};d.changedPoints=new CriLaCustomPointerEvent.Points(b);d.points=new CriLaCustomPointerEvent.Points(e);d.ctrlKey=g.ctrlKey;d.altKey=g.altKey;d.shiftKey=g.shiftKey;d.metaKey=g.metaKey;if(a){for(var c in a){d[c]=a[c]}}this.detail=d;this.event_=g;Object.freeze(this)};(function(a){a.preventDefault=function(){this.event_.preventDefault()};a.stopPropagation=function(){this.event_.stopPropagation()}})(CriLaCustomPointerEvent.Event.prototype);CriLaCustomPointerEvent.Point=function(a,c,b){CriGrxVector2.call(this);this.x=a;this.y=c;this.id=b;this.time=criLaTimer_GetTimeMs()};Object.freeze(CriLaCustomPointerEvent.Point);CriLaPolyfill.Object.setPrototypeOf(CriLaCustomPointerEvent.Point.prototype,CriGrxVector2.prototype);CriLaCustomPointerEvent.Points=function(c){Array.call(this);if(c){for(var b in c){var a=c[b];this.push(a);var d=a.id;Object.defineProperty(this,d,{enumerable:false,configurable:false,writable:false,value:a})}}Object.freeze(this)};CriLaPolyfill.Object.setPrototypeOf(CriLaCustomPointerEvent.Points.prototype,Array.prototype);function CriLaClickEmulator(a){this.cpe_=new CriLaCustomPointerEvent(a);this.thresholdPathLength_=25;this.thresholdDuration_=500;this.initialize_(a)}(function(a){a.initialize_=function(c){var b=this.cpe_;b.addEventListener("down",this.down_.bind(this));b.addEventListener("move",this.move_.bind(this));b.addEventListener("up",this.up_.bind(this));b.addEventListener("out",this.out_.bind(this))};a.setThresholdPathLength=function(b){this.thresholdPathLength_=b};a.setThresholdDuration=function(b){this.thresholdDuration_=b};a.calcThresholdPathLength_=function(){var c=CriLaHtmlCss.getHtmlZoom();var b=this.thresholdPathLength_*c;return b};a.calcThresholdDuration_=function(){return this.thresholdDuration_};a.down_=function(d){var c=d.detail;if(c.changedPoints.length!==1){this.abortClick_();return}var b=c.changedPoints[0];this.startClick_(b)};a.move_=function(d){var c=d.detail;if(c.points.length!==1){this.abortClick_();return}var b=c.points[0];this.clicking_(b)};a.up_=function(d){var c=d.detail;if(c.changedPoints.length!==1){this.abortClick_();return}var b=c.changedPoints[0];this.clicking_(b);this.endClick_(b)};a.out_=function(b){this.abortClick_()};a.startClick_=function(b){this.elapsed_();this.clearPath_(b)};a.clicking_=function(b){this.updatePath_(b)};a.endClick_=function(b){var c=this.elapsed_();var d=this.getPathLength_();var f=this.calcThresholdDuration_();var e=this.calcThresholdPathLength_();if(c<=f&&d<=e){this.onclick(b)}};a.abortClick_=function(){this.clearPath_(null)};a.startTime_=0;a.elapsed_=function(){var c=Date.now();var b=c-this.startTime_;this.startTime_=c;return b};a.lastPoint_=null;a.pathLength_=0;a.clearPath_=function(b){this.lastPoint_=b;this.pathLength_=0};a.updatePath_=function(b){var c=this.lastPoint_;var e=b.x-c.x;var d=b.y-c.y;this.pathLength_+=Math.sqrt(e*e+d*d);this.lastPoint_=b};a.getPathLength_=function(){return this.pathLength_};a.onclick=function(b){}})(CriLaClickEmulator.prototype);function CriLaRectangle(){this.left=0;this.top=0;this.right=0;this.bottom=0}var CriLaRect=CriLaRectangle;(function(a){a.getWidth=function(){return this.right-this.left};a.getHeight=function(){return this.bottom-this.top};Object.defineProperties(a,{x:{get:function(){return this.left}},y:{get:function(){return this.top}},w:{get:function(){return this.getWidth()}},h:{get:function(){return this.getHeight()}}})})(CriLaRectangle.prototype);CriLaRectangle.createFromLTRB=function(e,d,b,a){var c=new CriLaRectangle();c.left=e;c.top=d;c.right=b;c.bottom=a;return c};CriLaRectangle.createFromXYWH=function(b,e,c,a){var d=new CriLaRectangle();d.left=b;d.top=e;d.right=b+c;d.bottom=e+a;return d};CriLaRectangle.createFromElement=function(b){var c=CriLaHtmlCss.getElementPosition(b);var a=CriLaHtmlCss.getElementWidthHeight(b);return CriLaRectangle.createFromXYWH(c.x,c.y,a.getWidth(),a.getHeight())};CriLaRectangle.createFromViewPort=function(){return CriLaRectangle.createFromXYWH(window.pageXOffset,window.pageYOffset,window.innerWidth,window.innerHeight)};CriLaRectangle.collision=function(h,f){var j=h.left;var d=h.right;var g=h.top;var c=h.bottom;var i=f.left;var b=f.right;var e=f.top;var a=f.bottom;return((j<=i&&i<d)||(i<=j&&j<b))&&((g<=e&&e<c)||(e<=g&&g<a))};CriLaRectangle.isInViewPortWithMargin=function(i,d,b,c){if(i.top<=d.top&&d.bottom<=i.bottom){return true}var f=CriLiveActSharedSettings.ScrollInViewMargin;var o=b==null?f.head:b;var m=c==null?f.tail:c;var k=o/100;var h=m/100;var j=i.top;var e=i.getHeight();var l=d.top;var g=d.getHeight();var q=j+e*k;var n=j+e*(1-h);var a=l;var p=l+g;return a<n&&q<p};function criLaTimer_GetTimeMs(){if(window.performance&&window.performance.now){return window.performance.now()}else{if(window.performance&&window.performance.webkitNow){return window.performance.webkitNow()}}return Date.now()};var CriLaEvent={CAN_PLAY:"canplay",CAN_DRAW:"candraw",FIRST_PLAY_START:"firstplay",PLAY_START:"play",PLAY_END:"ended",SEEKING:"seeking",SEEKED:"seeked",FIRST_PLAY_END:"firstended",FRAME_UPDATED:"frameupdate",PAUSE:"pause",STOP:"stop",DRAW:"draw",ERROR:"error",SEGMENT_FLIPPED:"segmentflipped",CLICK:"click",WATERMARK_CLICK:"watermarkclick",SCROLL_IN:"scrollin",SCROLL_OUT:"scrollout",CONTENT_IN:"contentin",CONTENT_OUT:"contentout",LJT_LOADED:"loaded",VOLUME_CHANGE:"volumechange",CREATE_LOG:"createlog",UPDATE_LOG:"updatelog",ANALYTICS_UPDATED:"analyticsupdate",FULLSCREEN_CHANGE:"fullscreenchange",SEEKBAR_RESET_NEEDED:"seekbarresetneeded",LOOP_CHANGE:"loopchange",GYRO_CHANGE:"gyrochange",SWIPE_MODE_CHANGE:"swipemodechange",TAP_PLAY_ENABLED_CHANGE:"tapplayenabledchange",LOADED_FRAME_CHANGE:"loadedframechange",FULLSCREEN_REQUESTED:"fullscreenrequested",LINK_REQUESTED:"linkrequested",CHAPTER_SEPARATOR_CHANGE:"chapterseparatorchange",PLAYBACK_RANGE_CHANGE:"playbackrangechange",PLAYBACK_RATE_CHANGE:"playbackratechange",MAIN_LOOP:"mainloop",PREPARE_DRAW:"preparedraw",DRAW_POSTPROCESS:"drawpostprocess",REQUEST_LOAD_RESOURCE:"request_load_resource",AUTHORIZED:"authorized",AUTHORIZATION_ERROR:"authorization_error",LOADED_PRIVATE_CONTENT:"loaded_private_content"};Object.freeze(CriLaEvent);function CriLaEventArgs(c,b,a){this.type=c;this.player=b;this.detail=a||{};Object.freeze(this)}function CriLaEventDispatcher(a){this.player_=a;this.eventMap_={}}(function(a){a.addEventListener=function(c,d){var b=this.getListenerList(c);if(b==undefined){b=[]}b.push(d)};a.removeEventListener=function(d,f){var b=this.getListenerList(d);var e=b.length;for(var c=0;c<e;c++){if(b[c]==f){b.splice(c,1);break}}};a.dispatch=function(f,c){var e=c||this.createEvent(f);var b=this.getListenerList(f);var d=b.concat();d.forEach(function(g){g(e)})};a.getListenerList=function(c){var d=this.eventMap_;var b=d[c];if(b==undefined){b=[];d[c]=b}return b};a.createEvent=function(c,b){return new CriLaEventArgs(c,this.player_,b)}})(CriLaEventDispatcher.prototype);CriLaEventDispatcher.global=(function(){var j=document.createElement("eventdispatcher");var g,d;var b=function(){g=window.innerWidth;d=window.innerHeight};var h=function(){var k=window.innerWidth;var l=window.innerHeight;return g!==k||d!==l};b();window.addEventListener("resize",function(){b();j.dispatchEvent(new CriLaPolyfill.Event.CustomEvent("resize"))});var f=0;window.addEventListener("orientationchange",function c(){if(h()){f=0;b();j.dispatchEvent(new CriLaPolyfill.Event.CustomEvent("resize"));requestAnimationFrame(c)}else{++f;if(f<10){requestAnimationFrame(c)}else{f=0}}});function i(){window.removeEventListener("load",i,false);document.removeEventListener("DOMContentLoaded",i,false);j.dispatchEvent(new CriLaPolyfill.Event.CustomEvent("ready"))}window.addEventListener("load",i,false);document.addEventListener("DOMContentLoaded",i,false);CriLaEventDispatcher.ready=function(k){if(document.readyState==="complete"){setTimeout(k)}else{j.addEventListener("ready",k)}};function e(){j.dispatchEvent(new CriLaPolyfill.Event.CustomEvent("fullscreenchange"))}["webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange","fullscreenchange"].forEach(function(k){document.addEventListener(k,e,false)});function a(){j.dispatchEvent(new CriLaPolyfill.Event.CustomEvent("fullscreenerror"))}["webkitfullscreenerror","mozfullscreenerror","MSFullscreenError","fullscreenerror"].forEach(function(k){document.addEventListener(k,a,false)});return j})();function CriLaSubEventDispatcher(){this.target_=document.createElement("event_target")}(function(a){a.addEventListener=function(b,d,c){this.target_.addEventListener(b,d,c)};a.removeEventListener=function(b,d,c){this.target_.removeEventListener(b,d,c)};a.dispatchEvent=function(d,b){var c=b||{};var e=new CriLaPolyfill.Event.CustomEvent(d,{bubbles:false,cancellable:false,detail:c});this.target_.dispatchEvent(e)};a.delegate=function(c){var b=this;["addEventListener","removeEventListener","dispatchEvent"].forEach(function(d){c[d]=function(){b[d].apply(b,arguments)}})}})(CriLaSubEventDispatcher.prototype);function CriLaMarker(){this.startFrame_=0;this.length_=0;this.text_=""}(function(a){a.getStartFrame=function(){return this.startFrame_};a.getLength=function(){return this.length_};a.getText=function(){return this.text_}})(CriLaMarker.prototype);var CriLaResourceType={RECTANGLE:0,IMAGE:1,VIDEO:2,TEXT:3,SEQUENCE_VIDEO:4,AUDIO:5,MODEL:6};Object.freeze(CriLaResourceType);var CriLaResourceState={PREPARE:0,LOAD_REQUESTED:1,COMPLETE:2};Object.freeze(CriLaResourceState);function CriLaResource(b,a){this.id=b;this.name=a;this.type=CriLaResourceType.IMAGE;this.state_=CriLaResourceState.PREPARE;this.url="";this.progress_=0;this.progressMax_=0;this.dlTime_=3600000;this.isSequentialImage=false;this.onError=null}(function(a){a.setup=function(b){};a.getType=function(){return this.type};a.getId=function(){return this.id};a.getName=function(){return this.name};a.setColor=function(b){return this};a.getNumImages=function(){return 0};a.getImage=function(b){return null};a.setImage=function(b,c){return this};a.setImageRect=function(b,c){return this};a.getVideo=function(){return null};a.setVideoFromUrl=function(b){return this};a.getText=function(){return""};a.setText=function(b){return this};a.getFont=function(){return""};a.setFont=function(b){return this};a.getFontSize=function(){return""};a.setFontSize=function(b){return this};a.getFontWeight=function(){return""};a.setFontWeight=function(b){return this};a.getFontFamily=function(b){return""};a.setFontFamily=function(b){return this};a.setAlign=function(b,c){return this};a.getAlign=function(){return["",""]};a.setWrapMode=function(b){return this};a.getWrapMode=function(){return""};a.getState=function(){return this.state_};a.setState=function(b){this.state_=b};a.unload=function(){this.unloadCommon()};a.unloadCommon=function(){this.setState(CriLaResourceState.PREPARE)};a.reload=function(){};a.isSharedResource=function(){return this.isSharedResourceUrl_(this.url)};a.isSharedResourceUrl_=function(c){var b=c.split("/");if(b.length!=2){return false}return b[0]==="shared_asset"};a.canPlay=function(b){return true};a.canDraw=function(){return true};a.requestLoad=function(d,e){var c=this.getBaseUrl(d,e);var b=this.getFullUrl(d,e);this.requestLoadImpl_(b,c)};a.getBaseUrl=function(c,d){var b=c||"./";var e=d||"./";return this.isSharedResource()?e:b};a.isFullPath=function(b){if(!b){return false}if(b.match("^https?://")){return true}return b.slice(0,1)=="/"};a.getFullUrl=function(b,c){if(this.isFullPath(this.url)){return this.url}return this.getBaseUrl(b,c)+this.url};a.requestLoadImpl_=function(b){};a.isComplete=function(){return true};a.drawnBy=function(b,c){};a.isVideo=function(){return false};a.setOnErrorFunction=function(b){this.onError=b};a.getOnErrorFunction=function(b){this.onError=b};a.setPassword=function(b){this.url=CriLaURL.addPwToUrl(this.url,b)}})(CriLaResource.prototype);function CriLaResourceRectangle(b,a){CriLaResource.call(this,b,a);this.type=CriLaResourceType.RECTANGLE;this.color="black";this.width=0;this.height=0}(function(a,b){CriLaPolyfill.Object.setPrototypeOf(a,b);a.setColor=function(c){this.color=c};a.drawnBy=function(c,d){c.drawResourceRectangle(this,d)}})(CriLaResourceRectangle.prototype,CriLaResource.prototype);function CriLaResourceText(b,a){CriLaResource.call(this,b,a);this.type=CriLaResourceType.TEXT;this.textLines=[];this.font="12px 'sans-serif'";this.fontFamily="sans-serif";this.fontSize="12px";this.fontWeight="400";this.width=0;this.height=0;this.line_height=1;this.strokeWidth=1;this.horizontalAlign="start";this.verticalAlign="baseline";this.strokeEnabled=false;this.strokeColor="black";this.fillEnabled=true;this.fillColor="black";this.isStrokeOverFill=true;this.isItalic=false;this.wrapMode="nowrap";this.wrappedTextLines=[];this.isBoxText=false;this.isSetMargin=false}(function(a,b){CriLaPolyfill.Object.setPrototypeOf(a,b);a.setColor=function(c){this.fillColor=c};a.getText=function(){return this.textLines.join("\n")};a.getTextLines=function(){var c=this.textLines;if(this.wrapMode!="nowrap"){c=this.wrappedTextLines}return c};a.setText=function(c){this.textLines=c.split("\n");return this};a.getWidth=function(){return this.width};a.setWidth=function(c){this.width=c};a.getHeight=function(){return this.height};a.setHeight=function(c){this.height=c};a.updateFont=function(){var d=this.fontFamily;var c="";if(d.match(/,/)!=null){c=this.fontWeight+" "+this.fontSize+" "+this.fontFamily}else{c=this.fontWeight+" "+this.fontSize+" '"+this.fontFamily+"'"}if(this.isItalic==true){c="italic "+c}this.font=c};a.getFont=function(){return this.font};a.setFont=function(c){this.font=c;return this};a.getFontSize=function(){return this.fontSize};a.setFontSize=function(c){this.fontSize=c;this.updateFont();return this};a.setLineHeight=function(c){this.line_height=c};a.getLineHeight=function(){return this.line_height};a.getFontWeight=function(){return this.fontWeight};a.setFontWeight=function(d){var c=d;if(d=="normal"){c="400"}else{if(d=="bold"){c="700"}else{if(d=="lighter"){c="100"}}}this.fontWeight=c;this.updateFont();return this};a.getFontFamily=function(c){return this.fontFamily};a.setFontFamily=function(c){this.fontFamily=c;this.updateFont()};a.drawnBy=function(c,d){c.drawResourceText(this,d)};a.setAlign=function(c,d){this.horizontalAlign=c;this.verticalAlign=d;return this};a.getAlign=function(){return[this.horizontalAlign,this.verticalAlign]};a.setWrapMode=function(c){this.wrapMode=c;return this};a.getWrapMode=function(){return this.wrapMode};a.wrappingText=function(s){if(this.wrapMode=="nowrap"){return}var p=this.text.length;var h=parseFloat(this.fontSize);var e=this.width+h*(p*0.3);var o=this.textLines.length;s.font=this.font;var g=[];for(var j=0;j<o;j++){var q=this.textLines[j];var k=1;var d=0;var n=q;for(var r=1;r<=q.length;r++){var m=q.slice(d,r);var c=s.measureText(m);if(e<c.width){var l=r-1;var f=q.slice(d,l);g.push(f);d=l;n=q.slice(d)}}if(n!=""){g.push(n)}}this.wrappedTextLines=g}})(CriLaResourceText.prototype,CriLaResource.prototype);function CriLaResourceImageBase(b,a){CriLaResource.call(this,b,a);this.type=CriLaResourceType.IMAGE;this.width=0;this.height=0;this.isLevelOfDetailFile_=false}(function(a,b){CriLaPolyfill.Object.setPrototypeOf(a,b);a.initialize=function(){};a.finalize=function(){};a.getNumImages=function(){return 1};a.getLaImage_=function(c){return null};a.isLevelOfDetailImage=function(){return false};a.getImage=function(c){return this.getLaImage_(c).image};a.setImage=function(c,d){this.getLaImage_(d).setImage(c);return this};a.setImageRect=function(c){};a.requestLoadImpl_=function(c,d){if(this.state_!=CriLaResourceState.PREPARE){return}this.state_=CriLaResourceState.LOAD_REQUESTED;this.requestLoadProc_(c,d)};a.requestLoadProc_=function(c,d){};a.getLoadProgress=function(){var c=this.progress_;var d=this.progressMax_;if(d==0){return 0}return(c/d)*100};a.canPlay=function(c){return this.isComplete()};a.canDraw=function(){return this.isComplete()};a.drawnBy=function(c,d){c.drawResourceImage(this,d)}})(CriLaResourceImageBase.prototype,CriLaResource.prototype);function CriLaResourceSingleImage(b,a){CriLaResourceImageBase.call(this,b,a);this.image=new CriLaC005()}(function(b,a){CriLaPolyfill.Object.setPrototypeOf(b,a);b.initialize=function(c){this.url=c;this.image.url=c};b.finalize=function(){this.unloadCommon();this.image.unload()};b.getLaImage_=function(c){return this.image};b.requestLoadProc_=function(c,d){this.image.requestLoad(c)};b.isComplete=function(){return this.getLaImage_().isComplete()};b.unload=function(){this.unloadCommon();return this.image.unload()};b.setImageRect=function(c){this.image.setSrcRect(c);return this}})(CriLaResourceSingleImage.prototype,CriLaResourceImageBase.prototype);function CriLaResourceImage(b,a){CriLaResourceSingleImage.call(this,b,a)}CriLaPolyfill.Object.setPrototypeOf(CriLaResourceImage.prototype,CriLaResourceSingleImage.prototype);function CriLaResourceSeqImageBase(b,a){CriLaResourceImageBase.call(this,b,a);this.CriLaP1e0=[];this.numImages=0;this.isSequentialImage=true}(function(b,a){CriLaPolyfill.Object.setPrototypeOf(b,a);b.finalize=function(){var c=this.CriLaP1e0;c.forEach(function(e,d){e.finalize();delete c[d]});delete this.CriLaP1e0};b.getNumImages=function(){return this.CriLaP1e0.length};b.getLaImage_=function(c){return this.CriLaP1e0[c||0]};b.isLevelOfDetailImage=function(){return this.isLevelOfDetailFile_};b.unloadAllImages=function(){this.CriLaP1e0.forEach(function(c){if(c){c.unload()}});this.CriLaP1e0=[];this.unloadCommon()};b.unload=function(e,f){if(this.reloadLock_){return}if(this.isComplete()&&!this.completeOnce_){this.completeOnce_=true}if(!this.completeOnce_){return}if(e==null){e=100;f=-1;this.unloadAllImages();return}var d=this.CriLaP1e0.length;var c=function(g){return g<=e*d/100||f.indexOf(g)!=-1};this.CriLaP1e0.forEach(function(h,g){if(h&&!c(g)){h.unload()}})};b.reload=function(){if(this.reloadLock_){return}if(this.isComplete()&&!this.completeOnce_){this.completeOnce_=true}if(!this.completeOnce_){return}this.reloadLock_=true;var f=this;var d=this.CriLaP1e0.length;var e=this.CriLaP1e0;var c=-1;var g=function(){var h=null;do{h=e[++c]}while(c<d&&h.isComplete());if(c>=d){f.reloadLock_=false;return}e[c].requestLoad();requestAnimationFrame(g)};g()};b.isComplete=function(){if(!Boolean(this.isComplete_)){var c=this.CriLaP1e0.length>0&&this.CriLaP1e0.every(function(d){return d.isComplete()});this.isComplete_=c}return this.isComplete_};b.canDraw=function(){var c=this.getLaImage_(0);return c&&c.isComplete()};b.setImageRect=function(c){this.CriLaP1e0.forEach(function(d){d.setSrcRect(c)});return this}})(CriLaResourceSeqImageBase.prototype,CriLaResourceImageBase.prototype);function CriLaResourceSeqImageRaw(b,a){CriLaResourceSeqImageBase.call(this,b,a)}(function(b,c,a){CriLaPolyfill.Object.setPrototypeOf(b,c);b.isSharedResource=function(){return this.CriLaP1e0.length>0&&this.isSharedResourceUrl_(this.CriLaP1e0[0].url)};b.requestLoadProc_=function(d,e){this.CriLaP1e0.forEach(function(f){f.requestLoad(e+f.url)})};b.setUrls=function(d){this.CriLaP1e0=d.map(function(e){var f=new CriLaC005();f.url=e;return f});this.numImages=0}})(CriLaResourceSeqImageRaw.prototype,CriLaResourceSeqImageBase.prototype,CriLaResourceImageBase.prototype);function CriLaC00a(b,a){CriLaResourceSeqImageBase.call(this,b,a)}(function(a,c,b){CriLaPolyfill.Object.setPrototypeOf(a,c);a.requestLoadProc_=function(d,e){var f=new CriLaC00e(this.CriLaP1e0,this);f.requestLoadStream(d)};a.isComplete=function(){return this.state_===CriLaResourceState.COMPLETE&&c.isComplete.call(this)};a.canPlay=function(j){if(this.isComplete()){return true}var g=false;var h=Math.max(this.progress_,1);var f=this.dlTime_/h;var d=66.666;var k=this.progressMax_-this.progress_;var i=k*f*1.1;var e=this.progress_*d;if(0<i&&i<e){g=true}else{if(f<d){j/=2;if(this.CriLaP1e0.length>=j){g=true}}}return g}})(CriLaC00a.prototype,CriLaResourceSeqImageBase.prototype,CriLaResourceImageBase.prototype);function CriLaResourceMediaBase(b,a){CriLaResource.call(this,b,a);this.width=0;this.height=0;this.duration=0;this.elem_=null;this.type=null}(function(a,b){CriLaPolyfill.Object.setPrototypeOf(a,b);a.getElement=function(){return this.elem_};a.initializeMedia=function(){this.elem_=this.createElement_()};a.attachElement=function(c){this.unloadMedia();this.elem_=c};a.loadMedia=function(c){var d=this.getElement();if(d.src!=c){d.src=c;d.load()}};a.unloadMedia=function(){var c=this.getElement();if(c==null){return}c.removeAttribute("src");c.load()};a.isEmpty=function(){var c=this.getElement();return c.src==""};a.createElement_=function(){var d="";if(this.getType()==CriLaResourceType.VIDEO||this.getType()==CriLaResourceType.SEQUENCE_VIDEO){d="video"}else{d="audio"}var c=document.createElement(d);c.muted=true;c.volume=0;CriLaHtmlCss.setVisibility(c,false);return c}})(CriLaResourceMediaBase.prototype,CriLaResource.prototype);function CriLaResourceAudio(b,a){CriLaResourceMediaBase.call(this,b,a);this.type=CriLaResourceType.AUDIO}(function(b,a){CriLaPolyfill.Object.setPrototypeOf(b,a)})(CriLaResourceAudio.prototype,CriLaResourceMediaBase.prototype);function CriLaResourceVideoBase(b,a){CriLaResourceMediaBase.call(this,b,a);this.CriLaP11e=null}(function(a,b){CriLaPolyfill.Object.setPrototypeOf(a,b);a.drawnBy=function(c,d){c.drawResourceVideo(this,d)};a.isVideo=function(){return true};a.getVideo=function(){var c=this.getElement();return c};a.getAudioWrapper=function(){return this.CriLaP11e}})(CriLaResourceVideoBase.prototype,CriLaResourceMediaBase.prototype);function CriLaResourceVideo(b,a){CriLaResourceVideoBase.call(this,b,a);this.type=CriLaResourceType.VIDEO;this.preDecodeEnabled_=false;this.preDecodeFps_=15;this.isAudioSeparated_=false;this.decodeImages=[]}CriLaPolyfill.Object.setPrototypeOf(CriLaResourceVideo.prototype,CriLaResourceVideoBase.prototype);(function(a){a.isComplete=function(){var b=this.isPreDecodeEnabled();if(b==true){if(this.decodeImages.length==0){return false}var c=this.decodeImages[0].image;if(c==null||c.isComplete==false){return false}}return true};a.setVideoFromUrl=function(b){this.unloadMedia();this.loadMedia(b)};a.loadMedia=function(b){if(b.indexOf("./")===0){b=b.slice(2)}var e=this;function d(f){if(e.isAudioSeparated_==false){return}var g=new Audio();g.src=f;g.muted=true;g.volume=0;var h=new CriLaC00O(g,30);h.load();e.CriLaP11e=h}if(this.preDecodeEnabled_==false){CriLaResourceMediaBase.prototype.loadMedia.call(this,b);d(b)}else{if(this.url==b&&this.isComplete()==true){return}function c(f){CriLaResourceMediaBase.prototype.loadMedia.call(e,f);e.decodeFrames(e.preDecodeFps_);d(f)}if(b.indexOf("blob:")!==0){var e=this;CriLaXHR.requestLoad(b,"blob",function(f){c(f)})}else{c(b)}}};a.unloadMedia=function(){CriLaResourceMediaBase.prototype.unloadMedia.call(this);this.decodeImages.forEach(function(b){if(b.image){b.image.unload()}});this.decodeImages=[]};a.enablePreDecode=function(c,e,f){var b=CriUAChecker.getBrowser();var d=CriUAChecker.getOS();if(b===CriUABrowser.IE||d===CriUAOS.iOS){return this}this.preDecodeEnabled_=c;this.preDecodeFps_=e;this.preDecodeQuality_=f;return this};a.isPreDecodeEnabled=function(){return this.preDecodeEnabled_};a.enableAudioSeparate=function(b){this.isAudioSeparated_=b};a.isAudioSeparated_=function(){return this.isAudioSeparated_};a.getFrame=function(c){var b=this.findFrame_(c);if(b!=null){return b.image}return null};a.decodeFrames=function(d){var b=1000/d/1000;var e=new LaVideoDecoder();e.initialize(this.width,this.height);e.setQuality(this.preDecodeQuality_);var c=this.getElement();this.decodeImages=e.decodeAllFrames(c,b)};a.findFrame_=function(d){var b=0;var f=this.decodeImages;var g=f.length-1;var c=(b+g)>>1;var e=null;while(b<g){var j=this.findNearlyFrame_(c,1);if(j==null){break}if(d<j.time){var i=this.findNearlyFrame_(c-1,-1);if(i==null){return j}if(i.time<=d){e=this.getNearlyFrame_(d,i,j);break}g=c-1}else{var h=this.findNearlyFrame_(c+1,+1);if(h==null){return j}if(d<=h.time){e=this.getNearlyFrame_(d,j,h);break}b=c+1}if(b==g){return j}c=(b+g)>>1}return e};a.findNearlyFrame_=function(b,c){var e=b;while(0<=e&&e<this.decodeImages.length){var d=this.decodeImages[e];if(d.image!=null&&d.image.isComplete()==true){return d}e=e+c}return null};a.getNearlyFrame_=function(c,d,b){var e=(d.time+b.time)/2;if(c<e){return d}return b}})(CriLaResourceVideo.prototype);function CriLaResourceSequenceVideo(b,a){CriLaResourceVideoBase.call(this,b,a);this.type=CriLaResourceType.SEQUENCE_VIDEO;this.sequenceType=null;this.playlistUrl="";this.playlistPath="";this.urls=[];this.playlist=null;this.isPlaylistLoaded=false;this.playlistDidLoad=null;this.segmentVideoReload=null}(function(a){CriLaPolyfill.Object.setPrototypeOf(CriLaResourceSequenceVideo.prototype,CriLaResourceVideoBase.prototype);a.requestLoad=function(b,e){if(this.isPlaylistLoaded&&this.segmentVideoReload){this.segmentVideoReload(this);return}this.isPlaylistLoaded=false;if(b==undefined){b=""}if(e==undefined){e=""}var c=b;if(this.isSharedResource(this.playlistPath)==true){c=e}this.playlistUrl=c+this.playlistPath;var d=new XMLHttpRequest();d.open("GET",this.playlistUrl,true);d.responseType="text";d.onload=this.onLoadPlaylistData.bind(this);d.send(null)};a.onLoadPlaylistData=function(b){this.playlist=this.constructPlaylist();this.url=this.playlist.parsePlaylistData(this.playlistUrl,b.target.responseText);this.isPlaylistLoaded=true;if(this.playlistDidLoad){this.playlistDidLoad(this)}};a.getProgressiveVideoUrlByIndex=function(b){if(!this.playlist){return null}return this.playlist.getProgressiveVideoUrlByIndex(b)};a.setPassword=function(b){this.playlistPath=CriLaURL.addPwToUrl(this.playlistPath,b)}})(CriLaResourceSequenceVideo.prototype);function CriLaResourceSequenceVideoHls(b,a){CriLaResourceSequenceVideo.call(this,b,a);this.sequenceType=CriLaSequenceType.HLS}(function(b,a){CriLaPolyfill.Object.setPrototypeOf(b,a);b.constructPlaylist=function(){return new CriLaC00y()}})(CriLaResourceSequenceVideoHls.prototype,CriLaResourceSequenceVideo.prototype);function CriLaResourceSequenceVideoMse(b,a){CriLaResourceSequenceVideo.call(this,b,a);this.sequenceType=CriLaSequenceType.MSE}(function(b,a){CriLaPolyfill.Object.setPrototypeOf(b,a);b.constructPlaylist=function(){return new CriLaC00A()}})(CriLaResourceSequenceVideoMse.prototype,CriLaResourceSequenceVideo.prototype);function CriLaResourceModel(b,a){CriLaResource.call(this,b,a);this.type=CriLaResourceType.MODEL;this.gl_=null;this.meshList_=[];this.materialList_=[];this.textureList_=[];this.isComplete_=false}CriLaPolyfill.Object.setPrototypeOf(CriLaResourceModel.prototype,CriLaResource.prototype);(function(a){a.requestLoadImpl_=function(b,d){var c=this;var e=new XMLHttpRequest();e.onreadystatechange=function(){if(this.readyState==4&&this.status==200){var f=JSON.parse(this.responseText);c.loadLmd_(f,d)}};e.open("GET",b,true);e.send()};a.loadLmd_=function(b,e){e=e||"./";var d=this.url.split("?");var c=d.length>1?"?"+d[1]:"";b.meshes.forEach(function(f){var g=new CriLaMesh(this.gl_);g.loadLmd_(f,b.materials);this.meshList_.push(g)},this);b.materials.forEach(function(f){var g=new CriLaMaterial(this.gl_);g.loadLmd_(f,b.textures);this.materialList_.push(g)},this);b.textures.forEach(function(h){var g=new CriLaTexture(this.gl_);var f=e+h.url+c;g.load(f);this.textureList_.push(g)},this);this.isComplete_=true;return true};a.getMaterialByIndex=function(b){return this.materialList_[b]};a.isComplete=function(){return this.isComplete_};a.setVideo=function(c){var b=this.getMaterialByIndex(0);b.setTextureFromVideo(c,this.textureList_)};a.unload=function(){this.textureList_.forEach(function(b){b.unload()})};a.reload=function(){this.textureList_.forEach(function(b){b.load()})};a.setup=function(b){this.gl_=b.graphicsContext};a.drawnBy=function(b,c){b.drawResourceModel(this,c)};a.canPlay=function(){return this.isComplete()};a.canDraw=function(){return this.isComplete()}})(CriLaResourceModel.prototype);function CriLaC00c(){this.CriLaP113=null;this.resourceList=null;this.fontScale_=1;this.frameBlendEnabled_=false;this.resourceURLSuffix_=null;this.defaultDimension_=CriGrxVector2.createFromXY(0,0);this.trackingCode_=null;this.xhr_=null;this.subEventDispatcher_=new CriLaSubEventDispatcher();this.subEventDispatcher_.delegate(this)}(function(i){i.setFontScale=function(r){this.fontScale_=r};i.enableFrameBlend=function(r){this.frameBlendEnabled_=r};i.getTrackingCode=function(){return this.trackingCode_};i.setLocationToRequestHeader=function(t){var s=CriLaUtility.getParentLocation();var r=s==""?location.href:s;t["x-embed-domain"]=CriLaUtility.getDomainFromUrl(r);return t};i.LoadDomFromURL=function(r,s,C,A,t){var u=s||false;var B=1000;if(C){B=C}var x=r;x=b(x,this.resourceURLSuffix_);var y=CriLiveActSharedSettings.getAdditionalRequestHeaders_()||{};y=this.setLocationToRequestHeader(y);var w=this.onErrorEvent_.bind(this);var v=this.onLoadEvent_.bind(this,A,t);var z=false;if(u){z=this.loadDomFromURLAsync_(r,v,w,y,B)}else{z=this.loadDomFromURLSync_(r,v,w,y)}return z};i.onErrorEvent_=function(){this.xhr_=null;this.dispatchEvent("error",{message:"LJTのロードに失敗しました"});return false};i.getViewLimitationInfo_=function(){var y=this.xhr_.getAllResponseHeaders();var x=640;var w=640;var v={};var u="x-contents-width";var t="x-contents-height";var s="x-contents-password-required";v.is=this.xhr_.status==403;v.width=y.indexOf(u)!=-1?this.xhr_.getResponseHeader(u):x;v.height=y.indexOf(t)!=-1?this.xhr_.getResponseHeader(t):w;var r=y.indexOf(s)!=-1?this.xhr_.getResponseHeader(s):false;v.width=v.width==0?x:parseInt(v.width);v.height=v.height==0?w:parseInt(v.height);return[r=="true",v]};i.onLoadEvent_=function(y,v,u){var x=y||function(){return true};var w=this.getViewLimitationInfo_();v(w[0],w[1]);if(w[1].is){return false}var r=null;this.xhr_=null;var t=u.contentType;if(t=="application/xml"||t=="text/xml"||t=="text/plain"){r=u}else{if(typeof(u)=="string"||u instanceof String){r=a(u)}else{if(u!=null&&t==null){if(u.documentElement!=null){r=u}}}}if(!r){return false}var s=this.loadDomFromXml_(r);if(s===false){return false}this.resolveScenes_();x();return true};i.loadDomFromURLAsync_=function(t,r,s,w,u){var v=this.xhr_=new XMLHttpRequest();v.open("GET",t,true);Object.keys(w).forEach(function(x){var y=w[x];v.setRequestHeader(x,y)},this);v.timeout=u;v.onload=function(){r(v.responseText)};v.onerror=s;v.onabort=s;v.ontimeout=s;v.send();return true};i.loadDomFromURLSync_=function(u,r,s,x){var t=false;try{var w=this.xhr_=new XMLHttpRequest();w.open("GET",u,false);Object.keys(x).forEach(function(y){var z=x[y];w.setRequestHeader(y,z)},this);w.send();t=r(w.responseText)}catch(v){t=s()}return Boolean(t)};i.abortRequest=function(){if(this.xhr_&&typeof(this.xhr_.abort)==="function"){this.xhr_.abort()}};i.CriLaM118=function(v,r,s){var u=a(v);var t=this.loadDomFromXml_(u);r();return t};i.loadDomFromXml_=function(s){var t=[];var r=g(s,"footage").map(this.createResource,this);g(s,"comment").forEach(function(w){var v=this.getTrackingCode(w);if(v!=null){this.trackingCode=v;return}},this);g(s,"composition").forEach(function(v){var w=this.CriLaM1c0(v,r);t.push(w)},this);this.CriLaP113=t;this.resourceList=r;var u=c(r);t.forEach(function(v){v.setResourceIndexResolver(u)},this);this.resolveScenes_();return true};i.getTrackingCode=function(s){var r=s.getAttribute("name");if(r=="tracking_code"||r=="track_code"){var t=s.textContent;return t}return null};i.CriLaM1c0=function(t,w){var x=new CriLaC00i();x.id=t.getAttribute("id");x.name=l(t,"name");x.CriLaP115=p(n(t,"framerate"));x.duration_=f(n(t,"duration"),x.CriLaP115);var v=n(t,"dimension");var u=this.parseDimension_(v);x.Width=u[0];x.Height=u[1];var s=n(t,"background_color");var r=o(s);x.BackColor="rgb("+r[0]+","+r[1]+","+r[2]+")";g(t,"layer").forEach(function(B){var z=this.CriLaM1c1(B,x.CriLaP115,w);x.layerList_.push(z);var y=n(B,"margin");if(y!=null){var A=this.parseMargin_(y);x.setTextLayerMarginLTRB(z,A[0],A[1],A[2],A[3])}},this);g(t,"marker").forEach(function(z){var y=k(z,x.CriLaP115);x.markerList_.push(y)});return x};i.CriLaM1c1=function(C,u,s){var B=C.getAttribute("id");var K=C.getAttribute("name");var v=l(C,"footage_id");var D=l(C,"parent_layer_id");var x=n(C,"composition_id");var J=new CriLamgLayer(B,K);var t=null;var z=l(C,"object_type");switch(z){case"TEXT":J.text=K;t=this.createResourceTextFromLayer_(C,B,K);v=t.id;s.push(t);J.resource=t;break}g(C,"parameter_list").forEach(function(L){var M=L.getAttribute("category");if(M==null||M=="COMMON"){this.CriLaM1c2(J,L)}else{if(M=="TEXT"){this.CriLaM1c3(t,L)}}},this);if(!J.isBoxText()){J.position.x-=J.pivot.x;J.position.y-=J.pivot.y}J.resourceID=v;J.ParentLayerID=D;if(x!=null){J.refSceneID=x.textContent}g(C,"stream_list").forEach(function(L){var M=this.createAnimationCurveSet(L);J.AnimationCurveSet=M},this);g(C,"image_index_stream").forEach(function(M){var L=this.createImageIndexCurve(M);J.ImageIndexCurve=L},this);if(J.ImageIndexCurve!=null){J.frameBlendEnabled=this.frameBlendEnabled_}var y=l(C,"transfer_mode");switch(y){case"IN_FRONT":J.BlendMode=CriLaBlendMode.ALPHA_BLEND;break;case"ADD":J.BlendMode=CriLaBlendMode.ADD;break;case"MULTIPLY":J.BlendMode=CriLaBlendMode.MULTIPLY;break}var E=f(n(C,"start_frame"),u);var F=f(n(C,"original_start_frame"),u);if(E<F){F=E}J.startShowFrame_=Math.round(E);J.startFrame_=Math.round(F);var r=J.startShowFrame_-J.startFrame_;var A=f(n(C,"duration"),u);J.setDuration(Math.round(A)+r);var H=l(C,"layer_flags");H=H.replace(/"/g,"");var w=H.split(/ +/);J.visibility=(w.indexOf("VIDEO_ACTIVE")!==-1);var G=l(C,"layer_tags");G=G.replace(/"/g,"");J.tags=G.split(/ +/);var I=n(C,"video_active");if(I!=null){J.visibility=(I.textContent=="True")}return J};i.CriLaM1c2=function(r,s){g(s,"parameter").forEach(function(t){var v=t.getAttribute("name");var u=t.textContent;switch(v){case"position_x":r.position.x=parseFloat(u);break;case"position_y":r.position.y=parseFloat(u);break;case"rotation_z":r.rotation.z=parseFloat(u)*3.14/180;break;case"scale_x":r.scale.x=parseFloat(u)*0.01;break;case"scale_y":r.scale.y=parseFloat(u)*0.01;break;case"anchor_point_x":r.pivot.x=parseFloat(u);break;case"anchor_point_y":r.pivot.y=parseFloat(u);break;case"alpha":r.Alpha=parseFloat(u)*0.01;break;case"time_remap":r.isFrameRemap_=true;r.remapTime_=parseFloat(u);break}})};i.CriLaM1c3=function(u,v){var w="sans-serif";var s="start";var x="baseline";var r=0;var t=0;g(v,"parameter").forEach(function(z){var B=z.getAttribute("name");var A=z.textContent;var y=z.getAttribute("type");if(y=="STRING"){A=A.substring(1,A.length-1)}switch(B){case"source_text":var D=A.replace(/\\"/g,'"');w=D;break;case"font":u.setFont(A);break;case"font_family":u.setFontFamily(A);break;case"font_size":t=parseFloat(A)*this.fontScale_;u.setFontSize(t+"px");break;case"dimension_width":u.width=parseFloat(A);break;case"dimension_height":u.height=parseFloat(A);break;case"stroke_width":u.strokeWidth=parseFloat(A);break;case"justification":switch(A){case"LEFT":s="start";break;case"RIGHT":s="end";break;case"CENTER":s="center";break}break;case"vertical_align":switch(A){case"TOP":x="top";break;case"MIDDLE":x="middle";break;case"BOTTOM":x="bottom";break}break;case"font_weight":u.setFontWeight(A);break;case"apply_fill":u.fillEnabled=m(A);break;case"apply_stroke":u.strokeEnabled=m(A);break;case"fill_color":var E=q(A);u.fillColor=h(E);break;case"stroke_color":var E=q(A);u.strokeColor=h(E);break;case"stroke_over_fill":u.isStrokeOverFill=m(A);break;case"bold":var C=m(A);if(C==true){u.fontWeight="700"}break;case"italic":u.isItalic=m(A);break;case"text_wrap":u.setWrapMode(A);break;case"line_height":r=parseFloat(A);break;case"box_width":u.setWidth(parseFloat(A));u.setWrapMode("normal");u.isBoxText=true;break;case"box_height":u.setWrapMode("normal");u.isBoxText=true;break}},this);u.updateFont();u.setText(w);u.setAlign(s,x);if(r>1){u.line_height=r/t}};i.createAnimationCurve=function(w){var r=new CriLaC00r();var s=n(w,"parameter_name");if(s!=null){r.name=s.textContent}else{r.name="unknown"}var x=n(w,"key_list");if(x==null){return null}var A=e(x.textContent);r.Keys=A;var u=n(w,"value_list");if(u==null){return null}var z=e(u.textContent);r.Values=z;if(this.frameBlendEnabled_==false||s!=null){return r}var v=1;var t=r.Values[0];while(true){if(v>=r.Values.length){break}var y=r.Values[v];if(t==y){r.Values.splice(v,1);r.Keys.splice(v,1)}else{t=y;v++}}return r};i.createAnimationCurveSet=function(r){var s=new CriLaC00q();g(r,"stream").forEach(function(t){var u=this.createAnimationCurve(t);if(u!=null){s.Curves.push(u)}},this);return s};i.createImageIndexCurve=function(r){var s=this.createAnimationCurve(r);return s};i.createResource=function(t){var v=t.getAttribute("id");var s=t.getAttribute("name");var r=l(t,"footage_type");var u=null;if(r=="IMAGE"||r=="SEQUENCE"){u=this.createResourceImage_(t,v,s)}else{if(r=="SOLID"){u=this.createResourceRectangle_(t,v,s)}else{if(r=="VIDEO"||r=="MOVIE"){u=this.createResourceVideo_(t,v,s)}else{if(r=="AUDIO"){u=this.createResourceAudio_(t,v,s)}else{if(r=="MODEL"){u=this.createResourceModel_(t,v,s)}}}}}return u};i.createResourceImage_=function(u,x,t){var r=null;var s=l(u,"file_path");if(s.length>0){r=new CriLaResourceSingleImage(x,t);s=b(s,this.resourceURLSuffix_);r.url=s}else{r=this.createResourceSeqImage_(u,x,t)}var w=n(u,"dimension");var v=this.parseDimension_(w);r.width=v[0];r.height=v[1];return r};i.createResourceRectangle_=function(u,y,t){var s=new CriLaResourceRectangle(y,t);var v=n(u,"color");var r=o(v);s.color=h(r);var x=n(u,"dimension");var w=this.parseDimension_(x);s.width=w[0];s.height=w[1];return s};i.createResourceVideo_=function(s,t,r){return this.createResourceSingleVideo_(s,t,r)};i.createResourceSingleMedia_=function(z,r,u,s){var x=new z(u,s);var t=l(r,"file_path");t=b(t,this.resourceURLSuffix_);x.url=t;var y=n(r,"dimension");var w=this.parseDimension_(y);x.width=w[0];x.height=w[1];var v=l(r,"duration");x.duration=v;return x};i.createResourceSingleVideo_=function(s,t,r){return this.createResourceSingleMedia_(CriLaResourceVideo,s,t,r)};i.createResourceAudio_=function(s,t,r){return this.createResourceSingleMedia_(CriLaResourceAudio,s,t,r)};i.createResourceModel_=function(s,u,r){var t=new CriLaResourceModel(u,r);t.url=l(s,"file_path");return t};i.createResourceTextFromLayer_=function(w,y,t){var v=new CriLaResourceText(y+"_text",t);var x=t;var u=24;var r="px";var s="black";v.text=x;v.size=u;v.color=s;v.font=u+r+" "+v.font;return v};i.createResourceSeqImage_=function(s,u,t){var A=l(s,"directory_path");var v=l(s,"file_name_list");v=v.replace(/\"/g,"");var y=v.split(" ");var x=y.length;var z=null;var B=this.resourceURLSuffix_;if(x>1){z=new CriLaResourceSeqImageRaw(u,t);var w=y.map(function(D){var C=A+"/"+D;C=b(C,B);return C});z.setUrls(w)}else{z=new CriLaC00a(u,t);var r=A+"/"+y[0];r=b(r,B);z.url=r}return z};i.resolveScenes_=function(){this.CriLaP113.forEach(this.resolveScene_,this)};i.resolveScene_=function(r){r.getLayerList().forEach(this.resolveLayer_.bind(this,r))};i.resolveLayer_=function(w,t){if(t.ParentLayerID.length>0){var s=CriLaPolyfill.Array.find(w.layerList_,function(x){return x.id===t.ParentLayerID});t.ParentLayer=s}if(t.refSceneID.length>0){var r=CriLaPolyfill.Array.find(this.CriLaP113,function(x){return x.id===t.refSceneID});t.refScene=r}var v=CriLaPolyfill.Array.find(this.resourceList,j.bind(null,t));if(v!=null){var u=v;t.resource=u;this.resolveResource_(w,t,u)}};i.resolveResource_=function(u,s,t){if(t.type===CriLaResourceType.IMAGE){s.CurrentImage=t.image}if(t.type===CriLaResourceType.MODEL){if(s.getDuration()===0){var r=u.getFramerate();u.setDuration(r)}s.resourceID=t.id}};i.parseDimension_=function(s){var r=s&&s.textContent;return this.parseDimensionStr_(r)};i.parseDimensionStr_=function(s){var t=0;var r=0;if(s){var u=s.split(" ");t=parseInt(u[0]);r=parseInt(u[1])}if(t===0&&r===0){t=this.defaultDimension_.x;r=this.defaultDimension_.y}return[t,r]};i.parseMargin_=function(u){var s=u.textContent.split(" ");var v=s.length;var x=0;var t=0;var w=0;var r=0;if(v==1){x=t=w=r=s[0]}else{if(v==2){w=r=s[0];x=t=s[1]}else{if(v==3){w=s[0];x=t=s[1];r=s[2]}else{if(v==4){w=s[0];t=s[1];r=s[2];x=s[3]}}}}return[parseInt(x),parseInt(w),parseInt(t),parseInt(r)]};function j(r,s){if(r.resourceID===s.id){return true}var t=r.resourceID.replace(/\.[^.]+$/,".json");if(t===s.id){return true}return false}function c(r){return Array.prototype.indexOf.bind(r)}function e(s){var r=s.split(" ");return r.map(parseFloat)}function k(s,t){var r=new CriLaMarker();r.startFrame_=f(n(s,"start_time"),t);r.length_=f(n(s,"duration"),t);r.text_=l(s,"comment");return r}function m(r){if(r.toLowerCase()=="true"){return true}return false}function o(s){if(!s){return[0,0,0,0]}var r=s.textContent;return q(r)}function q(r){var s=r.split(" ");return s.map(function(t){return parseInt(parseFloat(t)*255)})}function h(r){return"rgba("+r.join(",")+")"}function b(r,s){if(s!=null){return r+s}return r}function a(r){var s=new DOMParser();return s.parseFromString(r,"text/xml")}function g(s,r){return CriLaPolyfill.Array.from(s.querySelectorAll(r))}function n(s,r){return s.querySelector(r)}function l(t,s){var r=n(t,s);return r?r.textContent:""}function p(r){return r?(parseFloat(r.textContent)||0):0}function f(v,u){var r=0;if(v){var s=parseFloat(v.textContent);var t=v.getAttribute("unit");if(t==="SECOND"){r=s*u}else{r=s}}return Math.round(r||0)}function d(s){var r=l(s,"file_path");var u=r.split(".");var t=u[u.length-1];return t==="lspj"}i.createResourceVideo_=function(s,t,r){if(d(s)){return this.createResourceSequenceVideo_(s,t,r)}else{return this.createResourceSingleVideo_(s,t,r)}};i.createResourceSequenceVideo_=function(t,y,s){var u=null;if(CriUAChecker.getOS()===CriUAOS.iOS){u=new CriLaResourceSequenceVideoHls(y,s)}else{u=new CriLaResourceSequenceVideoMse(y,s)}var r=l(t,"file_path");r=b(r,this.resourceURLSuffix_);u.playlistPath=r;var x=n(t,"dimension");var w=this.parseDimension_(x);u.width=w[0];u.height=w[1];var v=l(t,"duration");u.duration=v;return u}})(CriLaC00c.prototype);function CriLaC00e(a,b){this.CriLaP1e0=a;this.CriLaP1e1=null;this.CriLaP1e2=0;this.xhr_=null;this.CriLaP1e3="";this.CriLaP1e4="";this.CriLaP1e5=0;this.CriLaP1e6=false;this.CriLaP1e7=false;this.CriLaP1e8=b;this.loadedCount_=0;this.loadStartOffset_=0;this.startTime_=0;this.referenceDict_={}}var LafImageInfoCaps={CAPS_SRC_RECT:1,CAPS_DEST_RECT:2,CAPS_REFERENCE_FRAME:4};Object.freeze(LafImageInfoCaps);(function(a){a.requestLoad=function(b){var c=this.xhr=new XMLHttpRequest();c.open("GET",b,true);c.responseType="arraybuffer";c.addEventListener("load",this.CriLaM1e4.bind(this));c.send(null)};a.requestLoadStream=function(b){var c=this.xhr_=new XMLHttpRequest();c.open("GET",b,true);c.overrideMimeType("text/plain; charset=x-user-defined");c.addEventListener("progress",this.CriLaM1e0.bind(this));c.addEventListener("loadend",this.CriLaM1e5.bind(this));c.send(null)};a.updateImages_=function(j){if(this.CriLaP1e1==null){this.CriLaP1e1=this.CriLaM1e1(j)}if(j.loaded>this.CriLaP1e1.length){var f=this.CriLaM1e3(this.CriLaP1e1,j.loaded);delete this.CriLaP1e1;this.CriLaP1e1=f}var g=this.xhr_.response;if(g.length<=0){return}var h=0;if(g.length<j.loaded){h=g.length}else{h=j.loaded}for(var d=this.CriLaP1e2;d<h;d++){if(d>h){break}var c=g.charCodeAt(d);var b=c&255;this.CriLaP1e1[d]=b}this.CriLaM1e6();this.CriLaP1e2=h};a.CriLaM1e0=function(b){this.updateImages_(b);criLiveActRelease()};a.CriLaM1e1=function(d){var b=this.readFileSize_(d);var c=new Uint8Array(b);return c};a.readFileSize_=function(b){return this.readFileSizeFromTotal_(b)||this.CriLaM1e2(b)||this.readFileSizeFromXhrResponse_(b)||this.readFileSizeFromLoaded_(b)};a.readFileSizeFromTotal_=function(b){return b.total};a.CriLaM1e2=function(k){var l=8;var d=4;if(k.loaded<(l+d)){return 0}var c=new Uint8Array(d);var b=this.xhr_.response;for(var f=0;f<d;f++){var g=b.charCodeAt(l+f);var h=g&255;c[f]=h}var m=new DataView(c.buffer);var j=m.getUint32(0,true);b=null;criLiveActRelease();return j};a.readFileSizeFromXhrResponse_=function(d){var c=this.xhr_.getResponseHeader("Content-Length");var b=parseInt(c)*1.2;b=Math.round(b);return b};a.readFileSizeFromLoaded_=function(b){return b.loaded};a.CriLaM1e3=function(f,b){var e=new Uint8Array(b);var d=f.length;for(var c=0;c<d;c++){e[c]=f[c]}return e};a.CriLaM1e4=function(b){if(this.CriLaP1e1==null){this.CriLaP1e1=this.CriLaM1e1(b);this.CriLaP1e2=b.loaded}this.CriLaM1e6();this.xhr_=null;criLiveActRelease()};a.CriLaM1e5=function(b){this.updateImages_(b);this.CriLaM1e6();this.xhr_=null;criLiveActRelease()};a.CriLaM1e6=function(){if(this.CriLaP1e8.getState()==CriLaResourceState.COMPLETE){return}var b=new CriLaC00g(this.CriLaP1e1.buffer);this.CriLaM1e7(b);this.CriLaM1e8(b);if(this.loadedCount_>=this.numImages){this.CriLaP1e1=null;delete this.CriLaP1e1;var c=this.referenceDict_;for(var d in c){var f=this.CriLaP1e0[d];var e=this.CriLaP1e0[c[d]];f.refImage=e}this.CriLaP1e8.setState(CriLaResourceState.COMPLETE)}};a.CriLaM1e7=function(b){if(this.CriLaP1e2<128||this.CriLaP1e6==true){return}b.setOffset(32);b.seek(24);this.CriLaP1e3=b.readString();this.CriLaP1e4=b.readString();this.width=b.readInt32();this.height=b.readInt32();this.numImages=b.readInt32();var d=b.readInt32();this.CriLaP1e5=b.readInt32();var c=b.readInt32();if(c==1){this.CriLaP1e8.isLevelOfDetailFile_=true}b.seek(d-4-4-4);this.loadStartOffset_=(b.getOffset());this.CriLaP1e6=true;this.startTime_=criLaTimer_GetTimeMs()};a.CriLaM1e8=function(b){if(this.CriLaP1e6==false){return}if(this.CriLaP1e2<this.CriLaP1e5){this.startTime_=criLaTimer_GetTimeMs();return}var m=this.numImages;var u=null;var n=this.referenceDict_;b.setOffset(this.loadStartOffset_);for(var t=this.loadedCount_;t<m;t++){this.loadStartOffset_=b.getOffset();var s=b.readString();s=this.CriLaP1e3+s+this.CriLaP1e4;var j=b.readInt32();var r=b.readInt32();var g=b.getOffset();r+=g-4;var d=b.readInt32();b.seek(4);if(this.CriLaP1e2<r+j){break}var q={CAPS_SRC_RECT:1,CAPS_DEST_RECT:2,CAPS_REFERENCE_FRAME:4};if(d&q.CAPS_SRC_RECT){var l=b.readInt32();var k=b.readInt32();var p=b.readInt32();var o=b.readInt32();if(l==0&&k==0){u=this.CriLaM1e9(this.CriLaP1e1,r,j,s);u.setSrcRect_(l,k,p,o)}else{u=this.CriLaM1ea(u.image,l,k,p,o)}}else{u=this.CriLaM1e9(this.CriLaP1e1,r,j,s)}if(d&q.CAPS_DEST_RECT){var l=b.readInt32();var k=b.readInt32();var p=b.readInt32();var o=b.readInt32();u.destRect=CriLaRectangle.createFromXYWH(l,k,p,o)}if(d&q.CAPS_REFERENCE_FRAME){u.refType=b.readInt32();var f=b.readInt32();if(f<t){u.refImage=this.CriLaP1e0[f]}n[t]=f;b.seek(8)}this.loadedCount_++}if(this.loadedCount_>Math.min(10,m)){var e=criLaTimer_GetTimeMs();var h=e-this.startTime_;var c=this.CriLaP1e8;c.dlTime_=h;c.progress_=this.loadedCount_;c.progressMax_=m}};a.CriLaM1e9=function(l,h,f,g){var c=l.subarray(h,h+f);var d=g.substr(-4);var i="";if(d==".jpg"){i="image/jpeg"}else{if(d==".png"){i="image/png"}else{if(d==".gif"){i="image/gif"}}}var b=new Blob([c],{type:i});var k=window.URL.createObjectURL(b);var e=new Image();e.name=g;e.src=k;var j=new CriLaC005();j.setImage(e);this.CriLaP1e0.push(j);return j};a.CriLaM1ea=function(g,c,b,e,d){var f=new CriLaC005();f.setImage(g);f.setSrcRect_(c,b,e,d);this.CriLaP1e0.push(f);return f}})(CriLaC00e.prototype);function CriLaC00g(a){this.buffer_=a;this.view_=new DataView(a);this.readOffset_=0;this.isLittleEndian_=true}(function(a){a.setOffset=function(b){this.readOffset_=b};a.getOffset=function(){return this.readOffset_};a.seek=function(b){this.readOffset_+=b};a.readInt8=function(){var b=this.view_.getInt8(this.readOffset_);this.readOffset_+=1;return b};a.readInt32=function(){var b=this.view_.getInt32(this.readOffset_,this.isLittleEndian_);this.readOffset_+=4;return b};a.readString=function(){var d=this.readOffset_;var e=this.readInt32();var c=this.readInt32();var g=this.readInt32();this.seek(g-4);var f="";for(var b=0;b<e;b++){f+=String.fromCharCode(this.readInt8())}this.setOffset(d+16);return f}})(CriLaC00g.prototype);function CriLaScene(){this.id=0;this.name="unknown";this.duration_=0;this.CriLaP115=30;this.layerList_=[];this.markerList_=[];this.isComplete_=false;this.canPlay_=false;this.isLevelOfDetailScene_=false;this.loadProgress=0}(function(a){a.getName=function(){return this.name};a.getNumLayers=function(){return this.layerList_.length};a.getLayersByName=function(b){return this.layerList_.filter(function(c){return c.name===b})};a.getLayersByTag=function(b){return this.layerList_.filter(function(c){return c.tags.indexOf(b)!==-1})};a.getLayerByIndex=function(b){return this.layerList_[b]};a.isComplete=function(){if(this.isComplete_==true){return true}var b=this.layerList_.every(function(c){return c.isComplete()});this.isComplete_=b;return b};a.getLoadProgress=function(){if(this.loadProgress==100){return this.loadProgress}var c=this.layerList_.map(function(d){return d.getLoadProgress()});c.push(100);var b=Math.min.apply(null,c);this.loadProgress=b;return this.loadProgress};a.canPlay=function(b,h){if(this.canPlay_==true){return true}var d=b;var e=h||"ms";var c=true;if(d!=null){if(e==="%"){d=b}else{if(e==="ms"){var f=this.getDuration()*1000/this.getFramerate();d=b*100/f;e="%"}else{d=void (0);e=void (0)}}}if(d<0||d>=99.9){c=this.isComplete()}else{var g=this.isLevelOfDetailScene();if(g){c=this.canPlayByLoadProgress(d)}else{c=this.canPlayByTimePercent(d)}}this.canPlay_=c;return c};a.canPlayByLoadProgress=function(d){var c=5;if(d!=null){c=d}var b=false;var e=this.getLoadProgress();if(e>c){b=true}return b};a.canPlayByTimePercent=function(b){var d=void (0);if(b!=null){var e=this.getDuration();var c=this.getFramerate();d=b*e/100*1000/c}return this.canPlayByTimeMs(d)};a.canPlayByTimeMs=function(e){var b=3000;if(e!==undefined){b=e}var f=this.getFramerate();var d=Math.ceil(b/1000*f);var c=this.layerList_.every(function(g){return g.canPlay(d)});return c};a.canDraw=function(){var b=this.layerList_.every(function(c){return c.canDraw()});return b};a.hasVideo=function(){var b=this.getVideoResourceIndex();for(var d=0;d<this.layerList_.length;d++){var c=this.layerList_[d];if(c.isRefLayer()==true){var e=c.refScene.hasVideo();if(e==true){return true}}}return b>=0};a.hasAudio=function(){var b=this.getAudioResourceIndex();return b>=0};a.getVideoResourceIndex=function(){if(this.videoResourceIndex_==null){this.videoResourceIndex_=this.findVideoResourceIndex_()}return this.videoResourceIndex_};a.getAudioResourceIndex=function(){if(this.audioResourceIndex_==null){this.audioResourceIndex_=this.findAudioResourceIndex_()}return this.audioResourceIndex_};a.getDuration=function(){return this.duration_};a.getFramerate=function(){return this.CriLaP115};a.getNumMarkers=function(){return this.markerList_.length};a.getMarkerByIndex=function(b){return this.markerList_[b]};a.getWidth=function(){return this.Width};a.getHeight=function(){return this.Height};a.setTextLayerMarginLTRB=function(h,f,k,m,b){if(h==null){return this}if(h.resource==null){return this}var l=f;var j=k;var d=(this.Width-m)-f;var n=(this.Height-b)-k;var g=h.resource;h.position.x=l;h.position.y=g.isBoxText?j:j+n;if(g.getType()==CriLaResourceType.TEXT){g.setWidth(d);g.setHeight(n);var i=g.getAlign();var c=i[1];if(c=="baseline"&&!g.isBoxText){var e=parseFloat(g.getFontSize());h.position.y-=e}}h.resource.isSetMargin=true;return this};a.getTextLayerMarginLTRB=function(h){var d=[0,0,0,0];if(h==null){return d}if(h.resource==null){return d}var g=h.resource;if(g.getType()!=CriLaResourceType.TEXT){return d}var f=h.position.x;var j=h.position.y;var k=this.Width-(f+g.getWidth());var i=g.getAlign();var c=i[1];if(c=="baseline"&&!g.isBoxText){var e=parseFloat(g.getFontSize());j=j-e}var b=this.Height-(j+g.getHeight());return[f,j,k,b]}})(CriLaScene.prototype);function CriLaC00i(){CriLaScene.call(this);this.Width=0;this.Height=0;this.BackColor="rgba(0,0,0,0)"}(function(b,a){CriLaPolyfill.Object.setPrototypeOf(b,a);b.requestLoad=function(c,d){this.layerList_.forEach(function(e){e.requestLoad(c,d)})};b.unloadCommon_=function(){this.canPlay_=false;this.isComplete_=false};b.unload=function(){this.layerList_.forEach(function(c){c.unload()});this.unloadCommon_()};b.reload=function(){this.layerList_.forEach(function(c){c.reload()})};b.unloadVideoResource=function(){this.layerList_.forEach(function(c){c.unloadVideoResource()});this.unloadCommon_()};b.GetLayer=function(c){return this.layerList_[c]};b.GetContainLayers=function(n,k,p,q,f){var l=this.layerList_.length;var j=[];for(var s=0;s<l;s++){var w=this.layerList_[s];var v=0;var r=0;var h=w.getStartShowFrame();var o=w.getShowDuration();var t=p-h;if(t<0){continue}if(t>=o){continue}var c=w.refScene;var m=w.getTransformInverseMatrix();var d=f.multiplyMatrix(m);if(c!=null){if(q==true){if(w.isFrameRemap_==true){p=w.remapTime_*w.refScene.CriLaP115}var u=c.GetContainLayers(n,k,p,q,d);if(u.length>0){j=j.concat(u)}}else{v=c.Width;r=c.Height}}else{var g=w.resource;v=g.width;r=g.height}if(w.resource!=null){var z=w.resource.type;if(z==CriLaResourceType.TEXT){d.m31+=w.resource.height}}var e=new CriGrxVector2();e.x=n;e.y=k;e=d.multiplyVector2(e);if(e.x>0&&e.x<v&&e.y>0&&e.y<r){j.push(w)}}return j};b.getCalculatedDuration=function(){var d=this.layerList_.map(function(e){return e.getStartFrame()+e.getDuration()});d.push(0);var c=Math.max.apply(null,d);c=Math.round(c);return c};b.CalculateDuration=function(){this.duration_=this.getCalculatedDuration()};b.setDuration=function(c){c=Math.round(c);this.duration_=c;this.layerList_.filter(function(d){return d.getDuration()===0}).forEach(function(d){d.setDuration(c)})};b.findResource=function(d){var c=this.getLayerList();var e=c.length;for(var g=0;g<e;++g){var f=c[g];var h=f.findResource(d);if(h){return h}}return null};b.findMediaResourceIndex_=function(c){var d=this.findResource(c);return this.resourceIndexResolver_(d)};b.findVideoResourceIndex_=function(){return this.findMediaResourceIndex_(function(c){return c.isVideo()})};b.findAudioResourceIndex_=function(){return this.findMediaResourceIndex_(function(c){return c.type===CriLaResourceType.AUDIO})};b.resourceIndexResolver_=function(){return -1};b.setResourceIndexResolver=function(c){this.resourceIndexResolver_=c};b.isLevelOfDetailScene=function(){if(this.isComplete()==true||this.isLevelOfDetailScene_==true){return this.isLevelOfDetailScene_}var c=this.layerList_.every(function(d){return d.isLevelOfDetailLayer()});this.isLevelOfDetailScene_=c;return c};b.getLayerList=function(){return this.layerList_.concat()}})(CriLaC00i.prototype,CriLaScene.prototype);function CriLaAnimationModifier(){this.diff_threshold=0.00001}(function(a){a.updateAnimationCurve=function(b,d){if(d!=null){var f=JSON.parse(JSON.stringify(d));for(var c=0;c<f.Curves.length;c++){var g=f.Curves[c];var e=this.modifyFrames_(g.Keys,g.Values,b);if(!e){return false}}f.Curves.forEach(function(i,h){d.Curves[h]=i})}return true};a.countChangingSections_=function(d){var e=0;var c=false;var b=this.diff_threshold;d.forEach(function(f){if(c){if(f<b){c=false}}else{if(!(f<b)){c=true;e++}}});return e};a.searchIntroEndIndex_=function(f){var c=0;var d=false;for(var b=0;b<f.length;b++){var e=f[b];if(!d){if(!(e<this.diff_threshold)){d=true}}else{if(e<this.diff_threshold){break}}c+=1}return c};a.isExistFlatSection_=function(d,f,c){var e=false;for(var b=f;b<=c;b++){if(d[b]<this.diff_threshold){e=true;break}}return e};a.arithmeticAddInPlace_=function(d,g,e,c){var f=Math.min(d.length-1,e);for(var b=g;b<=f;b++){d[b]+=c}return d};a.arithmeticMultiplyInPlace_=function(d,h,e,c,f){var g=Math.min(d.length-1,e);for(var b=h;b<=g;b++){d[b]=f+(d[b]-f)*c}return d};a.searchOutroStartIndex_=function(d){var c=[];CriLaUtility.Array.copy(d,c);var b=this.searchIntroEndIndex_(c.reverse());return d.length-b};a.makeParameterDiffs_=function(b){var d=[];for(var c=1;c<b.length;c++){d.push(Math.abs(b[c]-b[c-1]))}return d};a.guessIntroEndIndexAndOutroStartIndex_=function(d,i){var b=0;var j=0;var f=this.makeParameterDiffs_(d);var g=this.countChangingSections_(f);if(2<=g){b=this.searchIntroEndIndex_(f);j=this.searchOutroStartIndex_(f)}else{if(g==1){b=this.searchIntroEndIndex_(f);j=this.searchOutroStartIndex_(f);var c=this.isExistFlatSection_(f,0,b-1);var e=i<=1?f.length-2:f.length-1;var h=this.isExistFlatSection_(f,j,e);if(c&&h){j=f.length}else{if(!c&&!h){b=0;j=f.length}else{if(c){b=0}else{j=f.length}}}}else{b=0;j=f.length}}return[b,j]};a.calculateUpdatingOffsetAndScale_=function(f,c,p,l){var b=f[0];var n=f[f.length-1];var k=n-b;var i=f[c];var r=f[p];var e=(i-b)+(n-r);var h=k-e;var j=l.duration_frame-e;var d=l.start_frame-b;var m=l.duration_frame-k;var o=0;if((r+m)<i){var g=i-(r+m);var q="先頭アニメーション区間と終了アニメーション区間が重なる設定です。durationが長くなるように設定してください。必要なフレーム数："+g;console.warn(q);return null}if(h!=0){o=j/h}else{o=1}return[d,m,o]};a.getKeyframeMetaInfo_=function(b){var c={start_frame:0,duration_frame:0};if(b.start_time!=null&&b.duration!=null&&b.end_time==null){c.start_frame=parseFloat(b.start_time);c.duration_frame=parseFloat(b.duration)}else{if(b.start_time!=null&&b.duration==null&&b.end_time!=null){c.start_frame=parseFloat(b.start_frame);c.duration_frame=parseFloat(b.end_frame)-parseFloat(b.start_frame)}else{if(b.start_time==null&&b.duration!=null&&b.end_time!=null){c.start_frame=parseFloat(b.end_frame)-parseFloat(b.duration);c.duration_frame=parseFloat(b.duration)}else{if(b.start_time==null&&b.duration!=null&&b.end_time!=null){c.start_frame=parseFloat(b.start_frame);c.duration_frame=parseFloat(b.duration)}else{var d="start_time、duration、end_timeの無効な組み合わせが指定されました。";console.warn(d);return null}}}}return c};a.modifyFrames_=function(f,j,d){var m=this.getKeyframeMetaInfo_(d);if(m==null){return false}var k=f.length>1?f[f.length-1]-f[f.length-2]:f[0];var g=this.guessIntroEndIndexAndOutroStartIndex_(j,k);var c=g[0];var n=g[1];var b=this.calculateUpdatingOffsetAndScale_(f,c,n,m);if(b==null){return false}var e=b[0];var i=b[1];var l=b[2];var h=f[c];f=this.arithmeticAddInPlace_(f,n,f.length,i);f=this.arithmeticMultiplyInPlace_(f,c+1,n-1,l,h);f=this.arithmeticAddInPlace_(f,0,f.length,e);return true};a.getIntroOutroDurationList=function(e){if(e==null){return null}var h=[];for(var g=0;g<e.Curves.length;g++){var d=e.Curves[g];var c=d.Keys;var j=d.Values;var k=c[c.length-1]-c[c.length-2];var f=this.guessIntroEndIndexAndOutroStartIndex_(j,k);var b=f[0];var l=f[1];h.push({name:d.name,duration:c[b]-c[0]+c[c.length-1]-c[l]})}return h}})(CriLaAnimationModifier.prototype);var CriLaBlendMode={NONE:0,ALPHA_BLEND:1,ADD:2,MULTIPLY:3};Object.freeze(CriLaBlendMode);function CriLaC00r(){this.name="";this.Keys={};this.Values={}}function CriLaC00q(){this.TargetLayerID="";this.Curves=[]}function CriLaLayer(b,a){this.id=b;this.name=a;this.resourceID="";this.resource=null;this.refSceneID="";this.refScene=null;this.position=new CriGrxVector3();this.rotation=new CriGrxVector3();this.visibility=true}(function(a){a.getResourceId=function(){return this.resourceID};a.setPositionXY=function(b,c){this.position.x=b;this.position.y=c;return this};a.getPositionXY=function(){return[this.position.x,this.position.y]};a.setRotation=function(b){this.rotation.z=b;return this};a.getRotation=function(){return this.rotation.z};a.isRefLayer=function(){return this.refScene!=null};a.setStartFrame=function(b){return false};a.setStartTimeMs=function(b,c){var d=(b*c/1000);return this.setStartFrame(d)};a.getStartFrame=function(){return 0};a.getStartTimeMs=function(b){return(this.getStartFrame()/b)*1000};a.getEndFrame=function(){return 0};a.getEndTimeMs=function(b){return(this.getEndFrame()/b)*1000};a.getDuration=function(){return this};a.getDurationMs=function(b){return(this.getDuration()/b)*1000};a.setStartShowFrame=function(b){return this};a.getStartShowFrame=function(){return 0};a.setTime=function(b){return this}})(CriLaLayer.prototype);function CriLamgLayer(b,a){CriLaLayer.call(this,b,a);this.CurrentImage=null;this.interpolateImage=null;this.scale=CriGrxVector3.createFromXYZ(1,1,1);this.pivot=new CriGrxVector3();this.Alpha=1;this.text=null;this.frameBlendEnabled=false;this.frameBlendWeight=0;this.isFrameRemap_=false;this.remapTime_=0;this.startFrame_=0;this.startShowFrame_=0;this.duration_=0;this.BlendMode=CriLaBlendMode.NONE;this.AnimationCurveSet=new CriLaC00q();this.OriginalAnimationCurveSet=null;this.ImageIndexCurve=null;this.ParentLayerID="";this.ParentLayer=null;this.mediaPlayer_=null;this.tags=""}(function(b,a){CriLaPolyfill.Object.setPrototypeOf(b,a);b.requestLoad=function(c,d){if(c==undefined){c=""}if(d==undefined){d=""}if(this.refScene!=null){this.refScene.requestLoad(c,d)}else{if(this.resource!=null){this.resource.requestLoad(c,d)}}};b.getLoadProgress=function(){var d=100;var c=this.resource;if(this.refScene!=null){d=this.refScene.getLoadProgress()}else{if(c.type==CriLaResourceType.IMAGE){d=c.getLoadProgress()}}return d};b.isLevelOfDetailLayer=function(){var d=true;var c=this.resource;if(this.refScene!=null){d=this.refScene.isLevelOfDetailScene()}else{if(c.type==CriLaResourceType.IMAGE){d=c.isLevelOfDetailImage()}}return d};b.isComplete=function(){var c=true;var d=this.resource;if(this.refScene!=null){c=this.refScene.isComplete()}else{if(d.type==CriLaResourceType.IMAGE){c=d.isComplete()}}return c};b.canPlay=function(e){var c=true;var d=this.resource;if(this.refScene!=null){c=this.refScene.canPlay(e)}else{c=d.canPlay(e)}return c};b.canDraw=function(){var c=true;if(this.refScene!=null){c=this.refScene.canDraw()}else{c=this.resource.canDraw()}return c};b.setStartFrame=function(d){var g=this.getDuration();this.storeAnimationCurveSet();this.restoreAnimationCurveSet();var c=new CriLaAnimationModifier();var f=c.updateAnimationCurve({start_time:d,duration:g},this.AnimationCurveSet);if(!f){return false}var e=this.getStartShowFrame()-this.startFrame_;this.startFrame_=d;this.setStartShowFrame(e+d);return true};b.getStartFrame=function(){return this.startFrame_};a.getEndFrame=function(){return this.getStartFrame()+this.getDuration()};b.setStartShowFrame=function(c){this.startShowFrame_=Math.max(this.startFrame_,c);return this};b.getStartShowFrame=function(){return this.startShowFrame_};b.getDuration=function(){return this.duration_};b.getShowDuration=function(){var c=this.startShowFrame_-this.startFrame_;return this.duration_-c};b.setDurationMs=function(d){var c=(d*fps/1000);return this.setDuration(c)};b.setDuration=function(f){var d=this.getStartFrame();this.storeAnimationCurveSet();this.restoreAnimationCurveSet();var c=new CriLaAnimationModifier();var e=c.updateAnimationCurve({start_time:d,duration:f},this.AnimationCurveSet);if(!e){return false}this.duration_=f;return true};b.getIntroOutroDurationList=function(){var c=new CriLaAnimationModifier();var d=this.OriginalAnimationCurveSet==null?this.AnimationCurveSet:this.OriginalAnimationCurveSet;return c.getIntroOutroDurationList(d)};b.unload=function(){var c=this.resource;c.unload()};b.reload=function(){var c=this.resource;c.reload()};b.unloadVideoResource=function(d){var c=this.resource;if(c.isVideo()){c.unload()}};b.getTransformMatrix=function(){var d=new CriGrxMatrix();d.setIdentity();if(this.ParentLayer!=null){var e=this.ParentLayer;d=e.getTransformMatrix()}var l=this.position.x;var j=this.position.y;var f=new CriGrxMatrix();var g=new CriGrxMatrix();var i=new CriGrxMatrix();var h=new CriGrxMatrix();var c=new CriGrxMatrix();f.setIdentity();g.setIdentity();i.setIdentity();h.setIdentity();c.setIdentity();h.translateXY(this.pivot.x,this.pivot.y);i.scaleXY(this.scale.x,this.scale.y);g.rotate(this.rotation.z);f.translateXY(l,j);c.translateXY(-this.pivot.x,-this.pivot.y);var k=new CriGrxMatrix();k.setIdentity();k=c.multiplyMatrix(i);k=k.multiplyMatrix(g);k=k.multiplyMatrix(f);k=k.multiplyMatrix(h);k=k.multiplyMatrix(d);return k};b.getTransformInverseMatrix=function(){var d=new CriGrxMatrix();d.setIdentity();if(this.ParentLayer!=null){var e=this.ParentLayer;d=e.getTransformInverseMatrix()}var l=this.position.x;var j=this.position.y;var f=new CriGrxMatrix();var g=new CriGrxMatrix();var i=new CriGrxMatrix();var h=new CriGrxMatrix();var c=new CriGrxMatrix();f.setIdentity();g.setIdentity();i.setIdentity();h.setIdentity();c.setIdentity();h.translateXY(this.pivot.x,this.pivot.y);i.scaleXY(1/this.scale.x,1/this.scale.y);g.rotate(-this.rotation.z);f.translateXY(-l,-j);c.translateXY(-this.pivot.x,-this.pivot.y);var k=new CriGrxMatrix();k.setIdentity();k=c.multiplyMatrix(f);k=k.multiplyMatrix(g);k=k.multiplyMatrix(i);k=k.multiplyMatrix(h);k=d.multiplyMatrix(k);return k};b.containsSceneFrame=function(c){var d=this.getFrameFromSceneFrame(c);return 0<=d&&d<this.getDuration()};b.isVisibleAtSceneFrame=function(c){if(!this.visibility){return false}if(this.tags.indexOf("WATERMARK")!==-1){return false}var d=c-this.getStartShowFrame();return 0<=d&&d<this.getShowDuration()};b.getFrameFromSceneFrame=function(c){return c-this.getStartFrame()};b.findResource=function(c){if(this.resource){return c(this.resource)?this.resource:null}else{return this.refScene.findResource(c)}};b.setMediaPlayer=function(c){this.mediaPlayer_=c};b.getMediaPlayer=function(){return this.mediaPlayer_};b.storeAnimationCurveSet=function(){if(this.OriginalAnimationCurveSet==null){this.OriginalAnimationCurveSet=JSON.parse(JSON.stringify(this.AnimationCurveSet))}};b.restoreAnimationCurveSet=function(){if(this.OriginalAnimationCurveSet!=null){this.AnimationCurveSet=JSON.parse(JSON.stringify(this.OriginalAnimationCurveSet))}};b.isBoxText=function(){if(this.resource&&this.resource.type==CriLaResourceType.TEXT){return this.resource.isBoxText}return false};b.setTime=function(d){var c=CriUnitValue.splitUnitFloat(d.start_time,"f");var f=CriUnitValue.splitUnitFloat(d.duration,"f");var g=CriUnitValue.splitUnitFloat(d.end_time,"f");var e=parseFloat(d.fps);var k=[];var j=[];j.push(c[1]);j.push(f[1]);j.push(g[1]);var l=false;j.forEach(function(m){if(m=="s"){l=true}});if(l&&isNaN(e)){console.warn("LiveAct warnning:単位sを使用する場合、fpsを指定してください。");return false}c=this.convertTimeToFrame(c,e);f=this.convertTimeToFrame(f,e);g=this.convertTimeToFrame(g,e);var h=0;h+=c==null?1:0;h+=f==null?1:0;h+=g==null?1:0;var i=false;if(h==0){console.warn("LiveAct warnning:start_time, duration, end_time全てに値を入れることはできません。");return false}else{if(h==1){i=this.setLayerTimeSettingsByDoubleParameter(c,f,g)}else{if(h==2){i=this.setLayerTimeSettingsBySingleParameter(c,f,g)}else{if(h==3){console.warn("LiveAct warnning:start_time, duration, end_timeに一つも値が設定されていません。");return false}}}}return i};b.setLayerTimeSettingsBySingleParameter=function(c,d,e){if(c!=null){d="fixed"}else{if(d!=null){c="fixed"}else{if(e!=null){d="fixed"}}}return this.setLayerTimeSettingsByDoubleParameter(c,d,e)};b.setLayerTimeSettingsByDoubleParameter=function(f,e,g){var i=this.getStartFrame();var k=this.getDuration();var j=k;var d=i;if(f==null){k=e=="fixed"?k:e;i=g=="fixed"?(i+j-k):(g-k)}else{if(e==null){var c=d+j;i=f=="fixed"?d:f;k=g=="fixed"?c-i:g-i}else{if(g==null){i=f=="fixed"?d:f;k=e=="fixed"?j:e}}}var h=this.setStartFrame(i);if(!h){return false}h=this.setDuration(k);if(!h){this.setStartFrame(d);return false}return h};b.convertTimeToFrame=function(d,c){if(d[0]&&!isNaN(d[0])&&d[1]=="s"){return d[0]*c}if(d[1]=="fixed"){return d[1]}return d[0]}})(CriLamgLayer.prototype,CriLaLayer.prototype);function CriLaC003(){this.CriLaP11d=false;this.CriLaP11b=null;this.CriLaP11e=null;this.renderer_=new CriLaMgRendererBase()}(function(a){a.Initialize=function(){};a.setVideoPlayer=function(b){this.CriLaP11b=b.getVideoElement();this.CriLaP11e=b.getAudioElement()};a.FindKey_=function(f,e){var j=f.Keys;var b=0;var i=j.length-1;var c=(b+i)>>1;var g=0;var h=0;while(b<i){var d=j[c];if(e<d){if(e>=j[c-1]){g=c-1;h=g+1;break}i=c-1}else{if(e<=j[c+1]){g=c;h=g+1;break}b=c+1}if(b==i){g=b;h=g+1;break}c=(b+i)>>1}return[g,h]};a.CalculateAnimationAll_=function(c,b){c.getLayerList().filter(function(d){return d.containsSceneFrame(b)}).reverse().forEach(function(d){this.CalculateAnimation_(d,b)},this)};a.CalculateAnimation_=function(h,d){if(h.AnimationCurveSet==null){return}var k=h.AnimationCurveSet.Curves.length;for(var e=0;e<k;e++){var b=h.AnimationCurveSet.Curves[e];if(b==undefined){continue}var f=b.name;var m;if(d<=b.Keys[0]){m=b.Values[0]}else{if(d>=b.Keys[b.Keys.length-1]){m=b.Values[b.Keys.length-1]}else{var n=this.FindKey_(b,d);var g=n[0];var j=n[1];var c=b.Keys[g];var l=b.Keys[j];if(f=="alpha"&&l-c<=1){m=this.interpolateCeilStep_(d,c,b.Values[g],l,b.Values[j])}else{m=this.interpolateLinear_(d,c,b.Values[g],l,b.Values[j])}}}switch(f){case"position_x":h.position.x=m;h.position.x-=h.isBoxText()?0:h.pivot.x;h.position.x=Math.round(h.position.x);break;case"position_y":h.position.y=m;h.position.y-=h.isBoxText()?0:h.pivot.y;h.position.y=Math.round(h.position.y);break;case"scale_x":h.scale.x=m;h.scale.x*=0.01;break;case"scale_y":h.scale.y=m;h.scale.y*=0.01;break;case"rotation_z":h.rotation.z=m*3.14/180;break;case"alpha":h.Alpha=m;h.Alpha*=0.01;break;case"time_remap":h.remapTime_=m;break}}if(h.ImageIndexCurve!=null){this.ResolveResource_(h,h.ImageIndexCurve,d)}};a.interpolateLinear_=function(f,h,g,c,b){var e=(f-h)/(c-h);var d=CriGrxMath.lerp(g,b,e);return d};a.interpolateHalfStep_=function(d,g,e,c,b){var f=(g+c)/2;if(d<=f){return e}return b};a.interpolateCeilStep_=function(d,f,e,c,b){if(d<c){return e}return b};a.ResolveResource_=function(u,h,j){var c=u.resource;if(c.isSequentialImage==false){return false}var r=0;var t=0;var n=h.Keys.length-1;var e=h.Keys[n];if(j<h.Keys[0]){r=h.Keys[0]}else{if(j>e){r=n;var g=j-e;u.frameBlendWeight=g}else{var k=this.FindKey_(h,j);var s=k[0];var o=k[1];var g=(j-h.Keys[s])/(h.Keys[o]-h.Keys[s]);if(g<0.5||u.frameBlendEnabled==true){r=s}else{r=o}u.frameBlendWeight=g;t=o;if(t>=h.Values.length){t=r}}}r=Math.floor(r);t=Math.floor(t);var p=h.Values[r];t=h.Values[t];var l=null;var b=null;if(p<c.CriLaP1e0.length){l=c.CriLaP1e0[p];var f=l.image;if(!f||f.complete==false){l=null}b=c.CriLaP1e0[t];if(b!=null&&b.isComplete()==false){b=null}}if(!l||!l.isComplete()){for(var q=r-1;q>=0;q--){var m=h.Values[q];var d=c.CriLaP1e0[m];if(d&&d.isComplete()){l=d;break}}}u.CurrentImage=l;u.interpolateImage=b};a.setRenderer=function(b){this.renderer_=b};a.clear=function(b){this.renderer_.clearRect(b.left,b.top,b.getWidth(),b.getHeight())};a.fill=function(c,b){this.renderer_.fillRect(c.left,c.top,c.getWidth(),c.getHeight(),b)};a.drawScene=function(e,g,k){this.CalculateAnimationAll_(e,g);var c={trsMatrix:k.trsMatrix,clips:this.getClipsFromSceneAndOptions_(e,k),alpha:k.alpha,blendMode:k.blendMode,worldMatrix:k.worldMatrix,camera:k.camera};Object.freeze(c);var b=e.getNumLayers();for(var d=b-1;d>=0;d--){var f=e.GetLayer(d);var h=f.isVisibleAtSceneFrame(g);if(h==false){continue}var j=f.getFrameFromSceneFrame(g);this.drawLayer(f,j,c)}};a.drawLayer=function(g,d,n){var h=n.trsMatrix;var j=g.getTransformMatrix();var k=j.multiplyMatrix(h);var l=n.blendMode==null||n.blendMode==CriLaBlendMode.NONE||n.blendMode==CriLaBlendMode.ALPHA_BLEND?g.BlendMode:n.blendMode;var e=n.alpha*g.Alpha;var i="";var c=this.CriLaP11b;var f=this.CriLaP11e;if(g.resource){i=g.resource.type;if(i==CriLaResourceType.VIDEO){var b=g.getMediaPlayer();if(b!=null){c=b.getVideoElement();f=b.getAudioElement()}}}var m={clips:n.clips,trsMatrix:k,layer:g,layerFrame:d,alpha:e,blendMode:l,isCanvasVideo:this.CriLaP11d,video:c,audio:f,worldMatrix:n.worldMatrix,camera:n.camera};if(g.refScene){this.drawResourceRefScene(g.refScene,m)}else{this.drawResource_(g.resource,m)}};a.drawResource_=function(c,b){c.drawnBy(this,b)};a.drawResourceRectangle=function(c,b){this.renderer_.drawRectangle(c,b)};a.drawResourceImage=function(c,b){this.renderer_.drawImage(c,b)};a.drawResourceVideo=function(c,b){this.renderer_.drawVideo(c,b)};a.drawResourceText=function(c,b){this.renderer_.drawText(c,b)};a.drawResourceModel=function(c,b){this.renderer_.drawModel(c,b)};a.drawResourceRefScene=function(d,b){var c=b.layer;var e=b.layerFrame;if(c.isFrameRemap_==true){e=c.remapTime_*c.refScene.CriLaP115}b.blendMode=c.BlendMode;this.drawScene(c.refScene,e,b)};a.getDefaultFontScale=function(){return this.renderer_.getDefaultFontScale()};a.createClipInfo_=function(d,c,b){return{trsMatrix:d,width:c,height:b}};a.getClipsFromSceneAndOptions_=function(c,b){return(b.clips||[]).concat(this.createClipInfo_(b.trsMatrix,c.getWidth(),c.getHeight()))};a.setRenderTarget=function(b){this.renderer_.setRenderTarget(b)}})(CriLaC003.prototype);function CriLaMgRendererBase(b,a){this.ctx_=this.getContextFromCanvas_(b);this.CriLaP11m=a;this.renderTarget_=null}(function(a){a.getContextNative=function(){return this.ctx_};a.getContextFromCanvas_=function(b){};a.clearRect=function(b,e,c,d){};a.fillRect=function(b,f,c,e,d){};a.drawRectangle=function(c,b){};a.drawImage=function(c,b){};a.drawVideo=function(c,b){};a.drawText=function(c,b){};a.drawModel=function(c,b){};a.getDefaultFontScale=function(){return 1};a.setRenderTarget=function(b){this.renderTarget_=b}})(CriLaMgRendererBase.prototype);function CriLaMgRenderer2d(b,a){CriLaMgRendererBase.call(this,b,a)}(function(b,a){CriLaPolyfill.Object.setPrototypeOf(b,a);b.getContextFromCanvas_=function(c){return c.getContext("2d")};b.clearRect=function(c,g,e,f){var d=this.getContextNative();d.clearRect(c,g,e,f)};b.fillRect=function(c,i,e,g,f){var d=this.getContextNative();d.fillStyle=f;d.fillRect(c,i,e,g)};b.drawRectangle=function(d,c){this.withCtxOptions_(c,this.drawRectangle_,this,[d,c])};b.drawImage=function(d,c){this.withCtxOptions_(c,this.drawImage_,this,[d,c])};b.drawVideo=function(d,c){this.withCtxOptions_(c,this.drawVideo_,this,[d,c])};b.drawText=function(d,c){this.withCtxOptions_(c,this.drawText_,this,[d,c])};b.getDefaultFontScale=function(){if(!this.defaultFontScale_){this.defaultFontScale_=this.measureDefaultFontScale_()}return this.defaultFontScale_};b.drawRectangle_=function(e,d){var c=this.getContextNative();c.fillStyle=e.color;c.fillRect(0,0,e.width,e.height)};b.drawImage_=function(i,f){var c=this.getContextNative();var g=f.layer;var h=g.CurrentImage;try{h.drawWH(c,i.width,i.height);var d=g.frameBlendEnabled;if(d){c.globalAlpha*=g.frameBlendWeight;g.interpolateImage.drawWH(c,i.width,i.height)}}catch(j){}};b.drawVideo_=function(i,e){var d=this.getContextNative();if(e.isCanvasVideo===false){return}var c=null;if(i.isPreDecodeEnabled()==true){var g=i.getFrame(e.layerFrame/30);if(g==null){return}g.drawWH(d,g.srcWidth,g.srcHeight)}else{var f=e.video;if(f==null){return}var j=e.layerFrame/30;if(f.seeking==false&&f.readyState>0){f.currentTime=j}c=f;var h=CriLaUtility.FitASizetoBSize(f.videoWidth,f.videoHeight,i.width,i.height);d.drawImage(c,0,0,h[0],h[1])}};b.drawText_=function(d,e){var r=this.getContextNative();var h=d.getWrapMode();var s=d.getAlign();var k=s[0];var w=s[1];if(h!="nowrap"&&k==="end"){k="right"}r.font=d.font;r.textAlign=k;r.fillStyle=d.fillColor;r.strokeStyle=d.strokeColor;r.lineWidth=d.strokeWidth;d.wrappingText(r);var q=d.getTextLines();var z=q.length;var j=parseInt(d.fontSize);var o=d.height/z;var g=d.line_height;if(h!="nowrap"){o=j*g}o=Math.round(o);var u=0;var v=0;if(w==="top"){var n=d.getHeight();u=-n+o}else{if(w==="bottom"){var c=o;u=(-1)*(z)*o+c}else{if(w==="middle"){var n=d.getHeight();var c=o/2;u=(-n/2)+(-0.5)*(z-1)*o+c}}}if(h!="nowrap"){if(k==="right"||k==="end"){if(d.isSetMargin==false){v=(d.isBoxText)?d.getWidth():0}else{v=d.getWidth()}}else{if(k==="center"){if(d.isSetMargin==false){v=(d.isBoxText)?d.getWidth()/2:0}else{v=d.getWidth()/2}}}}var f=0.13;u+=d.isBoxText==true?j*(2-g-f):0;for(var t=0;t<z;t++){var p=q[t];var m=v;var l=t*o+u;if(d.strokeEnabled==true&&d.isStrokeOverFill==false){r.strokeText(p,m,l)}if(d.fillEnabled==true){r.fillText(p,m,l)}if(d.strokeEnabled==true&&d.isStrokeOverFill==true){r.strokeText(p,m,l)}}};b.measureDefaultFontScale_=function(){var f=1;var d=navigator.userAgent;if(/(Android)/.test(d)){var c=this.getContextNative();c.save();c.font="20px 'serif'";c.lineWidth=1;var e=c.measureText("＿");f=20/e.width;c.restore()}return f};b.clipRegions_=function(d){var c=this.getContextNative();d.forEach(function(e){c.save();this.transform_(e.trsMatrix);c.beginPath();c.rect(0,0,e.width,e.height);c.closePath();c.restore();c.clip()},this)};b.transform_=function(d){var c=this.getContextNative();c.transform(d.m00,d.m01,d.m10,d.m11,d.m30,d.m31)};b.setAlpha_=function(d){var c=this.getContextNative();c.globalAlpha=d};b.setBlendMode_=function(c){var d=this.getContextNative();switch(c){case CriLaBlendMode.IN_FRONT:d.globalCompositeOperation="source-over";break;case CriLaBlendMode.ADD:d.globalCompositeOperation="lighter";break;case CriLaBlendMode.MULTIPLY:d.globalCompositeOperation="multiply";break;default:d.globalCompositeOperation="source-over"}};b.withCtxOptions_=function(g,d,e,f){var c=this.getContextNative();c.save();this.clipRegions_(g.clips);this.transform_(g.trsMatrix);this.setAlpha_(g.alpha);this.setBlendMode_(g.blendMode);d.apply(e,f);c.restore()}})(CriLaMgRenderer2d.prototype,CriLaMgRendererBase.prototype);function CriLaMgRendererWebGL(b,a){CriLaMgRendererBase.call(this,b,a)}(function(b,a){CriLaPolyfill.Object.setPrototypeOf(b,a);b.getContextFromCanvas_=function(c){return c.getContext("webgl")||c.getContext("experimental-webgl")};b.drawModel=function(i,d){var g=i.textureList_.every(function(k){return k&&k.isComplete()});if(!g){return}var j=this.getContextNative();if(this.renderTarget_){this.renderTarget_.set(j)}var c=d.worldMatrix;var f=d.camera;var h=i.meshList_.forEach(function(k){this.drawMesh_(k,i.materialList_,i.textureList_,c,f)},this);if(this.renderTarget_){this.renderTarget_.unset(j);j.viewport(0,0,f.viewWidth_,f.viewHeight_)}var e={resource:i,rendertarget:this.renderTarget_};this.CriLaP11m.dispatch(CriLaEvent.DRAW_POSTPROCESS,e);return true};b.drawMesh_=function(q,e,n,j,h){var g=this.getContextNative();var p=q.getMaterialIndex();var i=e[p];var d=i.getCriLaShader();var f=d.getProgram();g.useProgram(f);var l=i.getTextureIndex();var k=n[l];d.setParameterMatrix("u_wvp_matrix",this.getWVPMatrix_(j,h));i.applyShaderParameter(k);var m=q.getVertexBuffer();var o=q.getIndexBuffer();g.bindBuffer(g.ARRAY_BUFFER,m);g.bindBuffer(g.ELEMENT_ARRAY_BUFFER,o);g.enableVertexAttribArray(0);g.enableVertexAttribArray(1);var c=4*3+4*2;g.vertexAttribPointer(0,3,g.FLOAT,false,c,0);g.vertexAttribPointer(1,2,g.FLOAT,false,c,3*4);this.CriLaP11m.dispatch(CriLaEvent.PREPARE_DRAW);q.submeshList_.forEach(function(r){g.drawElements(q.primitiveType_,r.numPrimitives,g.UNSIGNED_SHORT,0)},this)};b.getWVPMatrix_=function(c,f){var g=f.getViewMatrix();var e=f.getProjectionMatrix();var d=new CriGrxMatrix();d.setIdentity();d.multiply(c);d.multiply(g);d.multiply(e);d.transpose();return d};b.clearRect=function(c,g,d,e){var f=this.getContextNative();f.clearColor(0,0,0,0);f.clear(f.COLOR_BUFFER_BIT|f.DEPTH_BUFFER_BIT)};b.fillRect=function(c,i,d,f,e){var g=this.getContextNative();g.clearColor(0,0,0,1);g.clear(g.COLOR_BUFFER_BIT|g.DEPTH_BUFFER_BIT)}})(CriLaMgRendererWebGL.prototype,CriLaMgRendererBase.prototype);function CriLaMgPlayerCommon(){this.chapterSeparatorsFrame_=[];this.distanceFromViewport_=[0,0,0,0];this.iframeMessageEnabled=false;this.CriLaP116=new CriGrxVector2();this.Rotation=0;this.CriLaP117=new CriGrxVector2();this.CriLaP118=new CriGrxVector2();this.CriLaP119=new CriGrxVector2();this.CriLaP11a=true;this.CriLaP118.x=1;this.CriLaP118.y=1;this.CriLaP119.x=1;this.CriLaP119.y=1;this.CriLaP11i=1;this.Sequencer=new CriLaC003();this.CriLaP11k=null;this.resourceList=[];this.CriLaP113=null;this.CriLaP114=false;this.soundVolume_=100;this.soundVolumeMemo_=this.soundVolume_;this.defaultDimension_=CriGrxVector2.createFromXY(0,0);this.subVideoPlayerList_=[];this.videoPlayer_=null;this.audioPlayer_=null;this.password="";if(this.initPluginVideoGroup_){this.initPluginVideoGroup_()}}(function(a){a.canvas_=null;a.isFullscreen_=false;a.isFullscreenNative_=false;a.memoryReduction=false;a.controlWrapperElem_=null;a.CriLaP11g=null;a.resizeHistory_=null;a.playableBufferTime_=70;a.playableBufferTimeUnit_="%";a.isFinalized=false;a.tapPlayEnabled_=true;a.scrollStatePrev_=null;a.contentInOutStatePrev_=null;a.baseResourceDir_="";a.sharedResourceDir_="";a.enabledRequestLoadResource_=true;a.enabledControlTemplate_=false;a.maxChapterSeparatorNum_=100;a.everyFrameDrawingEnabled_=false;a.lastDrawnFrame_=null;a.redrawRequested_=false;a.isPollingCanplay_=false;a.trackingCode_=null;a.CriLaP111=null;a.animationFrameID=null;a.resourceURLSuffix_=null;a.timeManager_=null;a.playbackRate_=1;a.playbackRateMax_=2;a.playbackRateMin_=0.5;a.videoPreloadType=null;a.videoRenderTargetType_="auto";a.frameInterpolationEnabled=true;a.CriLaP300=1;a.multiVideoEnabled_=false;a.preDecodeVideoEnabled_=false;a.preDecodeVideoFPS_=15;a.preDecodeVideoQuality_=0.85;a.seekStyle=CriLaSeekStyle.ALL;a.bodyPosition="";a.bodyTop="";a.bodyOverflow="";a.bodyScrollY="";a.initialize=function(g,f){this.enabledControlTemplate_=f!=null;this.setCanvas(g);this.setResizeHistory_(g.clientWidth,g.clientHeight,CriLaCanvasResolutionUsage.ATTRIBUTE);this.createAndRegisterControl(f);this.registerEvents();var e=2;var h=0.5;this.setPlaybackRateRange(h,e);this.enableBackgroundFill(false);this.resetFontScale();this.addEventListener(CriLaEvent.CAN_DRAW,function(){this.requestRedraw()}.bind(this));this.addEventListener(CriLaEvent.MAIN_LOOP,function(j){var i=j.detail.timeStamp;this.onmain_(i)}.bind(this));this.mainLoop_()};a.setPassword=function(e){var f=this.resourceList;f.forEach(function(g){if(g.type!=CriLaResourceType.SEQUENCE_VIDEO){g.setPassword(e)}});if(this.streamManager_){this.streamManager_.setPassword(e)}this.password=e};a.getPassword=function(){return this.password};a.finalize=function(){delete this.CriLaP11m.player;this.CriLaP11m=null;this.canvas_=null;this.finalizeResourceList();criLaCancelAnimationFrame_(this.animationFrameID);criLiveActRelease();this.isFinalized=true};a.finalizeResourceList=function(){if(this.resourceList==null){return}this.resourceList.forEach(function(e){if(e.finalize){e.finalize()}});delete this.resourceList};a.getVersion=function(){return[CriLaVersion.MAJOR,CriLaVersion.MINOR,CriLaVersion.REVISION,CriLaVersion.BUILD]};a.mainLoop_=function(e){if(this.isFinalized){return}if(e){var f=this.CriLaP11m.createEvent(CriLaEvent.MAIN_LOOP,{timeStamp:e});this.dispatchEvent(CriLaEvent.MAIN_LOOP,f)}this.animationFrameID=criLaRequestAnimationFrame_(this.mainLoop_.bind(this))};a.getResizeHistory_=function(){if(!this.resizeHistory_){this.resizeHistory_={}}return this.resizeHistory_};a.setResizeHistory_=function(f,e,g){var h=this.getResizeHistory_();if(g&CriLaCanvasResolutionUsage.STYLE){h.widthStyle=f;h.heightStyle=e}if(g&CriLaCanvasResolutionUsage.ATTRIBUTE){h.widthAttr=f;h.heightAttr=e}};a.resizeFromHistory_=function(){var e=this.getResizeHistory_();if("widthStyle" in e||"heightStyle" in e){this.resizeCanvas(e.widthStyle,e.heightStyle,CriLaCanvasResolutionUsage.STYLE)}if("widthAttr" in e||"heightAttr" in e){this.resizeCanvas(e.widthAttr,e.heightAttr,CriLaCanvasResolutionUsage.ATTRIBUTE)}};a.setCanvas=function(e){this.canvas_=e;this.Sequencer.setRenderer(this.createRendererFromCanvas_(e))};a.getCanvas=function(){return this.canvas_};a.setupPlayerSize=function(){var e=this.controlWrapperElem_;this.resizeCanvas(e.style.width,e.style.height,CriLaCanvasResolutionUsage.STYLE)};a.setupControlWrapperElem=function(){if(this.controlWrapperElem_){return}var g=this.getCanvas();var e=g.parentNode;if(!e.classList.contains("lac-div")){e=document.createElement("div");e.classList.add("lac-div");e.classList.add("liveact-player__element--reset-highlight");if(CriUAChecker.isSmallScreen()){e.classList.add("lac-div--mobile")}var h=g.style;var i=CriLaHtmlCss.getComputedStyle(g).position;i=i==="static"?"relative":i;var f=[];Array.prototype.forEach.call(h,function(j){e.style[j]=h[j];f.push(j)});Array.prototype.forEach.call(f,function(j){h[j]=""});e.style.position=i;CriLaHtmlCss.wrap(g,e);g.classList.add("lac-div__fit")}this.controlWrapperElem_=e};a.createAndRegisterControl=function(e){this.setupControlWrapperElem();var f=this.CriLaP11g=new CriLaPlayerControl();f.setup(this.getCanvas(),e);var g=this;this.CriLaP11m.addEventListener(CriLaEvent.TAP_PLAY_ENABLED_CHANGE,function(){f.setScreenPlayVisibility(g.isTapPlayEnabled())});var h=this.controlWrapperElem_;f.append(h)};a.setControlClassName=function(g){var e=this.getControls();var f=this.getCanvas();if(!e||!f){return}e.setClassName(f,g)};a.resizeCanvas=function(g,f,h,i){var e=this.resizeCanvasImpl_.bind(this,g,f,h);if(!i){this.setResizeHistory_(g,f,h)}e()};a.resizeCanvasImpl_=function(h,g,i){if(i&CriLaCanvasResolutionUsage.STYLE){if(h&&!isNaN(Number(h))){h+="px"}if(g&&!isNaN(Number(g))){g+="px"}this.resizeCanvasStyle_(h,g)}if(i&CriLaCanvasResolutionUsage.ATTRIBUTE){var f=h?CriUnitValue.splitUnit(h,"px")[0]:0;var e=g?CriUnitValue.splitUnit(g,"px")[0]:0;this.resizeCanvasAttr_(f,e)}};a.resizeCanvasStyle_=function(j,i){var g=this.getCanvas();var h=g.parentNode;var e=this.controlWrapperElem_;var k=e.style.width=j||"";var f=e.style.height=i||"";if(k){e.classList.add("lac-div--width-set")}else{e.classList.remove("lac-div--width-set")}if(f){e.classList.add("lac-div--height-set")}else{e.classList.remove("lac-div--height-set")}};a.resizeCanvasAttr_=function(g,e){var f=this.getCanvas();f.width=g;f.height=e};a.resizeCanvasToCurrentScene=function(f,j){var g=this.getCurrentScene();if(g==null){return}var i=CriLaCanvasResolutionUsage.BOTH;if(f!=null){i=f}var h=g.getWidth();var e=g.getHeight();this.resizeCanvas(h,e,i,j)};a.isWiderThanParent_=function(){var e=this.controlWrapperElem_;var g=CriLaHtmlCss.getElementWidthHeight(e.parentNode);var h=g.getWidth()/g.getHeight();var f=this.getCurrentSceneWidth()/this.getCurrentSceneHeight();return f>h};a.resizeCanvasContain=function(e){if(e){if(this.isWiderThanParent_()){this.resizeCanvasToFixedRatioWidth("100%",CriLaCanvasResolutionUsage.STYLE,true)}else{this.resizeCanvasToFixedRatioHeight("100%",CriLaCanvasResolutionUsage.STYLE,true)}this.resizeType_="contain";this.centeringCanvas()}else{this.resizeType_="";this.uncenteringCanvas()}};a.resizeCanvasCover=function(e){if(e){if(this.isWiderThanParent_()){this.resizeCanvasToFixedRatioHeight("100%",CriLaCanvasResolutionUsage.STYLE,true)}else{this.resizeCanvasToFixedRatioWidth("100%",CriLaCanvasResolutionUsage.STYLE,true)}this.resizeType_="cover";this.centeringCanvas()}else{this.resizeType_="";this.uncenteringCanvas()}};a.resizeCanvasFill=function(e){if(e){var f=this.controlWrapperElem_.parentNode;this.resizeCanvas(f.clientWidth,f.clientHeight,CriLaCanvasResolutionUsage.ATTRIBUTE,true);this.resizeType_="fill"}else{this.resizeType_=""}};a.centeringCanvas=function(){var e=this.controlWrapperElem_;CriLaHtmlCss.center(e);CriLaHtmlCss.middle(e)};a.uncenteringCanvas=function(){var e=this.controlWrapperElem_.style;e.left=e.top=""};a.resizeCurrentSceneToCanvas=function(){var e=this.getCanvasSceneScales_();if(!e){return}this.CriLaP118.x=e.x;this.CriLaP118.y=e.y;this.CriLaP116.x=this.CriLaP116.y=0};a.resizeContentsToCanvasFixedRatio=function(){var e=this.getCanvasSceneScales_();if(!e){return}this.CriLaP118.x=this.CriLaP118.y=Math.min(e.x,e.y);this.CriLaP116.x=this.CriLaP116.y=0};a.getCanvasSceneScales_=function(){var f=this.CriLaP111;if(!f){return null}var e=this.getCanvas();var h=e.width/f.Width;var g=e.height/f.Height;return{x:h,y:g}};a.resizeCanvasToFixedRatioWidth=function(f,e,h){var g=CriLaCanvasResolutionUsage.STYLE;if(e!=null){g=e}this.resizeCanvas(f,void (0),g,h)};a.resizeCanvasToFixedRatioHeight=function(e,f,h){var g=CriLaCanvasResolutionUsage.STYLE;if(f!=null){g=f}this.resizeCanvas(void (0),e,g,h)};a.resizeFromParentElement=function(){this.resizeCanvasToFixedRatioWidth("100%",CriLaCanvasResolutionUsage.STYLE)};a.setNoneScrollMode=function(){if(CriUAChecker.isMobile()){this.bodyPosition=document.body.style.getPropertyValue("position");this.bodyTop=document.body.style.getPropertyValue("top");this.bodyScrollY=window.scrollY;document.body.style.setProperty("position","fixed");document.body.style.setProperty("top",this.bodyScrollY+"px")}else{this.bodyOverflow=document.body.style.getPropertyValue("overflow");document.body.style.setProperty("overflow","hidden")}};a.restoreFromeNoneScrollMode=function(){if(CriUAChecker.isMobile()){document.body.style.setProperty("position",this.bodyPosition);document.body.style.setProperty("top",this.bodyTop);window.scrollTo(0,this.bodyScrollY)}else{document.body.style.setProperty("overflow",this.bodyOverflow)}};a.fullscreen=function(f){f=Boolean(f);if(f===this.isFullscreen()){return}if(f){this.fullscreenWrap_();var e=this.exitFullscreenByEscCallback_=this.exitFullscreenByEsc_.bind(this);window.addEventListener("keydown",e);this.setNoneScrollMode();this.fullscreenImpl_(true)}else{this.fullscreenUnwrap_();var e=this.exitFullscreenByEscCallback_;if(e){window.removeEventListener("keydown",e);this.exitFullscreenByEscCallback_=null}this.fullscreenImpl_(false);this.restoreFromeNoneScrollMode();this.resizeFromHistory_()}this.setFullscreen_(f)};a.fullscreenWrap_=function(){var e=this.controlWrapperElem_;var h=e.style;this.lacDivPosition_=h.position;h.position="absolute";var g=document.createElement("div");g.classList.add("liveact-fullscreen-background");var f=this;g.addEventListener("click",function(i){if(i.eventPhase===2){f.fullscreen(false)}});CriLaHtmlCss.wrap(e,g)};a.fullscreenUnwrap_=function(){var e=this.controlWrapperElem_;var f=e.style;f.position=this.lacDivPosition_;CriLaHtmlCss.unwrap(e)};a.exitFullscreenByEsc_=function(e){if(e.key==="Escape"||e.keyCode===27){this.fullscreen(false)}};a.isFullscreen=function(){return this.isFullscreen_};a.setFullscreen_=function(e){e=Boolean(e);var f=this.isFullscreen();if(e!==f){this.isFullscreen_=e;this.dispatchEvent(CriLaEvent.FULLSCREEN_CHANGE)}};a.fullscreenNative=function(e){e=Boolean(e);if(e===this.isFullscreenNative_){return}try{if(e){CriLaPolyfill.Element.requestFullscreen(this.controlWrapperElem_)}else{CriLaPolyfill.Document.exitFullscreen()}}catch(f){console.warn(f.toString())}};a.setControlStyle=function(f){var e=this.getControls();e.setControlStyle(f)};a.setupControlCommon=function(){var f=this.videoPointerMoved_.bind(this);var e=this.getCanvas();if(CriUAChecker.isMobile()===false){e.addEventListener("mousemove",f)}e.addEventListener("click",f)};a.setupVideoControl=function(){this.setupControlCommon();this.getControls().setupStyleVideo()};a.setupAudioControl=function(){this.setupControlCommon();this.getControls().setupStyleAudio()};a.setupDefaultControl=function(){this.setupControlCommon();this.getControls().setupStyleNoSeekBar()};a.setupAllaroundControl=function(){this.setupControlCommon();this.getControls().setupStyleAllaroundImage()};a.setupSwipeControl=function(){this.setupControlCommon();this.getControls().setupStyleSwipe()};a.setupTemplateControl=function(){this.setupControlCommon();this.getControls().setupStyleTemplate()};a.isEnabledControlTemplate=function(){return this.enabledControlTemplate_};a.videoPointerMoved_=function(f){this.getControls().resetAlpha()};a.getChapterSeparatorsFrame=function(){return this.chapterSeparatorsFrame_};a.getChapterSeparatorsTimeMs=function(){var e=this.getCurrentSceneFrameRate();return this.chapterSeparatorsFrame_.map(function(f){return CriUnitValue.frameToSecond(e,f)*1000},this)};a.setChapterSeparatorsFrame=function(e){e=CriLaPolyfill.Array.from(e).map(function(f){return Math.floor(f)});if(e.length>this.maxChapterSeparatorNum_){return false}e=CriLaPolyfill.Array.from(e).sort(function(g,f){return g-f});if(CriLaUtility.Array.isEqual(e,this.chapterSeparatorsFrame_)){return}CriLaUtility.Array.copy(e,this.chapterSeparatorsFrame_);this.dispatchEvent(CriLaEvent.CHAPTER_SEPARATOR_CHANGE);return true};a.addChapterSeparatorFrame=function(f){if(this.chapterSeparatorsFrame_.length+1>this.maxChapterSeparatorNum_){return false}var j=CriLaPolyfill.Array.from(this.chapterSeparatorsFrame_);if(f){j.push(f)}else{var h=this.getFrame();var g=this.getCurrentSceneDuration();for(var e=0;e<j.length;++e){if(Math.floor(h)===Math.floor(j[e])){++h}else{if(h<j[e]){break}}}h=Math.min(h,g);j.push(h)}this.setChapterSeparatorsFrame(j);return true};a.sendAnalyticsCommon_=function(m,k){var h=k||{};var g=this.getCurrentSceneName();var l=this.getTrackingCode(true);var e=CriLaId.getClientId();var i=JSON.parse(JSON.stringify(h));i.client_id=e;i.hit_type="event";i.title=document.title;i.tracking_code=l;i.event_category="LiveAct(R) PRO";i.event_action=m;i.event_label=g;i.location=location.href;i.parent_location=CriLaUtility.getParentLocation();i.runtime_version=this.getVersion().join(".");for(var p in i){var j=i[p];if(j==null){j=""}if(p!="event_data"){i[p]=encodeURIComponent(j)}}var f="https://analytics.liveact.cri-mw.jp/v1/collect";var o=new XMLHttpRequest();o.open("POST",f,true);o.setRequestHeader("Content-Type","multipart/form-data");var n="3DXzd7PvP12UJ3YztLu0H1ZXBJciOMx8avkGEjq8";o.setRequestHeader("x-api-key",n);o.send(JSON.stringify(i))};a.CriLaM116=function(){this.sendAnalyticsCommon_("la-play")};a.sendAnalyticsClick_=function(f){var e=f.detail.point;this.sendAnalyticsCommon_("la-click",{x:e.x,y:e.y,time_ms:this.getTimeMs()})};a.addComponent=function(f,e){this.getControls().addComponent(f,e)};a.addComponents=function(e){this.getControls().addComponents(e)};a.getControls=function(){return this.CriLaP11g};a.setEventDispatcher_=function(e){this.CriLaP11m=e;this.CriLaP11k=new CriLaAnalytics(e)};a.addEventListener=function(e,f){this.CriLaP11m.addEventListener(e,f)};a.removeEventListener=function(e,f){this.CriLaP11m.removeEventListener(e,f)};a.dispatchEvent=function(f,e){this.CriLaP11m.dispatch(f,e)};a.setIframeMode=function(e){this.iframeMessageEnabled=e};a.isInIframe=function(){return this.iframeMessageEnabled};a.calcDistanceFromViewport=function(l,q){var k=q.getHeight();var g=q.top+k/2;var f=l.getHeight();var p=l.top+f/2;var j=Math.abs(p-g);var o=j-((f/2)+(k/2));o=o<0?0:o;var i=q.getWidth();var h=q.left+i/2;var n=l.getWidth();var r=l.left+i/2;var e=Math.abs(r-h);var m=e-((n/2)+(i/2));m=m<0?0:m;this.distanceFromViewport_=[m,o,e,j]};a.notifyPositionChange=function(e,f){this.calcDistanceFromViewport(e,f);this.dispatchScrollInOutEvent_(e,f)};a.dispatchScrollInOutEvent_=function(f,g){var i=this.canPlayCurrentScene();if(i==false){return}var e=Boolean(this.scrollStatePrev_);var h=CriLaRectangle.isInViewPortWithMargin(g,f);if(e===h){return}this.scrollStatePrev_=h;this.dispatchEvent(h?CriLaEvent.SCROLL_IN:CriLaEvent.SCROLL_OUT)};a.dispatchContentInOutEvent_=function(j,m){var k=Boolean(this.contentInOutStatePrev_);var f=CriLiveActSharedSettings.ContentInMargin.distance;var i=m.bottom-m.top;var h=m.top+i/2;var g=j.bottom-j.top;var l=j.top+g/2;var e=Math.abs(l-h)<f+(g/2)+(i/2);if(k===e){return}this.contentInOutStatePrev_=e;this.dispatchEvent(e?CriLaEvent.CONTENT_IN:CriLaEvent.CONTENT_OUT)};a.notifyParentResize=function(){switch(this.resizeType_){case"contain":this.resizeCanvasContain(true);break;case"cover":this.resizeCanvasCover(true);break;case"fill":this.resizeCanvasFill(true)}};a.notifyFullscreenChange=function(e){this.setFullscreen_(e)};a.registerEvents=function(){this.registerScroll_();this.registerResize_();this.registerFullscreenNative_();this.serveAutoPause_();this.serveMemoryReduction_();this.serveAnalytics_();this.serveClick_();this.registerWatermark_();this.registerUpdateUi_();this.serveCanPlay_();this.serveCanDraw_();this.serveAdvancedAnalytics_();this.registerFinalize_();this.registerSubAudioPlay_()};a.registerScroll_=function(){var e=this;var f=function(){var g=e.getCanvas();if(CriLaHtmlCss.isAncestorFixed(g)){return}e.notifyPositionChange(CriLaRectangle.createFromViewPort(),CriLaRectangle.createFromElement(g))};window.addEventListener("scroll",CriLaFunctional.throttle(33,f));CriLaEventDispatcher.global.addEventListener("resize",f);CriLaEventDispatcher.global.addEventListener("domchanged",f);e.addEventListener(CriLaEvent.CAN_PLAY,function(){if(e.isInIframe()==false){f()}});this.calcDistanceFromViewport(CriLaRectangle.createFromViewPort(),CriLaRectangle.createFromElement(this.getCanvas()))};a.registerResize_=function(){var e=this;CriLaEventDispatcher.global.addEventListener("resize",function(){e.notifyParentResize()})};a.registerFullscreenNative_=function(){var e=this;CriLaEventDispatcher.global.addEventListener("fullscreenchange",function(){var f=CriLaPolyfill.Document.fullscreenElement;e.isFullscreenNative_=(f!=null)});window.addEventListener("orientationchange",function(){if(e.isFullscreen()&&!e.isInIframe()){var f=e.isPlaying();e.fullscreen(false);if((!CriUAChecker.isMobile())||(CriUAChecker.getBrowser()!=CriUABrowser.Safari)){setTimeout(function(){e.fullscreen(true);if(f){e.play()}},400)}}})};a.serveAutoPause_=function(){var e=this;var f=true;e.addEventListener(CriLaEvent.PLAY_START,function(){f=false});e.addEventListener(CriLaEvent.PAUSE,function(){f=true});e.addEventListener(CriLaEvent.STOP,function(){f=true});window.addEventListener("blur",function(){if(!CriLiveActSharedSettings.autoPause){return}if(!f){e.pause();f=false}});window.addEventListener("focus",function(){if(!CriLiveActSharedSettings.autoPause){return}if(!f){e.play()}})};a.serveMemoryReduction_=function(){var e=this;window.addEventListener("blur",function(){var f=CriLiveActSharedSettings.autoPause||e.isPaused();if(!f){return}if(e.memoryReduction){e.unloadDecodedData_();criLiveActRelease()}});window.addEventListener("focus",function(){if(e.memoryReduction){e.reloadDecodedData_();criLiveActRelease()}})};a.serveAnalytics_=function(){if(!false){this.addEventListener(CriLaEvent.FIRST_PLAY_START,this.CriLaM116.bind(this));this.addEventListener(CriLaEvent.CLICK,this.sendAnalyticsClick_.bind(this))}};a.serveClick_=function(){var g=this;var f=g.getCanvas();var e=this.clickEmulator_=new CriLaClickEmulator(f);e.onclick=function(i){var l=CriLaHtmlCss.getElementWidthHeight(f);var h=i.x/l.getWidth()*g.getCurrentSceneWidth();var j=i.y/l.getHeight()*g.getCurrentSceneHeight();var o={x:h,y:j};var n=g.getContainedLayers(h,j,false);var k={point:o,layers:n};var m=new CriLaEventArgs(CriLaEvent.CLICK,g,k);g.dispatchEvent(CriLaEvent.CLICK,m)}};a.setClickThreshold=function(e,f){this.clickEmulator_.setThresholdPathLength(e);this.clickEmulator_.setThresholdDuration(f)};a.registerWatermark_=function(){this.addEventListener(CriLaEvent.WATERMARK_CLICK,function(){this.pagejump("https://www.cri-mw.co.jp/liveact/")}.bind(this))};a.setCanPlayPollingEvent_=function(){var f=this;function e(){if(f.canPlayCurrentScene()){f.dispatchEvent(CriLaEvent.CAN_PLAY);f.isPollingCanplay_=false}else{window.setTimeout(e,100)}}this.isPollingCanplay_=true;window.setTimeout(e,100)};a.serveCanPlay_=function(){this.addEventListener(CriLaEvent.LJT_LOADED,this.setCanPlayPollingEvent_.bind(this))};a.setCanDrawPollingEvent_=function(){var e=this;function f(){if(e.canDrawCurrentScene()){e.dispatchEvent(CriLaEvent.CAN_DRAW)}else{window.setTimeout(f,100)}}window.setTimeout(f,100)};a.serveCanDraw_=function(){this.addEventListener(CriLaEvent.LJT_LOADED,this.setCanDrawPollingEvent_.bind(this))};a.registerUpdateUi_=function(){var h=this;var e=h.getControls();h.addEventListener(CriLaEvent.FULLSCREEN_CHANGE,function(){e.setButtonState(CriLaControlComponentName.FULLSCREEN_BUTTON,h.isFullscreen())});var g=function(){var i=h.isInIframe();if(i==true){h.dispatchEvent(CriLaEvent.FULLSCREEN_REQUESTED)}else{h.fullscreen(!h.isFullscreen())}};e.addEventListener(CriLaControlEvent.FULLSCREEN_BUTTON_CLICKED,g);h.addEventListener(CriLaEvent.CLICK,function(){if(e.isMiniMenuOpenAny({excludePinnedMiniMenu:true})){e.closeMiniMenuAll({excludePinnedMiniMenu:true})}else{if(h.isTapPlayEnabled()){e.dispatchEventByType(CriLaControlEvent.PLAY_BUTTON_CLICKED)}}});e.addEventListener(CriLaControlEvent.SCREEN_PLAY_BUTTON_CLICKED,function(){h.play()});h.addEventListener(CriLaEvent.PLAY_START,function(){var i=function(){e.setScreenPlayVisibility(false);h.removeEventListener("frameupdate",i)};h.addEventListener("frameupdate",i);e.setButtonState(CriLaControlComponentName.PLAY_BUTTON,true);e.closeMiniMenu("playbackRangeButton")});h.addEventListener(CriLaEvent.PLAY_END,function(){e.setButtonState(CriLaControlComponentName.PLAY_BUTTON,false);e.seekLastFrame()});h.addEventListener(CriLaEvent.PAUSE,function(){e.setButtonState(CriLaControlComponentName.PLAY_BUTTON,false);e.resetAlpha()});h.addEventListener(CriLaEvent.STOP,function(){e.setButtonState(CriLaControlComponentName.PLAY_BUTTON,false);e.resetAlpha();e.setFrame(0)});e.addEventListener(CriLaControlEvent.PLAY_BUTTON_CLICKED,function(){if(h.isPaused()){h.play()}else{h.pause()}});h.addEventListener(CriLaEvent.SEEKBAR_RESET_NEEDED,function(){var l=h.getCurrentSceneDuration();var j=h.getCurrentSceneFrameRate();e.resetSeekBar(l,j);var i=h.getPlaybackRangeFrame();e.setPlaybackRangeFrame(i.beginFrame,i.endFrame);var k=h.getFrame();e.setFrame(k)});h.addEventListener(CriLaEvent.FRAME_UPDATED,function(j){e.setFrame(h.getFrame());if(!h.isPaused()){var i=j.detail.stepTimeMs;e.updateAlpha(i)}});h.addEventListener(CriLaEvent.LOADED_FRAME_CHANGE,function(i){var j=i.detail.loadedFrames;e.setLoadedFrame(j)});h.addEventListener(CriLaEvent.VOLUME_CHANGE,function(){e.setVolume(h.getVolume()/100)});e.addEventListener(CriLaControlEvent.VOLUME_CHANGED,function(i){h.setVolume(i.detail.volume*100)});e.addEventListener(CriLaControlEvent.VOLUME_CHANGE_START,function(i){h.memoryVolume()});e.addEventListener(CriLaControlEvent.VOLUME_BUTTON_CLICKED,function(){h.mute(!h.isMuted())});h.addEventListener(CriLaEvent.LOOP_CHANGE,function(){e.setButtonState(CriLaControlComponentName.LOOP_BUTTON,h.getLoopFlg())});e.addEventListener(CriLaControlEvent.LOOP_BUTTON_CLICKED,function(){h.setLoopFlg(!h.getLoopFlg())});e.addEventListener(CriLaControlEvent.SEEK,function(i){h.setFrame(i.detail.frame)});var f;e.addEventListener(CriLaControlEvent.SEEK_START,function(i){f=h.isPaused();if(!f){h.pause()}});e.addEventListener(CriLaControlEvent.SEEK_END,function(i){if(!f){h.play()}});h.addEventListener(CriLaEvent.CHAPTER_SEPARATOR_CHANGE,function(i){var j=h.getChapterSeparatorsFrame();e.setChapterSeparatorsFrame(j);e.setChapterSeparatorAddButtonState(j.length!==this.maxChapterSeparatorNum_)}.bind(this));e.addEventListener(CriLaControlEvent.CHAPTER_SEPARATOR_CHANGED,function(i){h.setChapterSeparatorsFrame(i.detail.frames)});e.addEventListener(CriLaControlEvent.CHAPTER_SEPARATOR_ADDED,function(i){h.addChapterSeparatorFrame()});h.addEventListener(CriLaEvent.PLAYBACK_RANGE_CHANGE,function(j){var i=h.getPlaybackRangeFrame();e.setPlaybackRangeFrame(i.beginFrame,i.endFrame)});e.addEventListener(CriLaControlEvent.PLAYBACK_RANGE_CHANGED,function(i){h.setPlaybackRangeFrame(i.detail.beginFrame,i.detail.endFrame)});e.addEventListener(CriLaControlEvent.PLAYBACK_RANGE_RESET,function(i){h.resetPlaybackRange()});e.addEventListener(CriLaControlEvent.PLAYBACK_RANGE_ADJUSTMENT_MODE_CHANGED,function(i){if(i.detail.enabledMode&&h.isPlaying()){h.pause()}});e.addEventListener(CriLaControlEvent.PLAYBACK_RANGE_MOVE_START,function(i){if(h.isPlaying()){h.pause()}});e.addEventListener(CriLaControlEvent.PREV_FRAME_CLICKED,function(i){if(h.isPlaying()){h.pause()}h.stepFrame(-1,false)});e.addEventListener(CriLaControlEvent.NEXT_FRAME_CLICKED,function(i){if(h.isPlaying()){h.pause()}h.stepFrame(1,false)});h.addEventListener(CriLaEvent.PLAYBACK_RATE_CHANGE,function(k){var i=h.getPlaybackRate();var j=e.getComponent(CriLaControlComponentName.PLAYBACK_RATE_BUTTON);j.setPlaybackRate(i)});e.addEventListener(CriLaControlEvent.PLAYBACK_RATE_CHANGED,function(i){h.setPlaybackRate(i.detail.playbackRate)})};a.serveAdvancedAnalytics_=function(){var e=this;if(!true){e.addEventListener(CriLaEvent.CAN_PLAY,function(){e.serveAdvancedAnalyticsImpl_()})}};a.serveAdvancedAnalyticsImpl_=function(){var n=this;var k=n.getContentType();var l=["rotate360","allaround-sphere"];if(l.indexOf(k)!==-1){return}var f=new CriLaAdvancedAnalytics(n);var g=0;var j=function(){if(g<10000){g+=1000;return 1000}else{g+=5000;return 5000}};var m={header:{"Content-Type":"application/json","x-api-key":"isUQVw5MMd5ndighbCHdABs5uUigoL115mFLF4b0"},url:"https://analytics.liveact.cri-mw.jp/advanced1/records"};var o=function(s){var t=new XMLHttpRequest();t.open("POST",m.url,true);var q=m.header;for(var r in q){t.setRequestHeader(r,q[r])}t.send(s);if(CriLiveActSharedSettings.advancedAnalyticsDebug){}};var h=(function(q){return function(r){clearTimeout(e);e=null;p=false;return f.send(q,r)}})(o);var e=null;var p=false;var i=function(r){if(p){return}var q=h(r);if(!q){return}p=true;e=setTimeout(function(){p=false;i(r)},j())};n.addEventListener(CriLaEvent.CREATE_LOG,function(){h(true)});n.addEventListener(CriLaEvent.UPDATE_LOG,function(){i(false)});n.addEventListener(CriLaEvent.PAUSE,function(){h(false)})};a.registerFinalize_=function(){window.addEventListener("unload",this.finalize.bind(this))};a.registerSubAudioPlay_=function(){function g(){this.syncSubAudioPlaybackAll_(true);this.removeEventListener(CriLaControlEvent.SCREEN_PLAY_BUTTON_CLICKED,g);this.removeEventListener(CriLaControlEvent.PLAY_BUTTON_CLICKED,g);this.removeEventListener(CriLaControlEvent.VOLUME_BUTTON_CLICKED,g)}function f(){this.syncSubAudioPlaybackAll_(true)}var e=this.getControls();e.addEventListener(CriLaControlEvent.SCREEN_PLAY_BUTTON_CLICKED,g.bind(this));e.addEventListener(CriLaControlEvent.PLAY_BUTTON_CLICKED,g.bind(this));e.addEventListener(CriLaControlEvent.VOLUME_BUTTON_CLICKED,g.bind(this));this.addEventListener(CriLaEvent.PLAY_START,f.bind(this))};a.unloadDecodedData_=function(){};a.reloadDecodedData_=function(){};a.setMemoryReduction=function(e){this.memoryReduction=e};a.unload=function(){};a.unloadVideoResource=function(){};a.isInvisible=function(){var e=this.getCanvas();return CriLaHtmlCss.isInvisible(e)};a.getContentType=function(){return this.contentType_};a.setContentType=function(e){this.contentType_=e};a.isPlaying=function(){return this.getStatus()===CriLaPlayStatus.PLAYING};a.isPaused=function(){return this.getStatus()===CriLaPlayStatus.PAUSE};a.isStopped=function(){return this.getStatus()===CriLaPlayStatus.STOP};a.setup=function(e){var g=this.getCanvas();if(!g){return false}this.CriLaP113=e.CriLaP113;this.registerResourceList_(e.resourceList);this.trackingCode_=e.trackingCode;var f=this.setupWatermarkElement_();return f};a.setupWatermarkElement_=function(){if(this.getNumScenes()<=0){return false}var g=this.CriLaP113[0];var e=g.getLayersByTag("WATERMARK");var f=e.map(function(h){return this.createWatermarkNode_(h,g.getWidth(),g.getHeight())},this);f.forEach(function(i){i.style.pointerEvents="";i.style.cursor="pointer";var h=new CriLaClickEmulator(i);h.onclick=function(){this.dispatchEvent(CriLaEvent.WATERMARK_CLICK)}.bind(this)},this);f.forEach(function(i){var h=this.getCanvas();h.parentElement.insertBefore(i,h.nextSibling)},this);return true};a.createWatermarkNode_=function(g,f,j){var e=function(m){return m*100+"%"};var l=g.resource;var h=document.createElement("div");var i=h.style;var k=l.getFullUrl(this.baseResourceDir_,this.sharedResourceDir_);i.backgroundImage="url("+k+")";i.backgroundRepeat="no-repeat";i.backgroundSize="contain";if(g.BlendMode===CriLaBlendMode.MULTIPLY){i.mixBlendMode="multiply"}i.position="absolute";i.left=e(g.position.x/f);i.top=e(g.position.y/j);i.width=e(l.width/f);i.height=e(l.height/j);i.transformOrigin=[e(g.pivot.x/l.width),e(g.pivot.y/l.height)].join(" ");i.transform="scale("+[g.scale.x,g.scale.y].join(",")+")";i.opacity=g.Alpha;i.pointerEvents="none";return h};a.registerResourceList_=function(e){e.forEach(function(f){this.setupResource_(f);this.resourceList.push(f)},this)};a.setupResource_=function(e){};a.getSceneByName=function(e){if(!this.CriLaP113){return null}return CriLaPolyfill.Array.find(this.CriLaP113,function(f){return f.name===e})};a.getSceneByIndex=function(e){if(!this.CriLaP113){return null}return this.CriLaP113[e]};a.getNumScenes=function(){return this.CriLaP113?this.CriLaP113.length:0};a.setCurrentSceneByName=function(e){var f=this.getSceneByName(e);return this.setCurrentScene(f)};a.setCurrentSceneByIndex=function(f){var e=this.getSceneByIndex(f);return this.setCurrentScene(e)};a.setCurrentScene=function(g,e){if(g){this.CriLaP111=g}this.timeManager_.setSceneParam(g);if(!e){if(this.multiVideoEnabled_==false){this.setMediaPlayerByScene(g)}else{this.subVideoPlayerList_=this.createMediaPlayersByScene(g)}}this.timeManager_.setFrame(0,false);var h=this.timeManager_.getFrame();this.CriLaP11k.createReport(g.name,g.getDuration());var f=this.isMuted();this.CriLaP11k.createLog(g.name,h,f);return true};a.setMediaPlayerByScene=function(g){var e=this.getCurrentVideoPlayer();var f=this.getCurrentAudioPlayer();if(this.enabledRequestLoadResource_===true){if(e){e.setup(g,this.resourceList,this.canvas_);this.Sequencer.setVideoPlayer(e)}if(f){f.setup(g,this.resourceList,this.canvas_,this.Sequencer)}}};a.createMediaPlayersByScene=function(l){var k=[];var f=l.getLayerList();for(var j=0;j<f.length;j++){var h=f[j];if(h.isRefLayer()==true){var g=this.createMediaPlayersByScene(h.refScene);Array.prototype.push.apply(k,g);continue}if(h.resource==null||h.resource.getType()!=CriLaResourceType.VIDEO){continue}var e=new CriLaC00u();this.registerVideoPlayerFromResource(e,h.resource,this.canvas_);e.setupFromLayer(l,h,this.canvas_);h.setMediaPlayer(e);k.push(e)}return k};a.getCurrentScene=function(){return this.CriLaP111};a.getCurrentSceneWidth=function(){return this.getCurrentScene().Width};a.getCurrentSceneHeight=function(){return this.getCurrentScene().Height};a.getCurrentSceneName=function(){var e=this.getCurrentScene();return e?e.name:""};a.getCurrentSceneDuration=function(){return this.getCurrentScene().getDuration()};a.getCurrentSceneLength=function(){return this.getCurrentSceneDuration()};a.getCurrentSceneFrameRate=function(){return this.getCurrentScene().CriLaP115};a.setPlayableBufferSizeMs=function(e){this.setPlayableBufferSize(e,"ms")};a.setPlayableBufferSize=function(e,f){this.playableBufferTime_=e;this.playableBufferTimeUnit_=f};a.isTapPlayEnabled=function(){return this.tapPlayEnabled_};a.enableTapPlay=function(e){this.tapPlayEnabled_=e;this.dispatchEvent(CriLaEvent.TAP_PLAY_ENABLED_CHANGE)};a.enableMultiVideo=function(e){this.multiVideoEnabled_=e};a.setVideoSettings=function(e){if(e.renderTargetType!=null){this.videoRenderTargetType_=e.renderTargetType}if(e.preDecode!=null){this.preDecodeVideoEnabled_=e.preDecode}if(e.preDecodeFPS!=null){var f=parseInt(e.preDecodeFPS);if(f>0){this.preDecodeVideoFPS_=f}}if(e.preDecodeQuality!=null){var g=parseFloat(e.preDecodeQuality);this.preDecodeVideoQuality_=g}if(e.multiDecode!=null){this.multiVideoEnabled_=e.multiDecode;if(this.multiVideoEnabled_==true){this.videoRenderTargetType_="canvas"}}};a.getVideoRenderTargetType=function(){return this.videoRenderTargetType_};a.getTrackingCode=function(f){var e=this.getTrackingCode_();if(!f){this.checkTrackingCodeValidity_(e)}return e};a.getTrackingCode_=function(){var e=this.trackingCode_||"";var h=CriLiveActSharedSettings.getCustomerCode();if(h==null){return e}var g=e.split("-");if(g==null||g.length!=2){return e}var f=h+"-"+g[1];return f};a.checkTrackingCodeValidity_=function(e){if(!this.isTrackingCodeValid_(e)){console.warn("トラッキングコードの指定が無効です。 trackingCode: "+e)}};a.isTrackingCodeValid_=function(e){var g=e.indexOf("-");if(g!=8){return false}var f=e.substring(0,g);if(f=="xxxxxxxx"){return false}return true};a.enableRequestLoadResource=function(e){this.enabledRequestLoadResource_=Boolean(e)};a.isRequestLoadResourceEnabled=function(){return this.enabledRequestLoadResource_};a.loadCurrentSceneResourcesAll=function(){this.setMediaPlayerByScene(this.getCurrentScene());this.requestLoadResourcesCurrentScene();this.setFrame(this.getFrame())};a.enableEveryFrameDrawing=function(e){this.everyFrameDrawingEnabled_=Boolean(e)};a.getDistanceFromViewport=function(){return this.distanceFromViewport_};a.drawCurrentSceneToCanvasForcibly=function(){};a.setPageJumpMode=function(){};a.restoreFromPageJumpState=function(){};a.setAlpha=function(e){this.CriLaP300=e};a.getAlpha=function(){return this.CriLaP300};a.getPositionXY=function(){return[this.CriLaP116.x,this.CriLaP116.y]};a.setPositionXY=function(e,f){this.CriLaP116.x=e;this.CriLaP116.y=f};a.getRotation=function(){return this.Rotation};a.setRotation=function(e){this.Rotation=e};a.getScaleXY=function(){return[this.CriLaP118.x,this.CriLaP118.y]};a.setScaleXY=function(e,f){this.CriLaP118.x=e;this.CriLaP118.y=f};a.getPivotXY=function(){return[this.CriLaP117.x,this.CriLaP117.y]};a.setPivotXY=function(e,f){this.setPivotSeparateXY(e,f,e,f)};a.setPivotSeparateXY=function(h,g,f,e){this.CriLaP117.x=h;this.CriLaP117.y=g;this.CriLaP119.x=f;this.CriLaP119.y=e};a.resetFontScale=function(){this.CriLaP11i=this.Sequencer.getDefaultFontScale()};a.setFontScale=function(e){this.resetFontScale();this.CriLaP11i*=e;return this};a.getFontScale=function(){return this.CriLaP11i};a.setResourceURLSuffix=function(e){this.resourceURLSuffix_=e};a.getNumResources=function(){return this.resourceList.length};a.getResourceByIndex=function(e){return this.resourceList[e]};a.getResourceById=function(e){return CriLaPolyfill.Array.find(this.resourceList,function(f){return f.id===e})};a.getResourcesByName=function(e){return this.resourceList.filter(function(f){return f.name===e})};a.isCompleteCurrentScene=function(){var e=this.getCurrentScene();return Boolean(e&&e.isComplete())};a.canPlayCurrentScene=function(){var e=this.getCurrentScene();if(e==null){return false}return e.canPlay(this.playableBufferTime_,this.playableBufferTimeUnit_)&&(!this.videoPlayer_||this.videoPlayer_.isLoaded())};a.canDrawCurrentScene=function(){var e=this.getCurrentScene();if(e==null){return false}return e.canDraw()};a.getLoadProgressCurrentScene=function(){return this.getCurrentScene().getLoadProgress()};a.setDefaultDimension_=function(f,e){this.defaultDimension_=CriGrxVector2.createFromXY(f,e)};a.createLjtLoader=function(g){var e=new CriLaC00c();e.addEventListener("error",function(i){var h=this.CriLaP11m.createEvent(CriLaEvent.ERROR,{message:i.detail.message});this.dispatchEvent(CriLaEvent.ERROR,h)}.bind(this));var f=g||{};if(f.frameblend){e.enableFrameBlend(f.frameblend)}e.setFontScale(this.CriLaP11i);e.resourceURLSuffix_=this.resourceURLSuffix_;e.defaultDimension_=this.defaultDimension_;return e};a.loadLjtCommon=function(m,n){var j=this.createLjtLoader(n);var k=this;var l=function(){var o=k.setup(j);if(!o){return false}k.dispatchEvent(CriLaEvent.LJT_LOADED)};var f=function(p,o){k.hasPass=p;if(o.is){k.showUnavailable(o.width,o.height);k.dispatchEvent(CriLaEvent.LOADED_PRIVATE_CONTENT)}};var e=m.url;if(e){var g=false;var i=3000;if(n!=null){g=n.async;i=n.timeout}j.LoadDomFromURL(e,g,i,l,f)}else{var h=m.str;if(!h){return false}j.CriLaM118(h,l,f)}return true};a.loadLjtFromUrl=function(e,f){return this.loadLjtCommon({url:e},f)};a.loadLjt=a.loadLjtFromUrl;a.loadLjtFromString=function(f,e){return this.loadLjtCommon({str:f},e)};a.loadLjtWithResources=function(f,h){var g=function(i){var j=i.player.implPlayer_;if(j.enabledRequestLoadResource_===false){console.warn("enableRequestLoadResourceでfalseが設定されたため、リソースの読み込みを行いません。");return}j.requestLoadResourcesScenes(j.CriLaP113);j.removeEventListener("loaded",g)};this.addEventListener("loaded",g);var e=this.loadLjtFromUrl(f,h);if(!e){return false}return true};a.requestLoadResourcesScenes=function(e){if(this.hasPass){var f=new CriLaPassword();f.setup(this,e)}else{if(!this.viewTimeLimit){e.forEach(function(g){g.requestLoad(this.baseResourceDir_,this.sharedResourceDir_)},this);this.dispatchEvent(CriLaEvent.REQUEST_LOAD_RESOURCE)}}};a.requestLoadResourcesCurrentScene=function(){if(this.enabledRequestLoadResource_===false){console.warn("enableRequestLoadResourceでfalseが設定されたため、リソースの読み込みを行いません。");return}this.requestLoadResourcesScenes([this.CriLaP111])};a.requestLoadResourcesBySceneName=function(f){if(this.CriLaP113==null){return}if(this.enabledRequestLoadResource_===false){console.warn("enableRequestLoadResourceでfalseが設定されたため、リソースの読み込みを行いません。");return}var e=this.CriLaP113.filter(function(g){return g.name===f});this.requestLoadResourcesScenes(e)};a.requestLoadResourcesBySceneIndex=function(f){if(this.enabledRequestLoadResource_===false){console.warn("enableRequestLoadResourceでfalseが設定されたため、リソースの読み込みを行いません。");return}var e=this.CriLaP113[f];this.requestLoadResourcesScenes([e])};a.requestLoadResources=function(){if(this.enabledRequestLoadResource_===false){console.warn("enableRequestLoadResourceでfalseが設定されたため、リソースの読み込みを行いません。");return}this.requestLoadResourcesScenes(this.CriLaP113)};a.setResourcesBaseURL=function(e){this.baseResourceDir_=CriLaURL.appendSlash(e)};a.getResourcesBaseURL=function(){return this.baseResourceDir_};a.setSharedResourcesBaseURL=function(e){this.sharedResourceDir_=CriLaURL.appendSlash(e)};a.getSharedResourcesBaseURL=function(){return this.sharedResourceDir_};a.unloadCommon_=function(){if(this.videoPlayer_!=null){this.videoPlayer_.unload()}if(this.audioPlayer_!=null){this.audioPlayer_.unload()}};function c(e){e.unload()}a.unload=function(){this.unloadCommon_();this.CriLaP113.forEach(c)};function b(e){return Boolean(e.isSequentialImage)}a.reloadDecodedData_=function(){var e=this.resourceList.filter(b);e.forEach(function(f){f.reload()})};function d(e){e.unloadVideoResource()}a.unloadVideoResource=function(){this.unloadCommon_();this.CriLaP113.forEach(d);criLiveActRelease();if(this.isPollingCanplay_==false){this.setCanPlayPollingEvent_()}};a.unloadDecodedData_=function(){var f=function(m,j){var l=j.Keys;var h=j.Values;var i=l.indexOf(Math.floor(m));var k=l.indexOf(Math.ceil(m));return[h[i],h[k]]};var e=function(k,j){var i=null;for(var h=0;i=k.getLayerByIndex(h);h++){if(i.resource===j){break}}return i};var g=this.resourceList.filter(b);g.forEach(function(k){var j=this.CriLaP111;var l=this.getFrame();var i=e(j,k);var h=i.ImageIndexCurve;var m=f(l,h);k.unload(10,m)},this)};a.isSegmented=function(){return false};a.getCurrentVideoPlayer=function(){if(this.isSegmented()){if(this.pluginVideoGroup){return this.getCurrentVideoPlayerInSegmented_()}}if(this.videoPlayer_!=null){return this.videoPlayer_}if(this.subVideoPlayerList_.length>0){return this.subVideoPlayerList_[0]}return null};a.getCurrentAudioPlayer=function(){return this.audioPlayer_};a.getCurrentMediaPlayer=function(){return this.getCurrentAudioPlayer()||this.getCurrentVideoPlayer()};a.draw=function(){var f=this.getFrame();if(!this.frameInterpolationEnabled){f=Math.floor(f)}var e=this.Sequencer;e.drawScene(this.getCurrentScene(),f,this.createDrawParameter_());this.lastDrawnFrame_=f;this.redrawRequested_=false;this.dispatchEvent(CriLaEvent.DRAW)};a.createDrawParameter_=function(){var e=criLaMg_getTransformMatrix(this.CriLaP116,this.Rotation,this.CriLaP118,this.CriLaP117,this.CriLaP119);return{trsMatrix:e,alpha:this.getAlpha()}};a.drawWithClear=function(){this.clear();this.draw()};a.enableFrameInterpolation=function(e){this.frameInterpolationEnabled=Boolean(e)};a.requestRedraw=function(){this.redrawRequested_=true};a.isDrawingNeeded_=function(){if(this.everyFrameDrawingEnabled_){return true}if(this.redrawRequested_){return true}if(this.lastDrawnFrame_!==this.getFrame()){return true}return false};a.getRectangle_=function(){var g=this.getCurrentScene();var f=this.CriLaP116;var i=this.CriLaP118;var h=g.getWidth()*i.x;var e=g.getHeight()*i.y;return CriLaRectangle.createFromXYWH(f.x,f.y,h,e)};a.enableBackgroundFill=function(e){this.CriLaP11a=e};a.fill=function(g){var e=this.getCurrentScene();var f=g||e.BackColor;this.Sequencer.fill(this.getRectangle_(),f)};a.clear=function(){if(this.CriLaP11a){this.Sequencer.fill(this.getRectangle_())}else{this.Sequencer.clear(this.getRectangle_())}};a.createRendererFromCanvas_=function(e){return CriLaMgRendererBase(e)};a.play=function(f){var e=this.timeManager_;if(e!=null){e.play()}else{setTimeout(this.play.bind(this),33)}};a.pause=function(){var e=this.timeManager_;if(e){e.pause()}};a.stop=function(){var e=this.timeManager_;if(e){e.stop()}};a.stepFrame=function(e,h){if(e==undefined){e=1}if(h==null){h=true}var g=this.CriLaP111;var i=this.timeManager_.getFrame();var f=this.timeManager_.setFrame(i+e,h);return f};a.getFrame=function(){var e=this.timeManager_;return e?e.getFrame():0};a.getTimeMs=function(){var e=this.timeManager_;return e?e.getTimeMs():0};a.getLastFrame=function(){var e=this.timeManager_;return e?e.getLastFrame():0};a.isEnded=function(){var e=this.timeManager_;return e?e.isEnded():false};a.setFrame=function(f){var e=this.timeManager_;if(e){e.seekFrame(f)}};a.setTimeMs=function(f){var e=this.timeManager_;if(e){e.seekTimeMs(f)}};a.getStatus=function(){var f=this.timeManager_;if(f==null){return CriLaPlayStatus.STOP}var e=f.getStatus();return e};a.setPlaybackRate=function(e){e=this.parsePlaybackRateValue(e);e=CriGrxMath.clamp(this.playbackRateMin_,this.playbackRateMax_,e);var g=this.playbackRate_;var f=this.timeManager_;if(f){f.setPlaybackRate(e);var h=f.getPlaybackRate();if(h!=null){e=h}}this.playbackRate_=e;if(g!==e){this.dispatchEvent(CriLaEvent.PLAYBACK_RATE_CHANGE)}};a.getPlaybackRate=function(){return this.playbackRate_};a.parsePlaybackRateValue=function(e){if(isNaN(e)){return 1}if(e<0){return 0}return e};a.setPlaybackRateRange=function(f,e){e=this.parsePlaybackRateValue(e);f=this.parsePlaybackRateValue(f);f=f>1?1:f;if(e<=f){console.warn("LiveAct Warning：最小の再生速度以下の最大値を設定しようとしました。");return}if(f>=e){console.warn("LiveAct Warning：最大の再生速度以上の最小値を設定しようとしました。");return}this.playbackRateMax_=e;this.playbackRateMin_=f;this.updatePlaybackRateGUI();this.setPlaybackRate(this.getPlaybackRate())};a.getPlaybackRateRange=function(){return[this.playbackRateMin_,this.playbackRateMax_]};a.updatePlaybackRateGUI=function(){var f=this.getControls();var g=f.componentDict_.playbackRateButton;if(g){var l=g.getElement();var j=this.playbackRateMax_;var e=Math.floor(this.playbackRateMin_)+0.5;var k=[];for(var h=e;h<=j;h+=0.5){k.push(h)}l.setAttribute("data-list",k.join(","));f.componentDict_.playbackRateButton.updatePlaybackRateList()}};a.setLoopFlg=function(e){this.CriLaP114=e;if(this.timeManager_){this.timeManager_.setLoop(e)}};a.getLoopFlg=function(){var e=this.CriLaP114;if(this.timeManager_){e=this.timeManager_.getLoop()}return e};a.setProhibitTimeMsRange=function(f,h){var e=this.timeManager_;if(f==null&&h==null){e.setProhibitTimeMsRange(null,null);return}var k=this.CriLaP111;var i=k.getDuration();var j=k.CriLaP115;if(f==null||f<0){f=0}var g=h*j/1000;if(h==null||i<g){h=(i/j)*1000}e.setProhibitTimeMsRange(f,h)};a.getProhibitTimeMsRange=function(){var f=this.timeManager_;var e=f.prohibitFrameRange_.begin;var k=f.prohibitFrameRange_.end;if(e==null&&k==null){return null}var i=this.CriLaP111;var h=i.CriLaP115;var g=e*1000/h;var j=k*1000/h;return[g,j]};a.isSeeking=function(){var e=this.timeManger_;return Boolean(e)&&e.isSeeking()};a.syncAudioPlayback_=function(g,l,j){var k=this;function h(o){var q=k.getCurrentSceneFrameRate();var n=j-l.getStartFrame();var p=n/q*1000;o.setTimeMs(p)}var e=l.resource;var i=null;if(e!=null&&e.getType()==CriLaResourceType.VIDEO){i=e.getAudioWrapper();if(i==null){return}}else{return}var m=l.isVisibleAtSceneFrame(j);if(m==false){i.pause();return}var f=this.getStatus();if(f==CriLaPlayStatus.PLAYING){if(g==true){h(i)}if(i.isPlaying()==false){if(g==false){h(i)}i.play()}}else{i.pause()}};a.syncSubAudioPlaybackAll_=function(h){var k=this.getCurrentScene();var j=this.getFrame();var e=k.getNumLayers();for(var g=0;g<e;g++){var f=k.getLayerByIndex(g);this.syncAudioPlayback_(h,f,j)}};a.setVolume=function(l){var m=this.isMuted();l=CriGrxMath.clamp(0,100,l);if(CriUAChecker.isSmallScreen()){l=l>0?100:0}var p=this.getCurrentVideoPlayer();if(p){p.setSoundVolume(l)}for(var k=0;k<this.subVideoPlayerList_.length;k++){var g=this.subVideoPlayerList_[k];g.setSoundVolume(l)}var f=this.getCurrentAudioPlayer();if(f){f.setSoundVolume(l)}if(this.pluginVideoGroup){var e=this.getNextVideoPlayer();if(e){e.setSoundVolume(l)}}this.soundVolume_=l;var n=this.isMuted();var o=this.timeManager_;if(m!==n&&o){var j=this.getCurrentSceneName();var h=o.getFrame();this.CriLaP11k.createLog(j,h,n)}this.dispatchEvent(CriLaEvent.VOLUME_CHANGE)};a.getVolume=function(){return this.soundVolume_};a.mute=function(f){f=Boolean(f);var e=this.isMuted();if(f===e){return}if(f){this.memoryVolume();this.setVolume(0)}else{this.setVolume(this.soundVolumeMemo_)}};a.isMuted=function(){var e=this.getCurrentMediaPlayer();return e?e.isMuted():true};a.memoryVolume=function(){if(this.soundVolume_!==0){this.soundVolumeMemo_=this.soundVolume_}};a.getPlaybackRangeFrame=function(){return this.timeManager_.getPlaybackRangeFrame()};a.setPlaybackRangeFrame=function(e,f){this.timeManager_.setPlaybackRangeFrame(e,f)};a.resetPlaybackRange=function(){var e=this.getCurrentSceneDuration();this.timeManager_.setPlaybackRangeFrame(0,e)};a.getAnalysisReport=function(){var e=this.CriLaP11k;e.updateReports();return e};a.clearAnalysisReport=function(){var e=this.CriLaP11k;var f=this.getCurrentScene();e.clear();e.createReport(f.name,f.getDuration())};a.drawCurrentSceneToCanvasForcibly=function(){if(this.timeManager_==null){return}var e=this.Sequencer;var f=e.CriLaP11d;e.CriLaP11d=true;this.draw();e.CriLaP11d=f};a.setPageJumpMode=function(){if(this.timeManager_!=null){this.timeManager_.setPageJumpMode()}};a.restoreFromPageJumpMode=function(){if(this.timeManager_!=null){this.timeManager_.restoreFromPageJumpMode();this.enabledReload=true}};a.onmain_=function(f){var l=this.updateMainLoopTime();if(l==false){return}var j=this.getStatus();if(j==CriLaPlayStatus.STOP){return}var m=this.isInvisible();if(this.canDrawCurrentScene()&&!m){if(this.isDrawingNeeded_()){if(this.CriLaP11a==true){this.fill()}else{this.clear()}this.draw()}}if(this.timeManager_){if(j==CriLaPlayStatus.PLAYING){var o=this.getDeltaTime();var h=this.getCurrentSceneFrameRate();var g=o/(1000/h);var i=this.getPlaybackRate();g*=i;var n=this.decelerateFunc_;if(n){var e=n(o);this.setPlaybackRate(e);if(e===0){this.pause()}}var k=this.canPlayCurrentScene();if(k==true){this.stepFrame(g,true)}}this.syncSubAudioPlaybackAll_(false)}};a.updateMainLoopTime=function(){var e=this.timeManager_;if(e==null){return false}e.updateMainLoopTime();return true};a.getDeltaTime=function(){var e=this.timeManager_;return e.getDeltaTime()};a.getStreamType=function(){var e=this.timeManager_;if(e==null){return null}return e.getStreamType()};a.setVideoPreloadType=function(e){if(this.videoPlayer_!=null){this.videoPlayer_.setVideoPreloadType(e)}if(this.audioPlayer_!=null){this.audioPlayer_.setVideoPreloadType(e)}this.videoPreloadType=e};a.getContainedLayers=function(e,j,i){i=Boolean(i);if(this.CriLaP111==null){return[]}var f=criLaMg_getTransformInverseMatrix(this.CriLaP116,this.Rotation,this.CriLaP118,this.CriLaP117,this.CriLaP119);var h=this.timeManager_.getFrame();var g=this.CriLaP111.GetContainLayers(e,j,h,i,f);return g};a.getContainedLayerName=function(e,i,f){var h=Boolean(f);var g=this.getContainedLayers(e,i,h);if(g.length==0){return""}return g[0].name};a.notifyMediaSrcChange=function(){var i=this.getCurrentMediaPlayer();if(!i){return}var h=i.getMediaElement();var f=this;function e(){i.notifyMediaSrcChange();f.timeManager_.notifyMediaSrcChange()}if(h.readyState>0){e()}else{h.addEventListener("loadedmetadata",function g(){h.removeEventListener("loadedmetadata",g);e()})}};a.pagejump=function(g,h){var f=this.getControls();var e=f.getScreenPlayVisibility();if(e==true){return}var j=h||"_self";if(this.isInIframe()){var i=new CriLaEventArgs(CriLaEvent.LINK_REQUESTED,this,{url:g,target:j});this.dispatchEvent(CriLaEvent.LINK_REQUESTED,i)}else{window.open(g,j)}};a.setRenderTarget=function(e){this.Sequencer.setRenderTarget(e)};a.setLuminanceAdjustMode=function(e){};a.getLuminanceAdjustMode=function(){return null};a.setLuminanceAdjustSpeed=function(e){};a.getLuminanceAdjustSpeed=function(){return null};a.setLuminanceAdjustExposureValue=function(e){};a.getLuminanceAdjustExposureValue=function(){return null};a.setLuminanceAdjustExposureBias=function(e){};a.getLuminanceAdjustExposureBias=function(){return null};a.addAudioToCurrentScene=function(e){return null};a.addAudioBySceneIndex=function(f,e){return null};a.removeAudioFromCurrentScene=function(e){return null};a.removeAudioBySceneIndex=function(f,e){return null};a.setSeekStyle=function(e){var f=e.deny==CriLaSeekStyle.FORWARD?CriLaSeekStyle.BACK:CriLaSeekStyle.ALL;this.seekStyle=f;if(this.timeManager_){this.timeManager_.setSeekStyle(this.seekStyle)}};a.getCompanyCode=function(){var e=this.getTrackingCode();if(e!=""){e=e.split("-");e=e.length>1?e[0]:e}return e};a.showUnavailable=function(j,g){var h=this.getCanvas();h.height=g;h.width=j;var f=h.parentNode;f.style.width="100%";this.resizeCanvasStyle_(j);var e=document.createElement("div");var i=document.createElement("p");if(h.clientWidth<600){e.className="la-view-limit-error la-view-limit-error--xs"}else{e.className="la-view-limit-error"}i.className="la-view-limit-error-message";f.appendChild(e);e.appendChild(i);i.innerHTML="<span>この動画は</span><span>現在再生できません</span>";this.changeViewLimitErrorPosition(e,i);window.addEventListener("resize",function(){if(e.clientWidth<600){e.classList.add("la-view-limit-error--xs")}else{e.classList.remove("la-view-limit-error--xs")}})};a.changeViewLimitErrorPosition=function(f,h){var e=CriLaRectangle.createFromViewPort();var g=h;if(e.bottom<g.offsetTop){f.classList.add("la-view-limit-error--top")}};a.reloadMedia=function(){if(this.videoPlayer_){this.videoPlayer_.reload()}if(this.subVideoPlayerList_){this.subVideoPlayerList_.forEach(function(e){e.reload()})}if(this.audioPlayer_){this.audioPlayer_.reload()}};a.getAssetURLForAuthor=function(){for(var f=0;f<this.resourceList.length;f++){var e=this.resourceList[f].getFullUrl(this.baseResourceDir_,this.sharedResourceDir_);if(e&&e!=""){return e}}return""}})(CriLaMgPlayerCommon.prototype);function CriLaC001(a){CriLaMgPlayerCommon.call(this);this.setEventDispatcher_(a);this.requireStop_=false;this.segmentCount_=1;this.loader_=null;this.enabledReload=false;if(this.initPluginVideoGroup_){this.initPluginVideoGroup_()}}(function(b,a){CriLaPolyfill.Object.setPrototypeOf(b,a);b.setup=function(c){var d=a.setup.call(this,c);if(!d){return false}var e=this.getSceneByIndex(0);this.CriLaM112();this.setupTimeManagerAndCurrentScene(e,this.hasPass);this.setupControl();this.setupPlayerSize();this.reattachPlayerToCanvas();return true};b.CriLaM112=function(){for(var c=0;c<this.resourceList.length;c++){var d=this.resourceList[c];if(d.getType()!=CriLaResourceType.VIDEO){continue}if(this.preDecodeVideoEnabled_==true){d.enablePreDecode(true,this.preDecodeVideoFPS_,this.preDecodeVideoQuality_)}if(this.videoRenderTargetType_=="canvas"){d.enableAudioSeparate(true)}}};b.setupTimeManagerAndCurrentScene=function(f,g){var e=this.getCanvas();var d=null;if(this.multiVideoEnabled_==true&&f.hasAudio()){var h=new CriLaC0uu();this.audioPlayer_=h;this.registerAudioPlayer(h,this.resourceList,e);d=new CriLaC00R()}else{if(this.multiVideoEnabled_==true){d=new CriLaC00M()}else{if(f.hasVideo()&&f.hasAudio()){var c=new CriLaC00u();this.videoPlayer_=c;if(this.pluginVideoGroup){this.setVideoPlayerFront_(c)}var h=new CriLaC0uu();this.audioPlayer_=h;this.registerVideoPlayer(c,this.resourceList,e);this.registerAudioPlayer(h,this.resourceList,e);d=new VideoAudioTimeManager()}else{if(f.hasVideo()){var c=new CriLaC00u();this.videoPlayer_=c;if(this.pluginVideoGroup){this.setVideoPlayerFront_(c)}this.registerVideoPlayer(c,this.resourceList,e);d=new CriLaC00Q()}else{if(f.hasAudio()){var h=new CriLaC0uu();this.audioPlayer_=h;this.registerAudioPlayer(h,this.resourceList,e);d=new CriLaC00R()}else{d=new CriLaC00M()}}}}}this.timeManager_=d;this.setCurrentScene(f,g);d.initialize(this);d.setSeekStyle(this.seekStyle);d.setLoop(this.CriLaP114)};b.setupControl=function(){var c;var d=this.CriLaP111;if(d.hasVideo()){c=this.setupVideoControl}else{if(d.hasAudio()){c=this.setupAudioControl}else{c=this.setupDefaultControl}}if(this.isEnabledControlTemplate()===true){c=this.setupTemplateControl}c.call(this);if(this.initialControlStyle_){this.setControlStyle(this.initialControlStyle_)}};b.registerVideoPlayer=function(c,f,d){var e=CriLaPolyfill.Array.find(f,function(g){return g.getType()==CriLaResourceType.VIDEO||g.getType()==CriLaResourceType.SEQUENCE_VIDEO});this.registerVideoPlayerFromResource(c,e,d)};b.registerVideoPlayerFromResource=function(d,f,e){d.initialize(this.baseResourceDir_,f,e,this.CriLaP11k,this.CriLaP11m,this.tapPlayEnabled_,this.segmentCount_,this.videoPreloadType,this);var c=this.Sequencer;if(d.getRenderType()==LaVideoRenderType.CANVAS){c.CriLaP11d=true;this.enableBackgroundFill(true)}else{c.CriLaP11d=false;this.enableBackgroundFill(false)}c.setVideoPlayer(d);if("playlistDidLoad" in f){f.playlistDidLoad=this.sequencePlaylistDidLoad.bind(this)}if("segmentVideoReload" in f){f.segmentVideoReload=this.sequenceVideoReload.bind(this)}};b.registerAudioPlayer=function(d,e,c){d.initialize(this.baseResourceDir_,e,c,this.CriLaP11k,this.CriLaP11m,this.tapPlayEnabled_,this.segmentCount_,this.videoPreloadType,this)};b.sequencePlaylistDidLoad=function(c){this.getCurrentVideoPlayer().streamManager_.requestLoad()};b.sequenceVideoReload=function(c){var d=this.getTimeMs()/1000;this.getCurrentVideoPlayer().streamManager_.reload(d);this.timeManager_.setTimeMs(d*1000)};b.resizeCanvasAttr_=function(e,c){var d=this.getCanvas();if(!e&&!c){return}if(e&&!c){c=Math.round(e*d.height/d.width)}else{if(!e&&c){e=Math.round(c*d.width/d.height)}}a.resizeCanvasAttr_.call(this,e,c);this.resizeCurrentSceneToCanvas();this.requestRedraw()};b.fullscreenImpl_=function(c){this.resizeCanvasContain(c)};b.reattachPlayerToCanvas=function(){if(this.Sequencer.CriLaP11d){this.Sequencer.CriLaP11b=this.getCurrentVideoPlayer().getMediaElement();this.Sequencer.CriLaP11e=this.getCurrentVideoPlayer().getAudioElement();if(this.pluginVideoGroup){var c=this.getNextVideoPlayer();if(c){c.getAudioElement().currentTime=0}}}};b.zoomTo=function(q,p){q=q<1?1:q>4?4:q;var m=this.getCurrentSceneWidth();var g=this.getCurrentSceneHeight();var s=p||CriGrxVector2.createFromXY(0,0);var f=s.x/m+0.5;var e=s.y/g+0.5;var k=f*m*(q-1);var j=e*g*(q-1);var i=-s.x-k;var n=-s.y-j;var h=m*q;var l=g*q;var o=i+h;var d=n+l;if(i>0){i=0}else{if(m-o>0){i=m-h}}if(n>0){n=0}else{if(g-d>0){i=g-l}}var c=i;var r=n;this.setPositionXY(c,r);this.setScaleXY(q,q)};b.createRendererFromCanvas_=function(c){return new CriLaMgRenderer2d(c,this.CriLaP11m)};b.addAudioToCurrentScene=function(c){return this.addAudioToScene(c,this.getCurrentScene())};b.addAudioBySceneIndex=function(d,c){return this.addAudioToScene(d,this.getSceneByIndex(c))};b.removeAudioFromCurrentScene=function(c){return this.removeAudioFromScene(c,this.getCurrentScene())};b.removeAudioBySceneIndex=function(d,c){return this.removeAudioFromScene(d,this.getSceneByIndex(c))};b.addAudioToScene=function(q,x){var r=this.isPaused();if(x==null||!q){return null}var z=q.split("/");z=z[z.length-1];var k=z+"_runtime";var f="footage#"+k;var e=0;for(var t=0;t<this.CriLaP113.length;t++){for(var s=0;s<this.CriLaP113[t].layerList_.length;s++){var A=this.CriLaP113[t].layerList_[s].resourceID;if(A.indexOf(f)!==-1){var u=Number(A.slice(f.length));if(!u||u>=e){e=u+1}}}}var o=String(e);var v=k+o;f+=o;var d="layer#"+k;var g=0;for(var t=0;t<this.CriLaP113.length;t++){for(var s=0;s<this.CriLaP113[t].layerList_.length;s++){var l=this.CriLaP113[t].layerList_[s].id;if(l.indexOf(d)!==-1){var w=Number(l.slice(d.length));if(!w||w>=g){g=w+1}}}}var h=String(g);var p=k+h;d+=h;this.pause();var c=x.getDuration();var n=new CriLaResourceAudio(f,v);n.initializeMedia();n.url=q;n.width=0;n.height=0;n.duration=c;this.resourceList.push(n);var m=Array.prototype.indexOf.bind(this.resourceList);this.CriLaP113.forEach(function(i){i.setResourceIndexResolver(m)});var y=new CriLamgLayer(d,p);y.setDuration(c);y.resourceID=f;y.resource=n;x.layerList_.push(y);x.audioResourceIndex_=null;this.setupTimeManagerAndCurrentScene(x);if(this.multiVideoEnabled_==true){this.audioPlayer_.setup(x,this.resourceList,this.canvas_,this.Sequencer)}this.setControlStyle({volumeButton:true});if(!r){this.play()}return d};b.removeAudioFromScene=function(l,g){var c=this.isPaused();if(g==null){return false}this.pause();var o=l;var n=-1;var d;g.layerList_.forEach(function(j,i){if(j.id===o){n=i;d=j.resourceID}});var m=false;for(var f=0;f<this.CriLaP113.length;f++){for(var e=0;e<this.CriLaP113[f].layerList_.length;e++){var k=this.CriLaP113[f].layerList_[e].resourceID;if(k===d){m=true;break}}}if(!m){var h=-1;this.resourceList.forEach(function(j,i){if(j.type==CriLaResourceType.AUDIO){h=i}});if(h>-1){this.resourceList.splice(h,1)}}if(n>-1){g.layerList_.splice(n,1);g.audioResourceIndex_=null;this.audioPlayer_=null;this.setupTimeManagerAndCurrentScene(g);if(this.multiVideoEnabled_==true&&this.audioPlayer_!=null){this.audioPlayer_.setup(g,this.resourceList,this.canvas_,this.Sequencer)}if(!g.hasAudio()){this.setControlStyle({volumeButton:false})}}else{return false}if(!c){this.play()}return true}})(CriLaC001.prototype,CriLaMgPlayerCommon.prototype);function CriLaC005(){this.image=null;this.retryCount_=0;this.isComplete_=false;this.isLoadFailed_=false;this.isComplete=function(){if(this.refType>0&&this.refImage==null){return false}return this.isComplete_&&this.image&&this.image.complete};this.srcRectEnabled=false;this.srcX=0;this.srcY=0;this.srcWidth=0;this.srcHeight=0;this.destRect=null;this.refImage=null;this.refType=0;this.url_=""}(function(a){a.finalize=function(){this.unload();this.url_="";delete this.image};a.setImage=function(b){this.image=b;this.isComplete_=true;this.url_=b.src};a.requestLoad=function(b){var c=b||this.url_;if(!c){return}if(this.isComplete_==true){return}this.isComplete_=false;if(this.image==null){this.image=new Image()}var d=this;this.image.onload=function(){d.isComplete_=true};this.image.onerror=function(f){d.retryCount_++;if(d.retryCount_>10){d.isLoadFailed_=true}else{if(d.image){d.image.src=c+"?"+d.retryCount_}}};this.image.src=c;this.url_=c};a.setSrcRect=function(b){this.setSrcRect_(b.left,b.top,b.getWidth(),b.getHeight())};a.setSrcRect_=function(c,e,d,b){this.srcRectEnabled=true;this.srcX=c;this.srcY=e;this.srcWidth=d;this.srcHeight=b};a.unload=function(){if(this.image){this.image.src="";this.image=null;this.isComplete_=false}};a.isDrawable=function(){var b=this.image;return this.isComplete()&&b.width>=1&&b.height>=1};a.drawWH=function(e,b,c){if(!this.isDrawable()){return}var h=this.destRect||CriLaRectangle.createFromXYWH(0,0,b,c);if(this.refImage){e.save();e.beginPath();var g=h.right;var d=h.bottom;e.rect(0,0,b,h.top);e.rect(0,d,b,c-d);e.rect(0,0,h.left,c);e.rect(g,0,b-g,c);e.closePath();e.clip();this.refImage.drawWH(e,b,c);e.restore()}var f=this.image;if(!this.srcRectEnabled){e.drawImage(f,h.left,h.top,h.getWidth(),h.getHeight())}else{e.drawImage(f,this.srcX,this.srcY,this.srcWidth,this.srcHeight,h.left,h.top,h.getWidth(),h.getHeight())}}})(CriLaC005.prototype);function CriLaPlayReport(b,a){this.sceneName=b;this.length=a;this.retentionFrame=0}function CriLaPlayLog(c,a,b){this.sceneName=c;this.startFrame=a;this.endFrame=a;this.muted=b}function CriLaAnalysisReport(){}function CriLaAnalytics(a){CriLaAnalysisReport.call(this);this.playReports=[];this.playLogs=[];this.lastMuted_=true;this.CriLaP11m=a}(function(a){a.clear=function(){this.playReports=[];this.playLogs=[];this.lastMuted_=true};a.createReport=function(e,d){var c=this.playReports.length;if(this.playReports.some(function(f){return f.sceneName===e})){return}var b=new CriLaPlayReport(e,d);this.playReports.push(b)};a.createLog=function(c,g,h,d){var e=d||0;var j=this.lastMuted_;if(h!=null){j=h;this.lastMuted_=j}var i=this.playLogs;var f=false;if(i.length>0){var b=i[i.length-1];if(b.endFrame-b.startFrame<=e){f=true}}var k=new CriLaPlayLog(c,g,j);if(f==true){i[i.length-1]=k}else{this.playLogs.push(k);this.CriLaP11m.dispatch(CriLaEvent.CREATE_LOG)}};a.updateSceneLength=function(d,c){var b=this.playReports;if(b.length<=0){return}var e=b[b.length-1];if(e.sceneName!=d){return}e.length=c};a.updateLog=function(f,e,c){var b=this.playLogs;var h=b.length;var d=this.lastMuted_;if(c!=null){d=c;this.lastMuted_=d}if(h==0){this.createLog(f,e,d);h=b.length}var g=b[h-1];if(e>g.endFrame){g.endFrame=e}this.CriLaP11m.dispatch(CriLaEvent.UPDATE_LOG)};a.updateReports=function(){var h={};var e=this.playLogs;for(var l=0;l<e.length;l++){var j=e[l];var c=j.sceneName;if(h[c]==undefined){h[c]=[]}h[c].push(j)}var b=this.playReports.length;for(var l=0;l<b;l++){var k=this.playReports[l];var e=h[k.sceneName];if(e==undefined){continue}var g=this.mergeLogs_(e);var d=g.length;var m=0;for(var n=0;n<d;n++){var j=g[n];var f=j.endFrame-j.startFrame;m+=f}k.retentionFrame=m}};a.mergeLogs_=function(b){b.sort(function(k,i){var l=k.startFrame;var j=i.startFrame;if(l<j){return -1}if(l>j){return 1}return 0});var h=b.length;for(var d=0;d<h;d++){var c=b[d];var f=new CriLaPlayLog(c.sceneName,c.startFrame,c.muted);f.endFrame=c.endFrame;b[d]=f;for(var e=d+1;e<h;e++){var g=b[e];if(f.startFrame>g.endFrame||g.startFrame>f.endFrame){break}f.startFrame=Math.min(f.startFrame,g.startFrame);f.endFrame=Math.max(f.endFrame,g.endFrame);b.splice(e,1);e--;h--}}return b}})(CriLaAnalytics.prototype);function CriLaAdvancedAnalytics(a){this.player_=a;this.clientId_=CriLaId.getClientId();this.watchId_=CriLaId.getIdFromObject(a);this.processId_=CriLaId.createUniqueId();this.lastSentDataStrList_=[]}(function(a){CriLaAdvancedAnalytics.PlayTypeEnum={thumbnail:1,inline:2,rotate360:3,"allaround-sphere":4};CriLaAdvancedAnalytics.AggregationTypeEnum={rotate360:2,"allaround-sphere":3};CriLaAdvancedAnalytics.KeyMap={aggreType:"ag",playType:"pt",clientId:"ci",processId:"pi",watchId:"wi",localTime:"lt",trackingCode:"tc",begin:"be",end:"en",total:"tl",muted:"mu",location:"lo",title:"tt",parentLocation:"pl",sceneName:"sn"};a.updateProcessId=function(b){this.processId_=b||CriLaId.createUniqueId()};a.send=function(d,c){var b=this.getData();if(c){this.updateProcessId()}if(!b){return false}var e=JSON.stringify(b);d(e);return true};a.getData=function(){var c=this;var d=this.player_;var b=d.getAnalysisReport();var g=b.playLogs;var f=g.length;if(!f){return null}var h=this.lastSentDataStrList_;var e=g.filter(function(k,j){var m=h[j];var l=JSON.stringify(k);if(m===l){return false}else{h[j]=l;return true}});e=e.map(function(i){return c.createDatum(i)});e=CriLaAdvancedAnalytics.formatData(e);if(!e.records.length){return null}return e};a.createDatum=function(r){var i=this;var q=i.player_;var j=q.getContentType();var g=CriLaAdvancedAnalytics.PlayTypeEnum[j]||0;var d=CriLaAdvancedAnalytics.AggregationTypeEnum[j]||1;var k=q.getCurrentSceneFrameRate();var m=r.startFrame;var h=r.endFrame;var p=r.muted?1:0;var f=r.sceneName;var o=q.getCurrentSceneDuration();if(o-h<=1){h=o}var e=function(s){return Math.round(s/k*1000)};var l=e(m);var c=e(h);var b=e(o);var n="";if(window!==window.parent){n=document.referrer}return{aggreType:d,playType:g,clientId:i.clientId_,processId:i.processId_,watchId:i.watchId_,localTime:Date.now(),trackingCode:q.getTrackingCode(true),begin:l,end:c,total:b,muted:p,location:location.href,title:document.title,parentLocation:n,sceneName:f}};CriLaAdvancedAnalytics.formatData=function(b){var c=b.map(CriLaAdvancedAnalytics.formatDatum);c=c.filter(Boolean);c=c.map(function(d){return{data:d,"partition-key":d[CriLaAdvancedAnalytics.KeyMap.clientId]}});c={records:c};return c};CriLaAdvancedAnalytics.formatDatum=function(b){var f={};if(b.begin===b.end){return null}var d=CriLaAdvancedAnalytics.KeyMap;for(var c in d){var g=d[c];f[g]=b[c]}for(var e in f){f[e]=encodeURIComponent(f[e])}return f}})(CriLaAdvancedAnalytics.prototype);function CriLaC00t(){this.canvas_=null;this.divMediaCanvas_=null;this.frameUpdateFunc_=null;this.durationUpdateFunc_=null;this.getTimeFunc_=null;this.scene_=null;this.CriLaP11m=null;this.CriLaP11k=null;this.CriLaP11l=false;this.tapPlayEnabled_=true;this.baseResourceDir_="";this.CriLaP114=false;this.segmentCount_=1;this.lamgPlayer_=null;this.parentDiv_=null;this.isLoaded_=false;this.isSeeked_=false;this.mediaTimeObject_=null;this.firstMediaEndedEvent_=null;this.fileUrl_=null;if(this.initPluginVideoGroup_){this.initPluginVideoGroup_()}}(function(a){a.initialize=function(l,b,d,j,k,f,e,c,i){var h=this.getMediaResource_(b);if(!h){return false}var g=this.initializeFromResource(l,h,d,j,k,f,e,c,i);return g};a.initializeFromResource=function(o,e,d,l,m,i,h,b,k){if(!e){return false}this.CriLaP1e8=e;this.baseResourceDir_=o;this.canvas_=d;this.CriLaP11k=l;this.CriLaP11m=m;this.tapPlayEnabled_=i;if(h!=null){this.segmentCount_=h}this.lamgPlayer_=k;var q=this.divMediaCanvas_=d.parentNode;var j=q.getElementsByTagName(this.MEDIA_TYPE);var n=null;var p=null;if(j.length===0){p=this.createMediaWrapperElem_(d);this.parentDiv_=p;q.insertBefore(p,d)}else{n=j[0];var g=this.getMediaWrapperClassName_();p=q.getElementsByClassName(g)[0]}var c=e.getElement();if(c==null){e.initializeMedia();c=e.getElement();this.setupMedia_(c)}this.mediaTimeObject_=c;if(n==null){p.appendChild(c)}else{var f=this.createMediaWrapperElem_(d);this.parentDiv_=f;q.insertBefore(f,d);f.appendChild(c)}this.applyPreloadType_(b);this.lamgPlayer_.mute(true);this.registerEvents_();return true};a.applyPreloadType_=function(b){var c="";if(this.lamgPlayer_.isSegmented()){c="auto"}else{if(b!=null){c=b}else{c=CriUAChecker.isMobile()?"metadata":"auto"}}this.setVideoPreloadType(c)};a.getResourceUrl=function(){return this.CriLaP1e8.getFullUrl(this.baseResourceDir_,this.sharedResourceDir_)};a.getMediaResource_=function(b){var c=this.getMediaResources_(b);return c.length===0?null:c[0]};a.getMediaResources_=function(b){return b?b.filter(this.getMediaResourcePred_):[]};a.getRenderType=function(){return this.renderType_};a.getResource=function(){return this.CriLaP1e8};a.getMediaElement=function(){if(this.CriLaP1e8==null){return null}return this.CriLaP1e8.getElement()};a.setupMedia_=function(b){};a.createMediaWrapperElem_=function(d){var b=document.createElement("div");b.classList.add(this.getMediaWrapperClassName_());b.classList.add("lac-div__fit");var c=b.style;c.zIndex=d.style.zIndex;return b};a.getMediaWrapperClassName_=function(){return"lac-"+this.MEDIA_TYPE+"-div"};a.resetMediaDuration_=function(b){this.updateAnalyticsSceneLength_()};a.registerEvents_=function(){var b=this.CriLaP1e8.getElement();b.addEventListener("canplay",this.mediaCanplay_.bind(this),false);b.addEventListener("loadedmetadata",this.mediaLoadedMetaData_.bind(this),false);b.addEventListener("progress",this.getLoadedFrames_.bind(this),false)};a.getLoadedFrames_=function(k){var f=k.target.buffered;var j=[];var g=this.scene_.getFramerate();for(var d=0;d<f.length;d++){var c={};c.start=f.start(d)*g;c.end=f.end(d)*g;j.push(c)}var h=this.CriLaP11m.createEvent(CriLaEvent.LOADED_FRAME_CHANGE,{loadedFrames:j});this.CriLaP11m.dispatch(CriLaEvent.LOADED_FRAME_CHANGE,h)};a.mediaCanplay_=function(b){this.isLoaded_=true};a.mediaLoadedMetaData_=function(d){var c=this.scene_.getDuration();var b=33;if(c<=b){this.resetMediaDuration_(d.target)}};a.updateAnalyticsSceneLength_=function(){var d=this.scene_;var c=d.getName();var b=d.getDuration();this.CriLaP11k.updateSceneLength(c,b)};a.setSoundVolume=function(b){this.getSoundTargets_().forEach(function(c){if(c){c.volume=b/100;c.muted=(b===0)}})};a.isMuted=function(){return this.getSoundTargets_().some(function(b){return b.muted})};a.isLoaded=function(){return this.getMediaElement().readyState>=3};a.getSoundTargets_=function(){var c=[];var b=this.getMediaElement();if(b){c.push(b)}return c};a.getTimeManagerElement=function(){return this.getMediaElement()};a.setSource=function(b){this.load(b)};a.getMediaResourcePred_=function(b){return false};a.MEDIA_TYPE="";a.load=function(c){this.isLoaded_=false;var b=this.getResource();if(b!=null){b.loadMedia(c)}};a.unload=function(){this.isLoaded_=false;if(this.streamManager_){this.streamManager_.unload()}else{var b=this.getResource();if(b!=null){b.unloadMedia()}}};a.reload=function(){if(this.streamManager_){this.streamManager_.reload()}else{var b=this.getResourceUrl();this.load(b);this.fileUrl_=b}};a.isSetSource=function(){var b=this.CriLaP1e8.getElement();return b.networkState==1||b.networkState==2?true:false};a.notifyMediaSrcChange=function(){var b=this.getMediaElement();this.resetMediaDuration_(b)};a.isEmptySrc=function(){return this.CriLaP1e8.isEmpty()};a.isRequiredReload=function(){var b=this.CriLaP1e8.getElement();if(b.buffered.length!=0){return false}else{if(this.isEmptySrc()==true){return false}else{if(b.readyState!=1&&b.networkState!=1){return false}}}return true};a.setMediaPreloadType=function(c){var b=this.CriLaP1e8.getElement();if(b!=null){b.setAttribute("preload",c)}};a.setVideoPreloadType=a.setMediaPreloadType})(CriLaC00t.prototype);function CriLaC00u(){CriLaC00t.call(this);this.blobUrl_=null;this.renderType_=LaVideoRenderType.VIDEO;this.mouseMoveFunc_=function(a){};this.blobXhr_=null;this.streamManager_=null;if(this.initPluginVideoGroup_){this.initPluginVideoGroup_()}}var LaVideoRenderType={VIDEO:0,CANVAS:1};Object.freeze(LaVideoRenderType);(function(b){var a=CriLaC00t.prototype;CriLaPolyfill.Object.setPrototypeOf(b,a);b.initialize=function(l,e,c,j,k,h,g,d,i){if(a.initializeFromResource.apply(this,arguments)===false){return false}var f=i.getVideoRenderTargetType();this.updateRenderType_(f);if(this.renderType_==LaVideoRenderType.CANVAS){CriLaHtmlCss.setVisibility(this.parentDiv_,false)}if(this.CriLaP1e8.type===CriLaResourceType.SEQUENCE_VIDEO){if(this.CriLaP1e8.sequenceType===CriLaSequenceType.MSE){this.streamManager_=new CriLaStreamManagerMse(this.CriLaP1e8);this.streamManager_.initialize()}else{if(this.CriLaP1e8.sequenceType===CriLaSequenceType.HLS){this.streamManager_=new CriLaStreamManagerHls(this.CriLaP1e8);this.streamManager_.initialize(true)}}}this.lamgPlayer_.mute(true);return true};b.loadBlobResource_=function(g,e,d){if(this.fileUrl_==e){if(d!=null){d.setupFinishedCallback(g)}}else{var i=this.CriLaP1e8;this.fileUrl_=e;var j=new XMLHttpRequest();j.open("GET",e,true);j.responseType="blob";var h=CriLiveActSharedSettings.getAdditionalRequestHeaders_();for(var f in h){j.setRequestHeader(f,h[f])}j.onload=function(m){this.blobXhr_=null;var k=j.response;var l=window.URL.createObjectURL(k);this.blobUrl_=l;i.loadMedia(l);if(d!=null){d.setupFinishedCallback(g)}}.bind(this);var c=function(k){this.blobXhr_=null}.bind(this);j.onerror=c;j.onabort=c;j.ontimeout=c;j.send(null);this.blobXhr_=j}};b.setup=function(i,h,g,c){if(i.hasVideo()==false){return}function d(n){var j=n.getLayerList();for(var m=0;m<j.length;m++){var l=j[m];var o=l.refScene;if(o!=null){var k=d(o);if(k!=null){return k}}else{if(l.resource!=null&&l.resource.isVideo()){return l}}}return null}var e=d(i);var f=this.setupFromLayer(i,e,g,c);return f};b.setupFromLayer=function(g,h,e,j,k){if(g.hasVideo()==false){return}var f=h.resource;this.CriLaP1e8=f;var d=f.getElement();if(d==null){f.attachElement(this.mediaTimeObject_);d=f.getElement()}this.scene_=g;if(f.type==CriLaResourceType.VIDEO){var c=this.getResourceUrl();var i=this;if(this.isSrcBlobbing()==true){this.loadBlobResource_(i,c,k)}else{f.loadMedia(c);if(k!=null){k.setupFinishedCallback(i)}}}e.style.position="relative";this.rotateMediaWrapperElem_(d.parentNode,h.rotation.z,g.Width/g.Height)};b.getVideo=function(){return this.CriLaP1e8.getElement()};b.getVideoElement=function(){return this.CriLaP1e8.getElement()};b.setMouseMoveCallback=function(c){this.mouseMoveFunc_=c};b.load=function(c){a.load.call(this,c)};b.unload=function(){a.unload.call(this)};b.resetMediaDuration_=function(d){var g=d.duration;if((g!==g)){return}var f=this.scene_;var c=0;var e=f.getFramerate();f.layerList_.forEach(function(h){var i=h.startFrame_;var j=h.duration_;if(h.resource&&h.resource.isVideo()){j=g*e}if(c<j+i){c=j+i}});f.setDuration(c);this.updateAnalyticsSceneLength_();this.CriLaP11m.dispatch(CriLaEvent.SEEKBAR_RESET_NEEDED)};b.clicked_=function(c){if(this.scene_.hasVideo()){this.mouseMoveFunc_(c)}};b.isSrcBlobbing=function(){var c=CriLiveActSharedSettings.getAdditionalRequestHeaders_();if(c!=null&&0<Object.keys(c).length){return true}return false};b.updateRenderType_=function(d){var e=CriUAChecker.getOS();var f=CriUAChecker.getOSVersion();var c=!(e===CriUAOS.iOS&&f<10);if(d=="auto"){this.renderType_=c?LaVideoRenderType.VIDEO:LaVideoRenderType.CANVAS}else{if(d=="video"){this.renderType_=LaVideoRenderType.VIDEO}else{this.renderType_=LaVideoRenderType.CANVAS}}};b.getAudioElement=function(){var c=null;var d=this.CriLaP1e8;if(d!=null){var e=d.getAudioWrapper();if(e!=null){c=e.getElement()}}return c};b.getMediaResourcePred_=function(c){return c.isVideo()};b.MEDIA_TYPE="video";b.registerEvents_=function(){a.registerEvents_.call(this);var f=this.CriLaP1e8.getElement();var d=this.canvas_;var c=this;["click","dblclick","mousedown","mouseenter","mouseleave","mousemove","mouseout","mouseover","mouseup"].forEach(function(g){f.addEventListener(g,function(j){var k={};for(var i in j){k[i]=j[i]}var h=new CriLaPolyfill.Event.MouseEvent(g,k);d.dispatchEvent(h)},false)});["pointerover","pointerenter","pointerdown","pointermove","pointerup","pointercancel","pointerout","pointerleave","gotpointercapture","lostpointercapture"].forEach(function(g){f.addEventListener(g,function(i){var k={};for(var h in i){k[h]=i[h]}var j=new CriLaPolyfill.Event.PointerEvent(g,k);d.dispatchEvent(j)},false)});var e=this;d.addEventListener("click",this.clicked_.bind(this),false);d.addEventListener("mousemove",function(g){e.mouseMoveFunc_(g)},false);f.addEventListener("contextmenu",function(g){g.preventDefault()},false)};b.getSoundTargets_=function(){var c=a.getSoundTargets_.call(this);var d=this.getAudioElement();if(d){c.push(d)}return c};b.getTimeManagerElement=function(){var c=this.CriLaP1e8.getElement();return c};b.rotateMediaWrapperElem_=function(h,g,e){var c=Math.round(g/Math.PI*180);var f=Math.round(c/90);if(f<0){var i=Math.ceil(-f/4);f+=i*4}else{f=(4+f)%4}if(f===0){return}var d=h.style;if(f===2){d.transformOrigin="center";d.transform="rotate(180deg)";return}d.width=(100/e)+"%";d.height=(100*e)+"%";if(f===1){d.left="100%";d.right="";d.top="0";d.transformOrigin="left top";d.transform="rotate(90deg)"}else{d.right="100%";d.left="";d.top="0";d.transformOrigin="right top";d.transform="rotate(-90deg)"}};b.setupMedia_=function(d){if(this.isSrcBlobbing()){}else{var c=this.getResourceUrl();this.fileUrl_=c}d.classList.add("liveact-video");d.classList.add("lac-div__fit");d.setAttribute("playsinline","true");return d}})(CriLaC00u.prototype);function CriLaC0uu(){CriLaC00t.call(this);this.divMediaCanvas_=null}(function(b){var a=CriLaC00t.prototype;CriLaPolyfill.Object.setPrototypeOf(b,a);b.setup=function(i,h,e,c){var f=i.getAudioResourceIndex();var g=h[f];this.CriLaP1e8=g;var d=this.getResourceUrl();this.CriLaP1e8.loadMedia(d);this.scene_=i};b.getMediaResourcePred_=function(c){return c.type===CriLaResourceType.AUDIO};b.MEDIA_TYPE="audio";b.setupMedia_=function(d){var c=this.getResourceUrl();this.fileUrl_=c};b.createMediaWrapperElem_=function(d){var c=a.createMediaWrapperElem_.call(this,d);c.style.pointerEvents="none";return c}})(CriLaC0uu.prototype);var CriLaControlEvent={PLAY_BUTTON_CLICKED:"playbuttonclicked",SEEK:"seek",SCREEN_PLAY_BUTTON_CLICKED:"screenplaybuttonclicked",VOLUME_BUTTON_CLICKED:"volumebuttonclicked",LOOP_BUTTON_CLICKED:"loopbuttonclicked",FULLSCREEN_BUTTON_CLICKED:"fullscreenbuttonclicked",ZOOM_IN_BUTTON_PRESSED:"zoominbuttonpressed",ZOOM_OUT_BUTTON_PRESSED:"zoomoutbuttonpressed",SWIPE_MODE_BUTTON_CLICKED:"swipemodebuttonclicked",GYRO_BUTTON_CLICKED:"gyrobuttonclicked",SEEK_START:"seekstart",SEEK_END:"seekend",CHAPTER_SEPARATOR_CHANGED:"chapterseparatorchanged",CHAPTER_SEPARATOR_ADDED:"chapterseparatoradded",PLAYBACK_RANGE_CHANGED:"playbackrangechanged",PLAYBACK_RANGE_RESET:"playbackrangereset",PLAYBACK_RANGE_ADJUSTMENT_MODE_CHANGED:"playbackrangeadjustmentmodechanged",PLAYBACK_RANGE_MOVE_START:"playbackrangemovestart",PLAYBACK_RANGE_MOVE_END:"playbackrangemoveend",PREV_FRAME_CLICKED:"prevframeclicked",NEXT_FRAME_CLICKED:"nextframeclicked",VOLUME_CHANGE_START:"volumechangestart",VOLUME_CHANGED:"volumechanged"};Object.freeze(CriLaControlEvent);var CriLaControlComponentName={SCREEN_PLAY_BUTTON:"screenPlayButton",PLAY_BUTTON:"playButton",SEEKBAR:"seekBar",TIME:"time",VOLUME_BUTTON:"volumeButton",LOOP_BUTTON:"loopButton",FULLSCREEN_BUTTON:"fullscreenButton",ZOOM_IN_BUTTON:"zoomIn",ZOOM_OUT_BUTTON:"zoomOut",SWIPE_MODE_BUTTON:"swipeMode",GYRO_BUTTON:"gyro",CHAPTER_BUTTON:"chapterButton",PLAYBACK_RANGE_BUTTON:"playbackRangeButton",PLAYBACK_RATE_BUTTON:"playbackRateButton",PREV_FRAME_BUTTON:"prevFrameButton",NEXT_FRAME_BUTTON:"nextFrameButton",VOLUME_SLIDER:"volumeSlider"};Object.freeze(CriLaControlComponentName);function CriLaPlayerControl(){this.lastAlpha_=1;this.componentDict_={};var a=document.createElement("div");this.controlElem_=a;this.rows_=[];this.wrapperElem_=null;this.time_=null;this.seekBar_=null;this.fadeTimeMs_=3500;this.showDuration_=3500;this.miniMenuFieldElem_=document.createElement("div");this.miniMenuDict_={};this.enabledTemplate_=false;this.enabledPlaybackRangeAdjustmentMode_=false;this.resetAlpha()}(function(a){a.setup=function(d,x){var l=this.wrapperElem_=d.parentNode;var m=this.controlElem_;m.style.opacity=1;var e=this.miniMenuFieldElem_;e.classList.add("lac-minimenu-field");m.appendChild(e);this.enabledTemplate_=x!=null;if(this.enabledTemplate_){CriLaPolyfill.Array.from(x.childNodes).forEach(function(z){m.appendChild(z)});this.rows_=CriLaPolyfill.Array.from(m.getElementsByClassName("lac-row"));this.rows_.forEach(function(z){this.registerRowEventCommon_(z)},this)}else{this.addRow()}var k=CriLaPlayerControlButton.create(CriLaControlComponentName.SCREEN_PLAY_BUTTON,this);CriLaHtmlCss.setVisibility(k.getElement(),false);this.addScreenPlayButton(k);var p=CriLaPlayerControlButton.create(CriLaControlComponentName.PLAY_BUTTON,this);var f=new CriLaC00X(d.parentNode,this);var h=new CriLaC00W(this);var j=CriLaPlayerControlButton.create(CriLaControlComponentName.VOLUME_BUTTON,this);var v=CriLaPlayerControlButton.create(CriLaControlComponentName.LOOP_BUTTON,this);var u=CriLaPlayerControlButton.create(CriLaControlComponentName.SWIPE_MODE_BUTTON,this);var n=CriLaPlayerControlButton.create(CriLaControlComponentName.GYRO_BUTTON,this);var c=CriLaPlayerControlPressButton.create(CriLaControlComponentName.ZOOM_IN_BUTTON,this);var o=CriLaPlayerControlPressButton.create(CriLaControlComponentName.ZOOM_OUT_BUTTON,this);var s=CriLaPlayerControlButton.create(CriLaControlComponentName.FULLSCREEN_BUTTON,this);var r=CriLaPlayerControlMiniMenuButton.create(CriLaControlComponentName.CHAPTER_BUTTON,this);var b=CriLaPlayerControlMiniMenuButton.create(CriLaControlComponentName.PLAYBACK_RANGE_BUTTON,this);var t=CriLaPlayerControlButton.create(CriLaControlComponentName.PREV_FRAME_BUTTON,this);var q=CriLaPlayerControlButton.create(CriLaControlComponentName.NEXT_FRAME_BUTTON,this);var y=new CriLaVolumeSliderComponent(d.parentNode,this);var w=CriLaPlayerControlMiniMenuButton.create(CriLaControlComponentName.PLAYBACK_RATE_BUTTON,this);this.seekBar_=f;this.time_=h;this.chapterMiniMenu_=r.getMiniMenu();this.playbackRangeMiniMenu_=b.getMiniMenu();this.volumeSlider_=y;this.playbackRateMiniMenu_=w.getMiniMenu();this.expandOrAddComponent_(CriLaControlComponentName.PLAY_BUTTON,p);this.expandOrAddComponent_(CriLaControlComponentName.SEEKBAR,f);this.expandOrAddComponent_(CriLaControlComponentName.TIME,h);this.expandOrAddComponent_(CriLaControlComponentName.VOLUME_BUTTON,j);this.expandOrAddComponent_(CriLaControlComponentName.LOOP_BUTTON,v);this.expandOrAddComponent_(CriLaControlComponentName.SWIPE_MODE_BUTTON,u);this.expandOrAddComponent_(CriLaControlComponentName.GYRO_BUTTON,n);this.expandOrAddComponent_(CriLaControlComponentName.ZOOM_IN_BUTTON,c);this.expandOrAddComponent_(CriLaControlComponentName.ZOOM_OUT_BUTTON,o);this.expandOrAddComponent_(CriLaControlComponentName.FULLSCREEN_BUTTON,s);this.expandOrAddComponent_(CriLaControlComponentName.CHAPTER_BUTTON,r);this.expandOrAddComponent_(CriLaControlComponentName.PLAYBACK_RANGE_BUTTON,b);this.expandOrAddComponent_(CriLaControlComponentName.PREV_FRAME_BUTTON,t);this.expandOrAddComponent_(CriLaControlComponentName.NEXT_FRAME_BUTTON,q);this.expandOrAddComponent_(CriLaControlComponentName.PLAYBACK_RATE_BUTTON,w);if(this.enabledTemplate_){this.expandCustomComponents_()}this.expandOrAddVolumeSliderComponent_();w.updatePlaybackRateList();this.append(l);this.setControlStyle({visibility:false});var g=this.resetAlpha.bind(this);if(CriUAChecker.isMobile()===false){this.addEventListener("mousemove",g)}this.addEventListener("click",g);var i=this;this.addEventListener(CriLaControlEvent.SEEK,function(z){i.time_.setFrame(z.detail.frame)});this.playbackRangeMiniMenu_.addEventListener("open",function(){this.enablePlaybackRangeAdjustmentMode(true)}.bind(this));this.playbackRangeMiniMenu_.addEventListener("close",function(){this.enablePlaybackRangeAdjustmentMode(false)}.bind(this));this.playbackRangeMiniMenu_.addEventListener("playbackrangechanged",function(z){this.dispatchEventByType(CriLaControlEvent.PLAYBACK_RANGE_CHANGED,{beginFrame:z.detail.beginFrame,endFrame:z.detail.endFrame})}.bind(this));this.playbackRangeMiniMenu_.addEventListener("playbackrangereset",function(z){this.dispatchEventByType(CriLaControlEvent.PLAYBACK_RANGE_RESET)}.bind(this));this.chapterMiniMenu_.addEventListener("separatorchanged",function(z){this.dispatchEventByType(CriLaControlEvent.CHAPTER_SEPARATOR_CHANGED,{frames:z.detail.frames})}.bind(this));this.chapterMiniMenu_.addEventListener("separatoradded",function(z){this.dispatchEventByType(CriLaControlEvent.CHAPTER_SEPARATOR_ADDED)}.bind(this));this.playbackRateMiniMenu_.addEventListener("playbackratechanged",function(z){this.dispatchEventByType(CriLaControlEvent.PLAYBACK_RATE_CHANGED,{playbackRate:z.detail.playbackRate})}.bind(this))};a.resetStyle_=function(){var d=CriLaControlComponentName;var e={visibility:false};for(var c in d){var b=d[c];e[b]=false}this.setControlStyle(e)};a.setupStyleVideo=function(){this.resetStyle_();var b={visibility:true};b[CriLaControlComponentName.SCREEN_PLAY_BUTTON]=true;b[CriLaControlComponentName.PLAY_BUTTON]=true;b[CriLaControlComponentName.SEEKBAR]=true;b[CriLaControlComponentName.TIME]=true;b[CriLaControlComponentName.VOLUME_BUTTON]=true;b[CriLaControlComponentName.FULLSCREEN_BUTTON]=true;this.setControlStyle(b);this.setClassName(null,"")};a.setupStyleTemplate=function(){this.resetStyle_();var b={visibility:true};Object.keys(this.componentDict_).forEach(function(c){b[c]=true});this.setControlStyle(b);this.setClassName(null,"")};a.setupStyleNoSeekBar=function(){this.resetStyle_();var b={visibility:false,showDuration:-1};this.setControlStyle(b);this.setClassName(null,"liveact-controls--no-seekbar")};a.setupStyleAudio=function(){this.setupStyleNoSeekBar();var b={visibility:true};b[CriLaControlComponentName.VOLUME_BUTTON]=true;this.setControlStyle(b)};a.setupStyleSwipe=function(){this.setupStyleNoSeekBar();var b={visibility:true};b[CriLaControlComponentName.SWIPE_MODE_BUTTON]=true;b[CriLaControlComponentName.ZOOM_IN_BUTTON]=true;b[CriLaControlComponentName.ZOOM_OUT_BUTTON]=true;this.setControlStyle(b)};a.setupStyleAllaroundImage=function(){this.setupStyleNoSeekBar();var b={visibility:true};b[CriLaControlComponentName.GYRO_BUTTON]=false;b[CriLaControlComponentName.ZOOM_IN_BUTTON]=true;b[CriLaControlComponentName.ZOOM_OUT_BUTTON]=true;b[CriLaControlComponentName.FULLSCREEN_BUTTON]=true;this.setControlStyle(b)};a.resetSeekBar=function(b,c){this.seekBar_.reset(b,c);this.time_.reset(b,c);this.chapterMiniMenu_.reset(b,c);this.playbackRangeMiniMenu_.reset(b,c);this.setChapterSeparatorsFrame([]);this.setFrame(0)};a.getFrame=function(){return this.seekBar_.getFrame()};a.setFrame=function(b){this.seekBar_.setFrame(b);this.time_.setFrame(b)};a.setPlaybackRangeFrame=function(b,c){this.seekBar_.setPlaybackRangeFrame(b,c);this.time_.setPlaybackRangeFrame(b,c);this.playbackRangeMiniMenu_.setPlaybackRangeFrame(b,c)};a.getChapterSeparatorsFrame=function(){return this.seekBar_.getSeparatorsFrame()};a.getChapterSeparatorsTimeMs=function(){return this.seekBar_.getSeparatorsTimeMs()};a.setChapterSeparatorsFrame=function(b){this.seekBar_.setSeparatorsFrame(b);this.chapterMiniMenu_.setSeparators(b,"frame")};a.setControlVisibility=function(b){var c=this.controlElem_;CriLaHtmlCss.setVisibility(c,b)};a.getAlpha=function(){return this.controlElem_.style.opacity};a.setAlpha=function(c){if(this.lastAlpha_===c){return}var e=this.controlElem_;e.style.opacity=c;this.lastAlpha_=c;var b="liveact-controls--faded-out";var d=c<0.1;if(d){e.classList.add(b)}else{e.classList.remove(b)}};a.getScreenPlayVisibility=function(){var b=this.getComponentVisibility(CriLaControlComponentName.SCREEN_PLAY_BUTTON);return b};a.setScreenPlayVisibility=function(b){var c={};c[CriLaControlComponentName.SCREEN_PLAY_BUTTON]=Boolean(b);this.setControlStyle(c)};a.addRow=function(){var b=document.createElement("div");b.classList.add("lac-row");this.registerRowEventCommon_(b);var d=this.rows_;var c=this.controlElem_;if(d.length===0){c.appendChild(b);d.push(b)}else{c.insertBefore(b,d[0]);d.unshift(b)}};a.expandOrAddComponent_=function(c,b){if(this.enabledTemplate_){this.expandComponent_(c,b)}else{this.addComponent(c,b)}};a.addComponent=function(c,b,d){var e=this.rows_;if(d==null){d=e.length-1}if(d<0||d>=e.length){throw new Error("不正なコントロール行です: "+d)}e[d].appendChild(b.getElement());this.addComponentDict_(c,b);if(b instanceof CriLaPlayerControlMiniMenuButton){this.addMiniMenu_(c,b)}};a.addComponents=function(g){var d=this.componentDict_;try{for(var c in g){var b=g[c];this.addComponent(c,b)}}catch(f){this.componentDict_=d;throw f}};a.expandComponent_=function(f,e){var b=e.getSelector();var d=CriLaPolyfill.Array.from(this.controlElem_.querySelectorAll(b));if(d.length===0){return}if(d.length>1){throw new Error("同じコンポーネントを2つ以上配置することはできません")}var c=d[0];e.copyCssClasses(c);e.copyAttributes(c);c.parentNode.replaceChild(e.getElement(),c);this.addComponentDict_(f,e);if(e instanceof CriLaPlayerControlMiniMenuButton){this.addMiniMenu_(f,e)}};a.expandCustomComponents_=function(){var c=CriLaPlayerControlTemplateCustomButton.CSS_CLASS_NAME;var b=CriLaPolyfill.Array.from(this.controlElem_.getElementsByClassName(c));b.forEach(function(d){var f=d.getAttribute("data-name");if(!f){throw new Error("名前のないカスタムコンポーネントは追加できません。data-name属性を付与してください。")}var e=new CriLaPlayerControlTemplateCustomButton();this.expandCustomComponent_(f,e,d)},this)};a.expandCustomComponent_=function(d,c,b){c.copyCssClasses(b);c.copyAttributes(b);b.parentNode.replaceChild(c.getElement(),b);this.addComponentDict_(d,c);this.addMiniMenu_(d,c)};a.addMiniMenu_=function(d,c){if(!(c instanceof CriLaPlayerControlMiniMenuButton)){throw new Error("指定したコンポーネントはMiniMenuを持ちません")}d=String(d);c.addEventListener("click",function(g){this.closeOtherMiniMenu(d);g.stopPropagation()}.bind(this));var e=c.getMiniMenu();var b=c.getElement();var f=b.getAttribute("data-title");if(f!=null){e.setTitle(f)}this.miniMenuFieldElem_.appendChild(e.getElement());this.miniMenuDict_[d]=e};a.addScreenPlayButton=function(b){this.addComponentDict_(CriLaControlComponentName.SCREEN_PLAY_BUTTON,b);this.wrapperElem_.appendChild(b.getElement())};a.expandOrAddVolumeSliderComponent_=function(){if(!this.enabledTemplate_){return}if(CriUAChecker.isSmallScreen()){return}var c=this.getComponent(CriLaControlComponentName.VOLUME_BUTTON);if(c==null){return}var b=c.getElement();if(b.getAttribute("data-slider")!=="true"){return}var e=this.volumeSlider_;var d=e.getElement();b.insertAdjacentElement("afterend",d);this.addComponentDict_(CriLaControlComponentName.VOLUME_SLIDER,e)};a.addComponentDict_=function(c,b){c=String(c);if(!c){throw new Error("コントロールのコンポーネントに名前が設定されていません")}if(c in this.componentDict_){throw new Error("コントロールのコンポーネント名は重複させることができません")}this.componentDict_[c]=b};a.getComponent=function(b){b=String(b);return this.componentDict_[b]};a.registerRowEventCommon_=function(b){b.addEventListener("click",this.closeMiniMenuAll.bind(this,{excludePinnedMiniMenu:true}))};a.setParticularControlStyle_=function(e,c){if("visibility" in e){var b=e.visibility;this.setControlVisibility(c(b))}if("zoom" in e){var b=e.zoom;if(!("zoomIn" in e)){e.zoomIn=b}if(!("zoomOut" in e)){e.zoomOut=b}}if("showDuration" in e){this.setShowDuration_(Number(e.showDuration))}if("backgroundColor" in e){var f=e.backgroundColor;var d=CriLaUtility.colorStringToArray(f);if(d[3]>0){this.rows_.forEach(function(g){g.style.backgroundColor=f},this);this.setClassName(null,"")}else{this.rows_.forEach(function(g){g.style.backgroundColor=""},this);this.setClassName(null,"liveact-controls--no-seekbar")}}if("controlClass" in e){this.setClassName(null,e.controlClass)}};a.setControlStyle=function(e){var f=function(g){return g==="true"?true:g==="false"?false:Boolean(g)};this.setParticularControlStyle_(e,f);for(var d in e){var c=this.componentDict_[d];if(c){var b=e[d];c.setVisibility(f(b))}}};a.setClassName=function(c,d){var b=this.controlElem_;b.className="liveact-controls";if(d){b.classList.add(d)}};a.append=function(b){b.appendChild(this.controlElem_)};a.addEventListener=function(b,d,c){this.controlElem_.addEventListener(b,d,c)};a.dispatchEvent=function(b){this.controlElem_.dispatchEvent(b)};a.dispatchEventByType=function(d,b){var c=b||{};this.dispatchEvent(new CriLaPolyfill.Event.CustomEvent(d,{bubbles:false,cancellable:false,detail:c}))};a.setButtonState=function(b,c){if(this.componentDict_[b]){this.componentDict_[b].setState(c)}};a.setChapterSeparatorAddButtonState=function(b){this.chapterMiniMenu_.enableAddButton(b)};a.seekLastFrame=function(){this.seekBar_.seekLastFrame();this.time_.seekLastFrame()};a.setLoadedFrame=function(b){this.seekBar_.setLoadedFrame(b)};a.setVolume=function(b){this.volumeSlider_.setVolume(b);this.setButtonState(CriLaControlComponentName.VOLUME_BUTTON,b>0)};a.getVolume=function(){this.volumeSlider_.getVolume()};a.stepFadeTimeMs_=function(b){this.setFadeTimeMs_(this.fadeTimeMs_+b)};a.setFadeTimeMs_=function(b){b=Math.max(b,0);b=Math.min(b,this.showDuration_);this.fadeTimeMs_=b};a.updateAlpha=function(d){var c=1;var b=Object.keys(this.miniMenuDict_).filter((function(e){return this.miniMenuDict_[e].isOpen()==true}).bind(this));if(b.length>0){return}if(this.showDuration_>=0){this.stepFadeTimeMs_(-d);c=Math.min(1,this.fadeTimeMs_/500)}this.setAlpha(c)};a.resetAlpha=function(){this.setAlpha(1);this.fadeTimeMs_=this.showDuration_};a.setShowDuration_=function(b){this.showDuration_=b;this.resetAlpha()};a.getMiniMenuNames=function(b){b=b||{excludePinnedMiniMenu:false};var d=b.excludePinnedMiniMenu===true;var c=Object.keys(this.miniMenuDict_);if(d){c=c.filter(function(e){return !this.miniMenuDict_[e].isPinned()},this)}return c};a.isMiniMenuOpen=function(b){return this.miniMenuDict_[b].isOpen()};a.isMiniMenuOpenAny=function(b){return this.getMiniMenuNames(b).some(this.isMiniMenuOpen,this)};a.closeMiniMenu=function(b){var c=this.miniMenuDict_[b];if(c){c.close()}};a.closeMiniMenuAll=function(b){this.getMiniMenuNames(b).forEach(this.closeMiniMenu,this)};a.closeOtherMiniMenu=function(b){Object.keys(this.miniMenuDict_).filter(function(c){return c!==b},this).forEach(this.closeMiniMenu,this)};a.isEnabledPlaybackRangeAdjustmentMode=function(){return this.enabledPlaybackRangeAdjustmentMode_};a.enablePlaybackRangeAdjustmentMode=function(c){if(this.enabledPlaybackRangeAdjustmentMode_===c){return}this.enabledPlaybackRangeAdjustmentMode_=c;var b="liveact-controls--playback-range-adjustment-mode";if(c){this.controlElem_.classList.add(b);this.playbackRangeMiniMenu_.open()}else{this.controlElem_.classList.remove(b);this.playbackRangeMiniMenu_.close()}this.dispatchEventByType(CriLaControlEvent.PLAYBACK_RANGE_ADJUSTMENT_MODE_CHANGED,{enabledMode:c})};a.getComponentVisibility=function(d){var c=this.getComponent(d);if(c==null){return false}var b=c.getVisibility();return b}})(CriLaPlayerControl.prototype);function CriLaC00T(a){this.elem_=document.createElement("div");this.selector_="."+a;this.addClassName(a)}(function(a){a.addClassName=function(b){this.elem_.classList.add(b)};a.removeClassName=function(b){this.elem_.classList.remove(b)};a.getVisibility=function(){var b=this.elem_;return CriLaHtmlCss.getVisibility(b)};a.setVisibility=function(b){var c=this.elem_;CriLaHtmlCss.setVisibility(c,b)};a.getElement=function(){return this.elem_};a.getSelector=function(){return this.selector_};a.copyAttributes=function(b){CriLaPolyfill.Array.from(b.attributes).forEach(function(c){if(c.name!=="class"){this.elem_.setAttribute(c.name,c.value)}},this)};a.copyCssClasses=function(b){CriLaPolyfill.Array.from(b.classList).forEach(function(c){this.elem_.classList.add(c)},this)};a.addEventListener=function(b,d,c){this.elem_.addEventListener(b,d,c)};a.removeEventListener=function(b,c){this.elem_.removeEventListener(b,c)};a.dispatchEvent=function(b){this.elem_.dispatchEvent(b)};a.dispatchEventByType=function(d,b){var c=b||{};this.dispatchEvent(new CriLaPolyfill.Event.CustomEvent(d,{bubbles:false,cancellable:false,detail:c}))}})(CriLaC00T.prototype);function CriLaTimeSubcomponent(){this.frame_=0;this.framerate_=30;this.sceneFrameRange_=new CriLaFrameRange(0,30);this.playbackFrameRange_=new CriLaFrameRange(0,30)}(function(a){a.reset=function(b,c){this.framerate_=c;this.sceneFrameRange_.duration=b;this.playbackFrameRange_.begin=0;this.playbackFrameRange_.duration=b};a.setFrame=function(b){b=this.playbackFrameRange_.clamp(b);if(this.playbackFrameRange_.isExceededLastFrame(b)){this.seekLastFrame()}else{this.setFrame_(b)}};a.setFrame_=function(b){this.frame_=b};a.getFrame=function(){return this.frame_};a.getPlayableFrame=function(){return this.playbackFrameRange_.clampWithPlayableFrame(this.frame_)};a.seekLastFrame=function(){this.setFrame_(this.playbackFrameRange_.end)};a.setPlaybackRangeFrame=function(c,d){var b=this.playbackFrameRange_;if(b.eq(b.begin,c)&&b.eq(b.end,d)){return}b.begin=c;b.end=d;this.setFrame(this.getFrame())};a.getPlaybackFrameRange=function(){return this.playbackFrameRange_};a.getSceneFrameRange=function(){return this.sceneFrameRange_};a.isProhibitedFrame=function(d){var b=this.playbackFrameRange_;var c=b.between(b.begin,b.end,d);return !c};a.getPositionFromFrame=function(c){var b=this.sceneFrameRange_.duration;if(b===0){return 0}return CriGrxMath.clamp(0,1,c/b)};a.getFrameFromPosition=function(b,c){var d=b*this.sceneFrameRange_.duration;if(c){d=Math.round(d)}return d};a.getSecondFromFrame=function(b){return CriUnitValue.frameToSecond(this.framerate_,b)}})(CriLaTimeSubcomponent.prototype);function CriLaC00W(){CriLaC00T.call(this,"lac-time");this.time_=new CriLaTimeSubcomponent()}(function(b,c){CriLaPolyfill.Object.setPrototypeOf(b,c);b.reset=function(d,e){this.time_.reset(d,e)};b.setPlaybackRangeFrame=function(d,e){this.time_.setPlaybackRangeFrame(d,e)};b.setFrame=function(d){this.time_.setFrame(d);this.updateFrame_()};b.seekLastFrame=function(){this.time_.seekLastFrame();this.updateFrame_()};b.updateFrame_=function(){var i=this.time_.getFrame();var d=this.time_.getSceneFrameRange();var h=a(this.time_.getSecondFromFrame(i));var f=a(this.time_.getSecondFromFrame(d.end));var e=h+"/"+f;var g=this.elem_;if(g.innerText!==e){g.innerText=e}};function a(d){d=Math.floor(d);var e=Math.floor(d/60);d=d%60;d=("00"+d).slice(-2);return e+":"+d}})(CriLaC00W.prototype,CriLaC00T.prototype);function CriLaC00U(a){CriLaC00T.call(this,a);this.cpe_=new CriLaCustomPointerEvent(this.getElement());this.addClassName("lac-button")}(function(a,b){CriLaPolyfill.Object.setPrototypeOf(a,b);a.setState=function(c){c?this.addClassName("lac-buttonon"):this.removeClassName("lac-buttonon")};a.addEventListener=function(c,e,d){if(c==="click"){b.addEventListener.call(this,c,e,d);return}this.cpe_.addEventListener(c,e,d)};a.removeEventListener=function(c,d){if(c==="click"){b.removeEventListener.call(this,c,d);return}this.cpe_.removeEventListener(c,d)}})(CriLaC00U.prototype,CriLaC00T.prototype);function CriLaPlayerControlButton(c,a){var b=this;CriLaC00U.call(b,c);if(a){b.addEventListener("down",function(){a()})}}(function(b,a){CriLaPolyfill.Object.setPrototypeOf(b,a)})(CriLaPlayerControlButton.prototype,CriLaC00U.prototype);function CriLaPlayerControlPressButton(f,d){var c=this;CriLaC00U.call(c,f);var b=false;var a;var e=(function(){return function(i){if(!a){a=i}var h=i-a;a=i;return h}})();var g=function(h){if(b){d(e(h));requestAnimationFrame(g)}};c.addEventListener("down",function(){b=true;a=void (0);requestAnimationFrame(g)});c.addEventListener("up",function(){b=false});c.addEventListener("out",function(){b=false})}(function(b,a){CriLaPolyfill.Object.setPrototypeOf(b,a)})(CriLaPlayerControlPressButton.prototype,CriLaC00U.prototype);function CriLaPlayerControlMiniMenuButton(c,b,e,d){var a=this;a.minimenu_=b;b.addEventListener("open",function(){a.setState(true)});b.addEventListener("close",function(){a.setState(false)});if(e){b.addEventListener("open",e)}if(d){b.addEventListener("close",d)}CriLaPlayerControlButton.call(this,c);a.addEventListener("click",function(){if(a.minimenu_.isOpen()){a.minimenu_.close()}else{a.minimenu_.open()}})}(function(a,b){CriLaPolyfill.Object.setPrototypeOf(a,b);a.getMiniMenu=function(){return this.minimenu_}})(CriLaPlayerControlMiniMenuButton.prototype,CriLaPlayerControlButton.prototype);function CriLaPlaybackRateButton(a){var b=new CriLaPlayerControlPlaybackRateMiniMenu();CriLaPlayerControlMiniMenuButton.call(this,"lac-playback-rate",b);b.addEventListener("playbackratechanged",function(d){var c=d.detail.playbackRate;this.setPlaybackRate(c)}.bind(this));this.setPlaybackRate(1)}(function(b,a){CriLaPolyfill.Object.setPrototypeOf(b,a);b.setPlaybackRate=function(c){this.elem_.setAttribute("data-playback-rate",c.toFixed(2));this.minimenu_.setPlaybackRate(c)};b.updatePlaybackRateList=function(){var d=this.getElement().getAttribute("data-list")||"0.5,1,1.5,2";var c=d.split(",").map(function(e){return e.trim()}).map(Number).filter(Boolean).filter(CriGrxMath.clamp.bind(null,0,2));if(c.length===0){console.warn("再生速度UIの設定が不正です。data-listアトリビュートをご確認ください。")}c.push(1);c.sort(function(f,e){return f-e});c=c.filter(function(h,g,f){return g===f.indexOf(h)});c.reverse();this.minimenu_.setPlaybackRateList(c)}})(CriLaPlaybackRateButton.prototype,CriLaPlayerControlMiniMenuButton.prototype);function CriLaPlayerControlTemplateCustomButton(){var a=new CriLaPlayerControlCustomMiniMenu();CriLaPlayerControlMiniMenuButton.call(this,this.constructor.CSS_CLASS_NAME,a)}(function(b,a){CriLaPolyfill.Object.setPrototypeOf(b,a);b.setMenuHeaderHtml=function(c){this.minimenu_.setHeaderHtml(c)};b.setMenuHeaderElement=function(c){this.minimenu_.setHeaderElement(c)};b.setMenuBodyHtml=function(c){this.minimenu_.setBodyHtml(c)};b.setMenuBodyElement=function(c){this.minimenu_.setBodyElement(c)};b.setMenuFooterHtml=function(c){this.minimenu_.setFooterHtml(c)};b.setMenuFooterElement=function(c){this.minimenu_.setFooterElement(c)};b.addMenuCssClassName=function(c){this.minimenu_.addClassName(c)};b.removeMenuCssClassName=function(c){this.minimenu_.removeClassName(c)};b.setMenuHtml=b.setMenuBodyHtml;b.setMenuElement=b.setMenuBodyElement})(CriLaPlayerControlTemplateCustomButton.prototype,CriLaPlayerControlMiniMenuButton.prototype);CriLaPlayerControlTemplateCustomButton.CSS_CLASS_NAME="lac-custom-button";CriLaPlayerControlButton.create=function(b,a){var f="";var d="click";var e="";switch(b){case CriLaControlComponentName.SCREEN_PLAY_BUTTON:f="lac-screen-play";e=CriLaControlEvent.SCREEN_PLAY_BUTTON_CLICKED;break;case CriLaControlComponentName.PLAY_BUTTON:f="lac-play";e=CriLaControlEvent.PLAY_BUTTON_CLICKED;break;case CriLaControlComponentName.FULLSCREEN_BUTTON:f="lac-fullscreen";e=CriLaControlEvent.FULLSCREEN_BUTTON_CLICKED;break;case CriLaControlComponentName.VOLUME_BUTTON:f="lac-volume";e=CriLaControlEvent.VOLUME_BUTTON_CLICKED;break;case CriLaControlComponentName.LOOP_BUTTON:f="lac-loop";e=CriLaControlEvent.LOOP_BUTTON_CLICKED;break;case CriLaControlComponentName.SWIPE_MODE_BUTTON:f="lac-swipe-ui-mode-toggle";e=CriLaControlEvent.SWIPE_MODE_BUTTON_CLICKED;d="down";break;case CriLaControlComponentName.GYRO_BUTTON:f="lac-gyro-sensor";e=CriLaControlEvent.GYRO_BUTTON_CLICKED;d="down";break;case CriLaControlComponentName.PREV_FRAME_BUTTON:f="lac-prev-frame";e=CriLaControlEvent.PREV_FRAME_CLICKED;d="down";break;case CriLaControlComponentName.NEXT_FRAME_BUTTON:f="lac-next-frame";e=CriLaControlEvent.NEXT_FRAME_CLICKED;d="down";break;default:return null}var c=new CriLaPlayerControlButton(f);c.addEventListener(d,function(){var g=new CriLaPolyfill.Event.CustomEvent(e);a.dispatchEvent(g)});return c};CriLaPlayerControlPressButton.create=function(b,a){var c="";var d="";switch(b){case CriLaControlComponentName.ZOOM_IN_BUTTON:c="lac-swipe-ui-zoom-in";d=CriLaControlEvent.ZOOM_IN_BUTTON_PRESSED;break;case CriLaControlComponentName.ZOOM_OUT_BUTTON:c="lac-swipe-ui-zoom-out";d=CriLaControlEvent.ZOOM_OUT_BUTTON_PRESSED;break;default:return null}return new CriLaPlayerControlPressButton(c,function(e){var f={deltaTime:e};var g=new CriLaPolyfill.Event.CustomEvent(d,{bubbles:false,cancelable:false,detail:f});a.dispatchEvent(g)})};CriLaPlayerControlMiniMenuButton.create=function(b,a){var e;var d;switch(b){case CriLaControlComponentName.CHAPTER_BUTTON:e="lac-chapter";d=new CriLaPlayerControlChapterMiniMenu();break;case CriLaControlComponentName.PLAYBACK_RANGE_BUTTON:e="lac-playback-range";d=new CriLaPlayerControlPlaybackRangeMiniMenu();break;case CriLaControlComponentName.PLAYBACK_RATE_BUTTON:var c=new CriLaPlaybackRateButton(a);return c;default:return null}return new CriLaPlayerControlMiniMenuButton(e,d)};function CriLaSliderBase(b,a){CriLaC00T.call(this,"lac-slider");this.initialize_(b,a);this.setup_()}(function(b,a){CriLaPolyfill.Object.setPrototypeOf(b,a);b.initialize_=function(f,e){var g=this.getElement();var j=document.createElement("div");j.classList.add("lac-slider-wrap");g.appendChild(j);var d=document.createElement("div");d.classList.add("lac-slider-background");j.appendChild(d);var h=document.createElement("div");h.classList.add("lac-slider-background-inner");d.appendChild(h);var c=document.createElement("div");c.classList.add("lac-slider-base");j.appendChild(c);var i=document.createElement("div");i.classList.add("lac-slider-pointer");j.appendChild(i);this.sliderElem_=g;this.sliderWrapElem_=j;this.sliderBackgroundElem_=d;this.sliderBackgroundInnerElem_=h;this.sliderBaseElem_=c;this.pointerElem_=i;this.isHolding_=false;d.addEventListener("touchstart",this.onDownSlider_.bind(this));d.addEventListener("mousedown",this.onDownSlider_.bind(this));i.addEventListener("touchstart",this.onStartHoldingPointer_.bind(this));i.addEventListener("mousedown",this.onStartHoldingPointer_.bind(this));f.addEventListener("touchmove",this.onMovePointer_.bind(this));f.addEventListener("mousemove",this.onMovePointer_.bind(this));f.addEventListener("touchend",this.onEndHoldingPointer_.bind(this));f.addEventListener("mouseup",this.onEndHoldingPointer_.bind(this))};b.setup_=function(){this.position_=0;this.setPosition(this.position_)};b.setPosition=function(c){c=CriGrxMath.clamp(0,1,c);this.setPositionToElem_(this.pointerElem_,c);this.position_=c};b.getPosition=function(){return this.position_};b.getPositionStyleString_=function(c){return c*100+"%"};b.setPositionToElem_=function(d,c){d.style.left=this.getPositionStyleString_(c)};b.dispatchChangeEvent_=function(d){var c=this.getPosition();this.dispatchEventByType(d,{position:c})};b.setPositionByEvent_=function(d){var c=CriLaHtmlCss.calcEventNormalizedLeftPosition(this.sliderBaseElem_,d);var e=this.position_;this.setPosition(c);if(e!==c){this.dispatchChangeEvent_("change")}};b.onDownSlider_=function(c){this.isHolding_=true;c.preventDefault();this.dispatchChangeEvent_("changestart");this.setPositionByEvent_(c);this.dispatchChangeEvent_("changeend")};b.onStartHoldingPointer_=function(c){if(!this.isHolding_){this.isHolding_=true;c.preventDefault();this.dispatchChangeEvent_("changestart")}};b.onMovePointer_=function(c){if(this.isHolding_){this.setPositionByEvent_(c);c.preventDefault()}};b.onEndHoldingPointer_=function(c){if(this.isHolding_){this.isHolding_=false;c.preventDefault();this.dispatchChangeEvent_("changeend")}}})(CriLaSliderBase.prototype,CriLaC00T.prototype);function CriLaC00X(b,a){CriLaSliderBase.call(this,b,a)}(function(b,a){CriLaPolyfill.Object.setPrototypeOf(b,a);b.initialize_=function(h,k){a.initialize_.call(this,h,k);this.addClassName("lac-slider--seek");this.addClassName("lac-seekbar");this.selector_=".lac-seekbar,.lac-slider.lac-slider--seek";this.time_=new CriLaTimeSubcomponent();this.lastLoadedFrame_=null;this.loadedColor_="rgba(140, 140, 140, 1)";this.loadingColor_="rgba(70, 70, 70, 1)";this.prohibitedColor_="rgba(0, 0, 0, 1)";this.playbackColor_="rgba(0, 0, 0, 0)";this.sliderWrapElem_.classList.add("lac-seekbar-wrap");this.sliderBackgroundElem_.classList.add("lac-seekbar-background");this.sliderBackgroundInnerElem_.classList.add("lac-seekbar-background-inner");this.sliderBaseElem_.classList.add("lac-seekbar-base");this.pointerElem_.classList.add("lac-seekbar-pointer");var d=this.sliderWrapElem_;var e=document.createElement("div");e.classList.add("lac-seekbar-loading");d.appendChild(e);var g=document.createElement("div");g.classList.add("lac-seekbar-current");d.appendChild(g);var j=document.createElement("div");j.classList.add("lac-seekbar-prohibited");d.appendChild(j);this.seekbarCurrentElem_=g;this.seekbarLoadingElem_=e;this.seekbarProhibitedElem_=j;var f=document.createElement("div");f.classList.add("lac-seekbar-separator-list");d.appendChild(f);var i=document.createElement("div");i.classList.add("lac-playback-range-arrow-list");d.appendChild(i);var c=document.createElement("div");var l=document.createElement("div");[c,l].forEach(function(m){m.classList.add("lac-playback-range-arrow");i.appendChild(m)});this.separatorListElem_=f;this.separatorElems_=[];this.separatorsFrame_=[];this.playbackRangeArrowListElem_=i;this.playbackRangeArrowBeginElem_=c;this.playbackRangeArrowEndElem_=l;this.isHolding_=false;this.holdingPlaybackRangeArrowElem_=null;[c,l].forEach(function(m){m.addEventListener("touchstart",this.onStartHoldingPlaybackRangeArrow_.bind(this));m.addEventListener("mousedown",this.onStartHoldingPlaybackRangeArrow_.bind(this))},this);h.addEventListener("touchmove",this.onMovePlaybackRangeArrow_.bind(this));h.addEventListener("mousemove",this.onMovePlaybackRangeArrow_.bind(this));h.addEventListener("touchend",this.onEndHoldingPlaybackRangeArrow_.bind(this));h.addEventListener("mouseup",this.onEndHoldingPlaybackRangeArrow_.bind(this));this.addEventListener("changestart",function(m){k.dispatchEventByType(CriLaControlEvent.SEEK_START)});this.addEventListener("changeend",function(m){k.dispatchEventByType(CriLaControlEvent.SEEK_END)});this.addEventListener("change",function(m){this.onChangeEvent_(m,k)}.bind(this));this.addEventListener("separatorchanged",function(m){k.dispatchEventByType(CriLaControlEvent.CHAPTER_SEPARATOR_CHANGED,{frames:m.detail.frames})});this.addEventListener("playbackrangechanged",function(m){k.dispatchEventByType(CriLaControlEvent.PLAYBACK_RANGE_CHANGED,{beginFrame:m.detail.beginFrame,endFrame:m.detail.endFrame})});this.addEventListener("playbackrangemovestart",function(m){k.dispatchEventByType(CriLaControlEvent.PLAYBACK_RANGE_MOVE_START)});this.addEventListener("playbackrangemoveend",function(m){k.dispatchEventByType(CriLaControlEvent.PLAYBACK_RANGE_MOVE_END)})};b.setup_=function(){a.setup_.call(this);this.setLoadedFrame([]);this.setFrame(0);this.updatePlaybackRangeArrowPosition_();this.updateProhibitedSeekbar_()};b.reset=function(c,d){this.time_.reset(c,d)};b.getNormalizePosition=function(c){return this.time_.getPositionFromFrame(c)};b.setLoadedFrame=function(e){var f=function(h,g){return h.start===g.start&&h.end===g.end};if(CriLaUtility.Array.isEqual(e,this.lastLoadedFrame_,f)){return}this.lastLoadedFrame_=e;var c=[];e.forEach(function(g){c.push(this.getNormalizePosition(g.start)*100);c.push(this.getNormalizePosition(g.end)*100)},this);var d=CriLaHtmlCss.createHorizontalStripedGradient(this.loadingColor_,this.loadedColor_,c);this.seekbarLoadingElem_.style.background=d};b.setFrame=function(c){this.time_.setFrame(c);this.updateFrame_()};b.seekLastFrame=function(){this.time_.seekLastFrame();this.updateFrame_()};b.updateFrame_=function(){var d=this.time_.getFrame();var c=this.getNormalizePosition(d);this.setPosition(c)};b.getFrame=function(){return this.time_.getPlayableFrame()};b.setPosition=function(c){a.setPosition.call(this,c);this.seekbarCurrentElem_.style.width=this.getPositionStyleString_(c)};b.updateProhibitedSeekbar_=function(){var c=this.time_.getPlaybackFrameRange();var d=this.getNormalizePosition(c.begin);var e=this.getNormalizePosition(c.end);var f=CriLaHtmlCss.createHorizontalStripedGradient(this.prohibitedColor_,this.playbackColor_,[d*100,e*100]);this.seekbarProhibitedElem_.style.background=f};b.isProhibitedFrame_=function(c){return this.time_.isProhibitedFrame(c)};b.onChangeEvent_=function(e,c){var d=this.getFrame();var g=e.detail.position||0;var f=this.time_.getFrameFromPosition(g);this.setFrame(f);f=this.getFrame();if(d!==f){c.dispatchEventByType(CriLaControlEvent.SEEK,{frame:f})}};b.onDownSeekbar_=function(c){var f=CriLaHtmlCss.calcEventNormalizedLeftPosition(this.sliderBaseElem_,c);var d=this.time_.getFrameFromPosition(f);if(this.isProhibitedFrame_(d)){return}a.onDownSeekbar_.call(this,c)};b.setPlaybackRangeFrame=function(c,d){this.time_.setPlaybackRangeFrame(c,d);this.updatePlaybackRangeArrowPosition_();this.updateProhibitedSeekbar_()};b.onStartHoldingPlaybackRangeArrow_=function(c){this.holdingPlaybackRangeArrowElem_=c.target;this.dispatchEventByType("playbackrangemovestart")};b.onMovePlaybackRangeArrow_=function(h){if(!this.holdingPlaybackRangeArrowElem_){return}var k=CriLaHtmlCss.calcEventNormalizedLeftPosition(this.sliderBaseElem_,h);var i=this.time_.getFrameFromPosition(k,true);var f=this.time_.getPlaybackFrameRange().clone();var d=this.holdingPlaybackRangeArrowElem_===this.playbackRangeArrowBeginElem_;var j=d?i:f.begin;var g=d?f.end:i;if(CriLaFrameRange.op.gt(j,g)){var c=j;j=g;g=c;if(d){this.holdingPlaybackRangeArrowElem_=this.playbackRangeArrowEndElem_}else{this.holdingPlaybackRangeArrowElem_=this.playbackRangeArrowBeginElem_}}this.time_.setPlaybackRangeFrame(j,g);this.updatePlaybackRangeArrowPosition_();this.dispatchEventByType("playbackrangechanged",{beginFrame:j,endFrame:g})};b.onEndHoldingPlaybackRangeArrow_=function(c){if(this.holdingPlaybackRangeArrowElem_){this.holdingPlaybackRangeArrowElem_=null;this.dispatchEventByType("playbackrangemoveend")}};b.updatePlaybackRangeArrowPosition_=function(){var c=this.time_.getPlaybackFrameRange();var e=c.begin;var f=this.getNormalizePosition(e);this.setPositionToElem_(this.playbackRangeArrowBeginElem_,f);var d=c.end;var g=this.getNormalizePosition(d);this.setPositionToElem_(this.playbackRangeArrowEndElem_,g)};b.getSeparatorsFrame=function(){return this.separatorsFrame_};b.getSeparatorsTimeMs=function(){return this.separatorsFrame_.map(function(c){return this.time_.getSecondFromFrame(c)*1000},this)};b.setSeparatorsFrame=function(c){if(CriLaUtility.Array.isEqual(c,this.separatorsFrame_)){return}CriLaUtility.Array.copy(c,this.separatorsFrame_);this.updateSeparatorElems();this.dispatchEventByType("separatorchanged",{frames:this.separatorsFrame_})};b.updateSeparatorElems=function(){this.separatorElems_.forEach(function(c){this.separatorListElem_.removeChild(c)},this);this.separatorElems_=this.separatorsFrame_.map(this.createSeparatorElem_,this);this.separatorElems_.forEach(function(c){this.separatorListElem_.appendChild(c)},this)};b.createSeparatorElem_=function(d){var e=this.getNormalizePosition(d);var c=document.createElement("div");c.classList.add("lac-seekbar-separator");this.setPositionToElem_(c,e);return c}})(CriLaC00X.prototype,CriLaSliderBase.prototype);function CriLaVolumeSliderComponent(b,a){CriLaSliderBase.call(this,b,a)}(function(b,a){CriLaPolyfill.Object.setPrototypeOf(b,a);b.initialize_=function(d,c){a.initialize_.call(this,d,c);this.addClassName("lac-slider--volume");this.addClassName("lac-volume-slider");this.selector_=".lac-volume-slider,.lac-slider.lac-slider--volume";this.sliderWrapElem_.classList.add("lac-volume-slider-wrap");this.sliderBackgroundElem_.classList.add("lac-volume-slider-background");this.sliderBackgroundInnerElem_.classList.add("lac-volume-slider-background-inner");this.sliderBaseElem_.classList.add("lac-volume-slider-base");this.pointerElem_.classList.add("lac-volume-slider-pointer");this.addEventListener("change",function(f){c.dispatchEventByType(CriLaControlEvent.VOLUME_CHANGED,{volume:f.detail.position})});this.addEventListener("changestart",function(f){c.dispatchEventByType(CriLaControlEvent.VOLUME_CHANGE_START,{volume:f.detail.position})})};b.setVolume=function(d){d=CriGrxMath.clamp(0,1,d);if(CriUAChecker.isMobile()){d=d>0?1:0}var c=d;this.setPosition(c)};b.getVolume=function(){return this.getPosition()}})(CriLaVolumeSliderComponent.prototype,CriLaSliderBase.prototype);function CriLaPlayerControlMiniMenuBase(){CriLaC00T.call(this,"lac-minimenu");this.isOpen_=false;this.isPinned_=false;var c=this.elem_;var b=document.createElement("div");b.classList.add("lac-minimenu-wrap");c.appendChild(b);var f=document.createElement("div");f.classList.add("lac-minimenu-header");b.appendChild(f);var d=document.createElement("div");d.classList.add("lac-minimenu-pin");d.classList.add("lac-button");d.classList.add("lac-pin");b.appendChild(d);d.addEventListener("click",function(){var g=!this.isPinned();this.enablePin(g);if(g){d.classList.add("lac-buttonon")}else{d.classList.remove("lac-buttonon")}}.bind(this),false);var a=document.createElement("div");a.classList.add("lac-minimenu-body");b.appendChild(a);var e=document.createElement("div");e.classList.add("lac-minimenu-footer");b.appendChild(e);this.wrapElem_=b;this.headerElem_=f;this.bodyElem_=a;this.footerElem_=e;this.pinButton_=d}(function(a,b){CriLaPolyfill.Object.setPrototypeOf(a,b);a.open=function(){if(!this.isOpen_){this.isOpen_=true;this.addClassName("lac-minimenu--open");this.dispatchEventByType("open")}};a.close=function(){if(this.isOpen_){this.isOpen_=false;this.removeClassName("lac-minimenu--open");this.dispatchEventByType("close")}};a.isOpen=function(){return this.isOpen_};a.enablePin=function(c){this.isPinned_=c};a.isPinned=function(){return this.isPinned_};a.setTitle=function(c){this.headerElem_.textContent=c}})(CriLaPlayerControlMiniMenuBase.prototype,CriLaC00T.prototype);function CriLaPlayerControlCustomMiniMenu(){var a=this;CriLaPlayerControlMiniMenuBase.call(a);a.addClassName("lac-custom-minimenu")}(function(c,b){CriLaPolyfill.Object.setPrototypeOf(c,b);c.open=function(){if(this.hasContent()){b.open.call(this)}};c.setHeaderHtml=function(e){this.headerElem_.innerHTML=e};c.setBodyHtml=function(e){this.bodyElem_.innerHTML=e};c.setFooterHtml=function(e){this.footerElem_.innerHTML=e};c.setHeaderElement=function(e){a(this.headerElem_);this.headerElem_.appendChild(e)};c.setBodyElement=function(e){a(this.bodyElem_);this.bodyElem_.appendChild(e)};c.setFooterElement=function(e){a(this.footerElem_);this.footerElem_.appendChild(e)};c.resetContent=function(){[this.headerElem_,this.bodyElem_,this.footerElem_].forEach(a)};c.hasContent=function(){return[this.headerElem_,this.bodyElem_,this.footerElem_].some(d)};function a(e){while(e.firstChild){e.removeChild(e.firstChild)}}function d(e){return e.firstChild!=null}})(CriLaPlayerControlCustomMiniMenu.prototype,CriLaPlayerControlMiniMenuBase.prototype);function CriLaTimeInputSubComponent(c,b,e,d){this.CriLaP11m=new CriLaSubEventDispatcher();this.CriLaP11m.delegate(this);this.frame_=0;this.framerate_=c;this.range_=new CriLaFrameRange(Math.floor(b),Math.floor(e));var a=this.elem_=document.createElement("input");a.type="number";a.addEventListener("change",function(g){var f=Number(a.value);f=isNaN(f)?0:f;this.setValue(f)}.bind(this));this.unit_=null;this.setUnitByString(d)}(function(a){a.getElement=function(){return this.elem_};a.setUnit=function(c){var b=this.unit_;this.unit_=c;this.onUnitChange_(b,c)};a.setUnitByString=function(c){var b=c==="frame"?CriLaTimeInputSubComponent.Unit.FRAME:CriLaTimeInputSubComponent.Unit.SECOND;this.setUnit(b)};a.onUnitChange_=function(b,c){if(b===c){return}this.update_()};a.getFrame=function(){return this.frame_};a.setFrame=function(c){var b=this.frame_;this.frame_=c;this.update_();if(b!==c){this.dispatchEvent("change",{frame:c})}};a.setValue=function(b){this.unit_.setValueTo(this,b)};a.setFramerate=function(b){this.framerate_=b;this.update_()};a.setMinFrame=function(b){this.range_.begin=b;this.update_()};a.setMaxFrame=function(b){this.range_.end=b;this.update_()};a.update_=function(){var c=this.elem_;var d=this.unit_.getMin(this);var b=this.unit_.getMax(this);var e=this.unit_.getStep();c.min=d;c.max=b;c.step=e;var f=this.unit_.getValueFrom(this);this.elem_.value=f}})(CriLaTimeInputSubComponent.prototype);(function(){function a(){}(function(d){d.setValueTo=function(f,e){};d.getValueFrom=function(e){};d.getMin=function(e){};d.getMax=function(e){};d.getStep=function(){}})(a.prototype);function c(){a.call(this)}(function(d,e){CriLaPolyfill.Object.setPrototypeOf(d,e);d.setValueTo=function(g,f){g.setFrame(f)};d.getValueFrom=function(f){return f.getFrame()};d.getMin=function(f){return f.range_.begin};d.getMax=function(f){return f.range_.end};d.getStep=function(){return 1}})(c.prototype,a.prototype);function b(){a.call(this)}(function(d,e){CriLaPolyfill.Object.setPrototypeOf(d,e);d.setValueTo=function(g,f){var h=f*g.framerate_;h=Math.round(h);g.setFrame(h)};d.getValueFrom=function(g){var h=g.getFrame();var f=h/g.framerate_;return f.toFixed(1)};d.getMin=function(f){return f.range_.begin/f.framerate_};d.getMax=function(f){return f.range_.end/f.framerate_};d.getStep=function(){return 0.1}})(b.prototype,a.prototype);CriLaTimeInputSubComponent.Unit={FRAME:new c(),SECOND:new b()}})();function CriLaOnMiniMenuButton(d,e,b){CriLaC00T.call(this,"lac-onminimenu-button");var c=this.elem_;if(e){c.classList.add(e)}var a=document.createElement("div");a.classList.add("lac-onminimenu-inner-button");c.appendChild(a);if(b){a.classList.add(b)}if(d){a.textContent=d}this.innerElem_=a;this.isEnabled_=true}(function(a,b){CriLaPolyfill.Object.setPrototypeOf(a,b);a.addEventListener=function(d,f,e){var c=this;b.addEventListener.call(this,d,function(){if(c.isEnabled_){f.apply(this,arguments)}},e)};a.getInnerElement=function(){return this.innerElem_};a.setText=function(c){return this.innerElem_.textContent=c};a.enable=function(c){this.isEnabled_=c;if(c){this.elem_.classList.remove("lac-onminimenu-button--disabled")}else{this.elem_.classList.add("lac-onminimenu-button--disabled")}};a.isEnabled=function(){return this.isEnabled_}})(CriLaOnMiniMenuButton.prototype,CriLaC00T.prototype);function CriLaOnMiniMenuButtonTimeUnit(){CriLaOnMiniMenuButton.call(this,"","lac-toggle-unit");this.unit_="";this.setUnit("frame")}(function(b,a){CriLaPolyfill.Object.setPrototypeOf(b,a);b.toggleUnit=function(){var c=this.unit_==="frame"?"second":"frame";this.setUnit(c)};b.setUnit=function(c){this.unit_=c;this.setText("単位: "+(c==="frame"?"フレーム":"秒"))};b.getUnit=function(){return this.unit_}})(CriLaOnMiniMenuButtonTimeUnit.prototype,CriLaOnMiniMenuButton.prototype);function CriLaPlayerControlChapterMiniMenu(){var c=this;CriLaPlayerControlMiniMenuBase.call(c);this.sceneFrameRange_=new CriLaFrameRange(0,30);this.framerate_=30;this.separatorsFrame_=[];this.timeUnit_="frame";this.elem_.classList.add("lac-chapter-minimenu");this.headerElem_.textContent="チャプター設定";var b=document.createElement("ol");this.bodyElem_.appendChild(b);var a=new CriLaOnMiniMenuButton("追加","lac-chapter-add");this.footerElem_.appendChild(a.getElement());a.addEventListener("click",this.dispatchAddEvent_.bind(this),false);var d=new CriLaOnMiniMenuButton(this.getUnitButtonTextContent_(),"lac-toggle-unit");this.footerElem_.appendChild(d.getElement());d.addEventListener("click",this.onToggleUnit_.bind(this),false);this.itemListElem_=b;this.addButton_=a;this.toggleUnitButton_=d}(function(c,a){CriLaPolyfill.Object.setPrototypeOf(c,a);c.getTimeUnit=function(){return this.timeUnit_};c.addSeparator=function(e,d){d=d||"frame";var f=this.convertValue_(d,"frame",Number(e));f=this.sceneFrameRange_.clamp(f);this.separatorsFrame_.push(f);this.separatorsFrame_.sort(b);this.dispatchChangeEvent_();this.updateForm_()};c.updateSeparator=function(f,d,e){e=e||"frame";var g=this.convertValue_(e,"frame",Number(f));g=this.sceneFrameRange_.clamp(g);this.separatorsFrame_.splice(d,1,g);this.separatorsFrame_.sort(b);this.dispatchChangeEvent_();this.updateForm_();this.focusInputElemByFrame_(g)};c.setSeparators=function(d,e){e=e||"frame";var f=d.map(function(g){var h=this.convertValue_(e,"frame",Number(g));return this.sceneFrameRange_.clamp(h)},this).sort(b);if(CriLaUtility.Array.isEqual(f,this.separatorsFrame_)){return}CriLaUtility.Array.copy(f,this.separatorsFrame_);this.dispatchChangeEvent_();this.updateForm_()};c.removeSeparator=function(d){this.separatorsFrame_.splice(d,1);this.dispatchChangeEvent_();this.updateForm_()};c.clearSeparators=function(){this.separatorsFrame_.length=0;this.dispatchChangeEvent_();this.updateForm_()};c.reset=function(d,e){this.sceneFrameRange_.duration=d;this.framerate_=e;this.clearSeparators()};c.toggleTimeUnit=function(){this.timeUnit_=this.getNextTimeUnit_();this.updateForm_()};c.enableAddButton=function(d){this.addButton_.enable(d)};c.onChange_=function(g,f){var d=this.getItemElems_().indexOf(f);this.updateSeparator(g.target.value,d,this.timeUnit_)};c.onRemove_=function(g,f){var d=this.getItemElems_().indexOf(f);this.removeSeparator(d)};c.onToggleUnit_=function(d){this.toggleTimeUnit()};c.dispatchChangeEvent_=function(){this.dispatchEventByType("separatorchanged",{frames:this.separatorsFrame_})};c.dispatchAddEvent_=function(d){this.dispatchEventByType("separatoradded")};c.updateForm_=function(){var k=this.separatorsFrame_.map(function(i){return this.convertValue_("frame",this.timeUnit_,i)},this);var g=this.getItemElems_();if(k.length!==g.length){var f=0;while(f<k.length&&f<g.length){var j=k[f];var m=g[f];var h=m.querySelector("input");var l=this.formatValue_(j);var d=Number(h.value);if(l<d){var e=this.addItemElem_(f);e.querySelector("input").value=l;g.splice(f,0,e);++f}else{if(l>d){this.removeItemElem_(m);g.splice(f,1)}else{++f}}}while(g.length<k.length){var m=this.addItemElem_();g.push(m)}while(g.length>k.length){var m=g.pop();this.removeItemElem_(m)}}CriLaUtility.Array.zip(g,k).forEach(function(n){var i=n[0].querySelector("input");i.value=this.formatValue_(n[1]);i.step=this.getNumberStep_();i.max=this.getNumberMax_()},this);this.toggleUnitButton_.setText(this.getUnitButtonTextContent_())};c.getItemElems_=function(){return CriLaPolyfill.Array.from(this.itemListElem_.querySelectorAll(".lac-separator-form-item"))};c.removeItemElem_=function(d){this.itemListElem_.removeChild(d)};c.addItemElem_=function(d){var h=document.createElement("li");h.classList.add("lac-separator-form-item");h.classList.add("lac-separator-form-item--added-animation");var j=document.createElement("span");h.appendChild(j);j.classList.add("lac-separator-number");var g=document.createElement("input");h.appendChild(g);g.type="number";g.min=0;h.addEventListener("change",function(k){this.onChange_(k,h)}.bind(this),false);var i=document.createElement("span");h.appendChild(i);i.classList.add("lac-remove");i.addEventListener("click",function(k){this.onRemove_(k,h)}.bind(this),false);if(d!=null){var f=this.getItemElems_();if(d<f.length){f[d].insertAdjacentElement("beforebegin",h)}else{this.itemListElem_.appendChild(h)}}else{this.itemListElem_.appendChild(h)}var e=function(){h.classList.remove("lac-separator-form-item--added-animation");h.removeEventListener("animationend",e);g.focus()};h.addEventListener("animationend",e,false);return h};c.focusInputElemByFrame_=function(g){var d=this.getItemElems_().map(function(h){return h.querySelector("input")});var f=this.convertValue_("frame",this.timeUnit_,g);var e=CriLaPolyfill.Array.find(d,function(h){return Number(h.value)===f});if(e){e.focus()}};c.getUnitButtonTextContent_=function(){return"単位: "+this.getTimeUnitString_()};c.formatValue_=function(d){switch(this.timeUnit_){case"frame":return Number(d.toFixed(0));case"second":return Number(d.toFixed(2));default:throw new Error("Invalid time unit: "+this.timeUnit_)}};c.convertValue_=function(f,d,e){if(f===d){return e}switch(d){case"frame":return CriUnitValue.secondToFrame(this.framerate_,e);case"second":return CriUnitValue.frameToSecond(this.framerate_,e);default:throw new Error("Invalid time unit: "+d)}};c.getNumberMax_=function(){switch(this.timeUnit_){case"frame":return this.sceneFrameRange_.end;case"second":return CriUnitValue.frameToSecond(this.framerate_,this.sceneFrameRange_.end);default:throw new Error("Invalid time unit: "+this.timeUnit_)}};c.getNumberStep_=function(){switch(this.timeUnit_){case"frame":return 1;case"second":return 0.1;default:throw new Error("Invalid time unit: "+this.timeUnit_)}};c.getNextTimeUnit_=function(){switch(this.timeUnit_){case"frame":return"second";case"second":return"frame";default:throw new Error("Invalid time unit: "+this.timeUnit_)}};c.getTimeUnitString_=function(){switch(this.timeUnit_){case"frame":return"フレーム";case"second":return"秒";default:throw new Error("Invalid time unit: "+this.timeUnit_)}};function b(e,d){return e-d}})(CriLaPlayerControlChapterMiniMenu.prototype,CriLaPlayerControlMiniMenuBase.prototype);function CriLaPlayerControlPlaybackRangeMiniMenu(){var d=this;CriLaPlayerControlMiniMenuBase.call(d);d.sceneFrameRange_=new CriLaFrameRange(0,30);d.playbackFrameRange_=new CriLaFrameRange(0,30);d.enablePin(true);d.elem_.classList.add("lac-playback-range-minimenu");d.headerElem_.textContent="再生範囲調整モード";var a=this.createItem_("開始");var b=this.createItem_("終了");d.bodyElem_.appendChild(a.item);d.bodyElem_.appendChild(b.item);d.inputBegin_=a.input;d.inputEnd_=b.input;d.inputBegin_.addEventListener("change",d.onChange_.bind(d,d.inputBegin_));d.inputEnd_.addEventListener("change",d.onChange_.bind(d,d.inputEnd_));var e=new CriLaOnMiniMenuButtonTimeUnit();this.toggleUnitButton_=e;this.footerElem_.appendChild(e.getElement());e.addEventListener("click",this.onToggleUnitButtonClicked_.bind(this));var c=new CriLaOnMiniMenuButton("範囲リセット");this.rangeResetButton_=c;this.footerElem_.appendChild(c.getElement());c.addEventListener("click",this.onRangeResetButtonClicked_.bind(this))}(function(b,a){CriLaPolyfill.Object.setPrototypeOf(b,a);b.reset=function(c,d){this.sceneFrameRange_.duration=c;this.inputBegin_.setFramerate(d);this.inputBegin_.setMaxFrame(c);this.inputEnd_.setFramerate(d);this.inputEnd_.setMaxFrame(c)};b.setPlaybackRangeFrame=function(c,d){this.inputBegin_.setFrame(c);this.inputEnd_.setFrame(d)};b.onChange_=function(d,f){var g=this.inputBegin_.getFrame();var h=this.inputEnd_.getFrame();if(g>h){var c=this.inputBegin_===d?this.inputEnd_:this.inputBegin_;c.setFrame(d.getFrame())}this.dispatchChangeEvent_()};b.createItem_=function(f){var e=document.createElement("div");e.classList.add("lac-playback-range-minimenu-item");var d=document.createElement("label");d.textContent=f;e.appendChild(d);var c=new CriLaTimeInputSubComponent(30,0,30,"frame");d.appendChild(c.getElement());return{item:e,label:d,input:c}};b.dispatchChangeEvent_=function(){var c=this.inputBegin_.getFrame();var d=this.inputEnd_.getFrame();this.dispatchEventByType("playbackrangechanged",{beginFrame:c,endFrame:d})};b.onToggleUnitButtonClicked_=function(f){var d=this.toggleUnitButton_;d.toggleUnit();var c=d.getUnit();this.inputBegin_.setUnitByString(c);this.inputEnd_.setUnitByString(c)};b.onRangeResetButtonClicked_=function(c){this.dispatchEventByType("playbackrangereset")}})(CriLaPlayerControlPlaybackRangeMiniMenu.prototype,CriLaPlayerControlMiniMenuBase.prototype);function CriLaPlaybackRateSlider(b,a){CriLaSliderBase.call(this,b,a)}(function(a,b){CriLaPolyfill.Object.setPrototypeOf(a,b);a.initialize_=function(d,c){b.initialize_.call(this,d,c);this.addClassName("lac-slider--playback-rate");this.selector_=".lac-slider.lac-slider--playback-rate"}})(CriLaPlaybackRateSlider.prototype,CriLaSliderBase.prototype);function CriLaPlayerControlPlaybackRateMiniMenu(e){var c=this;CriLaPlayerControlMiniMenuBase.call(c);c.addClassName("lac-playback-rate-minimenu");c.playbackRate_=1;c.playbackRateMin_=1;c.playbackRateMax_=2;c.playbackRateList_=[c.playbackRate_];c.headerElem_.textContent="再生速度設定";var d=document.createElement("div");d.classList.add("lac-playback-rate-minimenu-line");c.bodyElem_.appendChild(d);var b=new CriLaPlaybackRateSlider(this.getElement());this.slider_=b;d.appendChild(b.getElement());b.addEventListener("change",this.onChangeSlider_.bind(this));var a=document.createElement("select");this.select_=a;d.appendChild(a);a.addEventListener("change",this.onChangeSelect_.bind(this))}(function(c,a){CriLaPolyfill.Object.setPrototypeOf(c,a);c.setPlaybackRateList=function(e){var d=e.map(b);this.select_.innerHTML="";d.forEach(function(f){this.select_.appendChild(f)},this);this.playbackRateList_=e;this.playbackRateMax_=Math.max.apply(null,e);this.playbackRateMin_=Math.min.apply(null,e);this.setPlaybackRate(this.playbackRate_)};c.getMinIndex=function(d){var f=this.playbackRateList_.map(function(h){return Math.abs(h-d)});var e=Number.POSITIVE_INFINITY;var g=0;f.forEach(function(i,h){if(i<e){e=i;g=h}});return g};c.updatePlaybackRate=function(d,f){var e=this.playbackRate_;this.select_.selectedIndex=f;if(e!==d){this.select_.selectedIndex=f;this.playbackRate_=d;this.dispatchEventByType("playbackratechanged",{playbackRate:d})}};c.setPlaybackRateFromSlider=function(e){var f=this.getMinIndex(e);e=this.playbackRateList_[f];var d=this.getPositionFromPlaybackRate_(e);this.slider_.setPosition(d);this.updatePlaybackRate(e,f)};c.setPlaybackRate=function(e){var g=this.getMinIndex(e);var f=this.playbackRateList_[g];var d=this.getPositionFromPlaybackRate_(f);this.slider_.setPosition(d);this.updatePlaybackRate(e,g)};function b(d){var e=document.createElement("option");e.value=d;e.innerText=d.toFixed(2);if(d===1){e.selected=true}return e}c.getPositionFromPlaybackRate_=function(e){var f=this.playbackRateMin_;var d=this.playbackRateMax_;var g=d-f;if(g===0){return 0.5}return(e-f)/g};c.getPlaybackRateFromPosition_=function(d){return CriGrxMath.lerp(this.playbackRateMin_,this.playbackRateMax_,d)};c.onChangeSelect_=function(e){var d=Number(this.select_.value);this.setPlaybackRate(d)};c.onChangeSlider_=function(e){var d=this.getPlaybackRateFromPosition_(e.detail.position);this.setPlaybackRateFromSlider(d)}})(CriLaPlayerControlPlaybackRateMiniMenu.prototype,CriLaPlayerControlMiniMenuBase.prototype);var CriLaPlayStatus={STOP:0,PLAYING:1,PAUSE:2};CriLaPlayStatus.BEFORE_PAGE_JUMP=3;Object.freeze(CriLaPlayStatus);var CriLaCanvasResolutionUsage={STYLE:1,ATTRIBUTE:2,BOTH:3};Object.freeze(CriLaCanvasResolutionUsage);function CriLaPlayer(){this.implPlayer_=null;if(this.initPluginVideoGroup_){this.initPluginVideoGroup_()}}var criLaRequestAnimationFrame_=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){window.setTimeout(a,1000/15)};var criLaCancelAnimationFrame_=window.cancelAnimationFrame||window.mozcancelAnimationFrame||window.webkitcancelAnimationFrame||window.mscancelAnimationFrame||function(a){window.clearTimeout(a)};(function(a){a.getVersion=function(){return this.implPlayer_.getVersion()};a.initialize=function(d,c){var e=new CriLaEventDispatcher(this);var b=new CriLaC001(e);b.initialize(d,c);this.implPlayer_=b};a.finalize=function(){if(this.implPlayer_){this.implPlayer_.finalize();this.implPlayer_=null}};a.setPassword=function(b){this.implPlayer_.setPassword(b)};a.getPassword=function(){return this.implPlayer_.getPassword()};a.setCanvas=function(b){this.implPlayer_.setCanvas(b)};a.getCanvas=function(){return this.implPlayer_.getCanvas()};a.loadLjtWithResources=function(b,c){return this.implPlayer_.loadLjtWithResources(b,c)};a.setResourcesBaseURL=function(b){this.implPlayer_.setResourcesBaseURL(b);return this};a.setSharedResourcesBaseURL=function(b){this.implPlayer_.setSharedResourcesBaseURL(b);return this};a.getResourcesBaseURL=function(){return this.implPlayer_.getResourcesBaseURL()};a.getSharedResourcesBaseURL=function(b){return this.implPlayer_.getSharedResourcesBaseURL(b)};a.loadLjt=function(b,c){return this.implPlayer_.loadLjtFromUrl(b,c)};a.loadLjtFromString=function(c,b){return this.implPlayer_.loadLjtFromString(c,b)};a.requestLoadResourcesCurrentScene=function(){this.implPlayer_.requestLoadResourcesCurrentScene()};a.requestLoadResourcesBySceneName=function(b){this.implPlayer_.requestLoadResourcesBySceneName(b)};a.requestLoadResources=function(){this.implPlayer_.requestLoadResources()};a.isCompleteCurrentScene=function(){return this.implPlayer_.isCompleteCurrentScene()};a.getCurrentScene=function(){return this.implPlayer_.getCurrentScene()};a.getCurrentSceneWidth=function(){return this.implPlayer_.getCurrentSceneWidth()};a.getCurrentSceneHeight=function(){return this.implPlayer_.getCurrentSceneHeight()};a.resizeCanvasToCurrentScene=function(b,c){this.implPlayer_.resizeCanvasToCurrentScene(b,c)};a.resizeCanvasToFixedRatioWidth=function(c,b,d){this.implPlayer_.resizeCanvasToFixedRatioWidth(c,b,d)};a.resizeCanvasToFixedRatioHeight=function(b,c,d){this.implPlayer_.resizeCanvasToFixedRatioHeight(b,c,d)};a.resizeCanvasContain=function(b){this.implPlayer_.resizeCanvasContain(b)};a.resizeCanvasCover=function(b){this.implPlayer_.resizeCanvasCover(b)};a.resizeCurrentSceneToCanvas=function(){this.implPlayer_.resizeCurrentSceneToCanvas()};a.resizeCurrentSceneToCanvasFixedRatio=function(){this.implPlayer_.resizeContentsToCanvasFixedRatio()};a.resizeFromParentElement=function(){this.implPlayer_.resizeFromParentElement()};a.fullscreen=function(b){this.implPlayer_.fullscreen(b)};a.isFullscreen=function(){return this.implPlayer_.isFullscreen()};a.fullscreenNative=function(b){this.implPlayer_.fullscreenNative(b)};a.getCurrentSceneDuration=function(){return this.implPlayer_.getCurrentSceneDuration()};a.getCurrentSceneLength=function(){return this.implPlayer_.getCurrentSceneDuration()};a.getCurrentSceneFrameRate=function(){return this.implPlayer_.getCurrentSceneFrameRate()};a.getNumScenes=function(){return this.implPlayer_.getNumScenes()};a.getSceneByIndex=function(b){return this.implPlayer_.getSceneByIndex(b)};a.getSceneByName=function(b){return this.implPlayer_.getSceneByName(b)};a.setCurrentSceneByIndex=function(b){return this.implPlayer_.setCurrentSceneByIndex(b)};a.setCurrentSceneByName=function(b){return this.implPlayer_.setCurrentSceneByName(b)};a.getCurrentSceneName=function(){return this.implPlayer_.getCurrentSceneName()};a.setFrame=function(b){this.implPlayer_.setFrame(b);return b};a.getFrame=function(){return this.implPlayer_.getFrame()};a.setTime=function(b){return this.setTimeMs(b)};a.setTimeMs=function(b){this.implPlayer_.setTimeMs(b);return this};a.getTime=function(){return this.getTimeMs()};a.getTimeMs=function(){return this.implPlayer_.getTimeMs()};a.stepFrame=function(b,c){return this.implPlayer_.stepFrame(b,c)};a.setProhibitTimeRangeMs=function(b,c){this.implPlayer_.setProhibitTimeMsRange(b,c)};a.getProhibitTimeRangeMs=function(){return this.implPlayer_.getProhibitTimeMsRange()};a.setProhibitTimeMsRange=a.setProhibitTimeRangeMs;a.getProhibitTimeMsRange=a.getProhibitTimeRangeMs;a.setLoopFlg=function(b){this.implPlayer_.setLoopFlg(b)};a.getLoopFlg=function(){return this.implPlayer_.getLoopFlg()};a.enableBackgroundFill=function(b){this.implPlayer_.enableBackgroundFill(b)};a.enableTapPlay=function(b){this.implPlayer_.enableTapPlay(b)};a.isTapPlayEnabled=function(){return this.implPlayer_.isTapPlayEnabled()};a.setVideoSettings=function(b){this.implPlayer_.setVideoSettings(b)};a.clear=function(){this.implPlayer_.clear()};a.fill=function(b){this.implPlayer_.fill(b)};a.drawWithClear=function(){this.implPlayer_.drawWithClear()};a.draw=function(){return this.implPlayer_.draw()};a.enableEveryFrameDrawing=function(b){this.implPlayer_.enableEveryFrameDrawing(b)};a.setPlayableBufferSizeMs=function(b){this.implPlayer_.setPlayableBufferSizeMs(b)};a.setPlayableBufferSize=function(b,c){this.implPlayer_.setPlayableBufferSize(b,c)};a.play=function(b){this.implPlayer_.play(b)};a.pause=function(){this.implPlayer_.pause()};a.isPaused=function(){return this.implPlayer_.isPaused()};a.stop=function(){this.implPlayer_.stop()};a.isStopped=function(){return this.implPlayer_.isStopped()};a.getPositionXY=function(){return this.implPlayer_.getPositionXY()};a.setPositionXY=function(b,c){this.implPlayer_.setPositionXY(b,c)};a.getRotation=function(){return this.implPlayer_.getRotation()};a.setRotation=function(b){this.implPlayer_.setRotation(b)};a.getScaleXY=function(){return this.implPlayer_.getScaleXY()};a.setScaleXY=function(b,c){this.implPlayer_.setScaleXY(b,c)};a.getPivotXY=function(){return this.implPlayer_.getPivotXY()};a.setPivotXY=function(b,c){this.implPlayer_.setPivotXY(b,c)};a.setPivotSeparateXY=function(e,d,c,b){this.implPlayer_.setPivotSeparateXY(e,d,c,b)};a.setAlpha=function(b){this.implPlayer_.setAlpha(b)};a.getAlpha=function(){return this.implPlayer_.getAlpha()};a.setFontScale=function(b){return this.implPlayer_.setFontScale(b)};a.getFontScale=function(){return this.implPlayer_.getFontScale()};a.getContainedLayerName=function(b,d,c){return this.implPlayer_.getContainedLayerName(b,d,c)};a.getContainedLayers=function(b,d,c){return this.implPlayer_.getContainedLayers(b,d,c)};a.getNumResources=function(){return this.implPlayer_.getNumResources()};a.getResourceByIndex=function(b){return this.implPlayer_.getResourceByIndex(b)};a.getResourceById=function(b){return this.implPlayer_.getResourceById(b)};a.getResourcesByName=function(b){return this.implPlayer_.getResourcesByName(b)};a.resetFontScale=function(){this.implPlayer_.resetFontScale()};a.addEventListener=function(b,c){this.implPlayer_.addEventListener(b,c);return this};a.removeEventListener=function(b,c){this.implPlayer_.removeEventListener(b,c);return this};a.dispatchEvent=function(c,b){this.implPlayer_.dispatchEvent(c,b);return this};a.getAnalysisReport=function(){return this.implPlayer_.getAnalysisReport()};a.clearAnalysisReport=function(){this.implPlayer_.clearAnalysisReport()};a.setControlStyle=function(b){this.implPlayer_.setControlStyle(b);return this};a.getTrackingCode=function(b){return this.implPlayer_.getTrackingCode(b)};a.getStreamType=function(){return this.implPlayer_.getStreamType()};a.canPlayCurrentScene=function(){return this.implPlayer_.canPlayCurrentScene()};a.setVolume=function(b){this.implPlayer_.setVolume(b)};a.getVolume=function(){return this.implPlayer_.getVolume()};a.mute=function(b){this.implPlayer_.mute(b)};a.isMuted=function(){return this.implPlayer_.isMuted()};a.setClickThreshold=function(b,c){this.implPlayer_.setClickThreshold(b,c)};a.setResourceURLSuffix=function(b){this.implPlayer_.setResourceURLSuffix(b)};a.setDefaultDimension_=function(c,b){this.implPlayer_.setDefaultDimension_(c,b)};a.setPlaybackRate=function(b){this.implPlayer_.setPlaybackRate(b)};a.getPlaybackRate=function(){return this.implPlayer_.getPlaybackRate()};a.setPlaybackRateRange=function(c,b){this.implPlayer_.setPlaybackRateRange(c,b)};a.getPlaybackRateRange=function(){return this.implPlayer_.getPlaybackRateRange()};a.isInvisible=function(){return this.implPlayer_.isInvisible()};a.getContentType=function(){return this.implPlayer_.getContentType()};a.setContentType=function(b){this.implPlayer_.setContentType(b)};a.isEnded=function(){return this.implPlayer_.isEnded()};a.zoomTo=function(b,c){this.implPlayer_.zoomTo(b,c)};a.reloadDecodedData_=function(){this.implPlayer_.reloadDecodedData_()};a.unloadDecodedData_=function(){this.implPlayer_.unloadDecodedData_()};a.setMemoryReduction=function(b){this.implPlayer_.setMemoryReduction(b)};a.setControlClassName=function(b){this.implPlayer_.setControlClassName(b)};a.addComponent=function(c,b){this.implPlayer_.addComponent(c,b)};a.addComponents=function(b){this.implPlayer_.addComponents(b)};a.getControls=function(){return this.implPlayer_.getControls()};a.isSeeking=function(){return this.implPlayer_.isSeeking()};a.getChapterSeparatorsFrame=function(){return this.implPlayer_.getChapterSeparatorsFrame()};a.getChapterSeparatorsTimeMs=function(){return this.implPlayer_.getChapterSeparatorsTimeMs()};a.setChapterSeparatorsFrame=function(b){return this.implPlayer_.setChapterSeparatorsFrame(b)};a.setPlaybackRangeFrame=function(b,c){this.implPlayer_.setPlaybackRangeFrame(b,c)};a.resetPlaybackRange=function(){this.implPlayer_.resetPlaybackRange()};a.getPlaybackRangeFrame=function(){return this.implPlayer_.getPlaybackRangeFrame()};a.setupVideoControl=function(){this.implPlayer_.setupVideoControl()};a.setupAudioControl=function(){this.implPlayer_.setupAudioControl()};a.setupDefaultControl=function(){this.implPlayer_.setupDefaultControl()};a.setupAllaroundControl=function(){this.implPlayer_.setupAllaroundControl()};a.setupSwipeControl=function(){this.implPlayer_.setupSwipeControl()};a.setupTemplateControl=function(){this.implPlayer_.setupTemplateControl()};a.isEnabledControlTemplate=function(){this.implPlayer_.isEnabledControlTemplate()};a.isInIframe=function(){return this.implPlayer_.isInIframe()};a.notifyPositionChange=function(c,b){this.implPlayer_.notifyPositionChange(c,b)};a.notifyParentResize=function(){this.implPlayer_.notifyParentResize()};a.notifyFullscreenChange=function(b){this.implPlayer_.notifyFullscreenChange(b)};a.unload=function(){return this.implPlayer_.unload()};a.unloadVideoResource=function(){return this.implPlayer_.unloadVideoResource()};a.setVideoPreloadType=function(b){return this.implPlayer_.setVideoPreloadType(b)};a.enableRequestLoadResource=function(b){this.implPlayer_.enableRequestLoadResource(b)};a.isRequestLoadResourceEnabled=function(){return this.implPlayer_.isRequestLoadResourceEnabled()};a.loadCurrentSceneResourcesAll=function(){this.implPlayer_.loadCurrentSceneResourcesAll()};a.notifyMediaSrcChange=function(){this.implPlayer_.notifyMediaSrcChange()};a.enableFrameInterpolation=function(b){this.implPlayer_.enableFrameInterpolation(b)};a.requestRedraw=function(){this.implPlayer_.requestRedraw()};a.getDistanceFromViewport=function(){return this.implPlayer_.getDistanceFromViewport()};a.drawCurrentSceneToCanvasForcibly=function(){this.implPlayer_.drawCurrentSceneToCanvasForcibly()};a.setPageJumpMode=function(){this.implPlayer_.setPageJumpMode()};a.restoreFromPageJumpMode=function(){this.implPlayer_.restoreFromPageJumpMode()};a.memoryVolume=function(){this.implPlayer_.memoryVolume()};a.pagejump=function(b,c){this.implPlayer_.pagejump(b,c)};a.setRenderTarget=function(b){this.implPlayer_.setRenderTarget(b)};a.setLuminanceAdjustMode=function(b){this.implPlayer_.setLuminanceAdjustMode(b)};a.getLuminanceAdjustMode=function(){return this.implPlayer_.getLuminanceAdjustMode()};a.setLuminanceAdjustSpeed=function(b){this.implPlayer_.setLuminanceAdjustSpeed(b)};a.getLuminanceAdjustSpeed=function(){return this.implPlayer_.getLuminanceAdjustSpeed()};a.setLuminanceAdjustExposureValue=function(b){this.implPlayer_.setLuminanceAdjustExposureValue(b)};a.getLuminanceAdjustExposureValue=function(){return this.implPlayer_.getLuminanceAdjustExposureValue()};a.setLuminanceAdjustExposureBias=function(b){this.implPlayer_.setLuminanceAdjustExposureBias(b)};a.getLuminanceAdjustExposureBias=function(){return this.implPlayer_.getLuminanceAdjustExposureBias()};a.addAudioToCurrentScene=function(b){return this.implPlayer_.addAudioToCurrentScene(b)};a.addAudioBySceneIndex=function(c,b){return this.implPlayer_.addAudioBySceneIndex(c,b)};a.removeAudioFromCurrentScene=function(b){return this.implPlayer_.removeAudioFromCurrentScene(b)};a.removeAudioBySceneIndex=function(c,b){return this.implPlayer_.removeAudioBySceneIndex(c,b)};a.setIframeMode=function(b){this.implPlayer_.setIframeMode(b)};a.setSeekStyle=function(b){return this.implPlayer_.setSeekStyle(b)};a.sendQuestionnaireAnalyticsData=function(b){this.implPlayer_.sendAnalyticsCommon_("la-answer",b)};a.getCompanyCode=function(){return this.implPlayer_.getCompanyCode()};a.sendCognitionAnalyticsData=function(b){this.implPlayer_.sendAnalyticsCommon_("la-client-register",b)}})(CriLaPlayer.prototype);var CriLaStreamType={SEQ:0,RANDOM:1};Object.freeze(CriLaStreamType);function CriLaC00K(){this.timerCurrentTime_=0;this.frame_=0;this.delta_=0;this.sceneFPS_=0;this.sceneName_=0;this.sceneFrameRange_=new CriLaFrameRange(0,0);this.calculatedSceneDuration_=0;this.CriLaP11m=null;this.prohibitFrameRange_=new CriLaFrameRange(0,0);this.enabledProhibitFrameRange_=false;this.playbackFrameRange_=new CriLaFrameRange(0,0);this.CriLaP11k=null;this.CriLaP11l=false;this.loop=false;this.firstPlayStart=false;this.firstPlayEnd=false;this.status_=CriLaPlayStatus.STOP;this.objectType=null;this.streamType_=CriLaStreamType.RANDOM;this.restoreState=null;this.seekStyle=CriLaSeekStyle.ALL;this.hasPlayedFrame=0;this.playRangeEnd_=0;this.seekStyleEndFrame=0}(function(a){a.initialize=function(b){this.setup(b)};a.setup=function(e){var d=this.CriLaP11m=e.CriLaP11m;this.CriLaP11k=e.CriLaP11k;var c=e.CriLaP111;this.setSceneParam(c);d.dispatch(CriLaEvent.SEEKBAR_RESET_NEEDED);var b=this;d.addEventListener(CriLaEvent.ANALYTICS_UPDATED,function(h){var g=h.detail;var f=g.isSequential;var i=g.exceeded;b.updateAnalytics(f,i)});this.hasPlayedFrame=0};a.setSceneParam=function(b){this.sceneFPS_=b.getFramerate();this.sceneName_=b.getName();this.sceneFrameRange_.duration=b.getDuration();this.playbackFrameRange_.duration=b.getDuration();this.calculatedSceneDuration_=b.getCalculatedDuration()};a.updateMainLoopTime=function(){var b=this.getTimeMs_();this.delta_=(b-this.timerCurrentTime_);this.timerCurrentTime_=b};a.getDeltaTime=function(){return this.delta_};a.isEnded=function(){return this.isExceededLastFrame_(this.frame_)};a.isExceededLastFrame_=function(b){return this.playbackFrameRange_.isExceededLastFrame(b)};a.getVideoLastFrame=function(){return this.sceneFrameRange_.last};a.getBeginFrame=function(){return this.playbackFrameRange_.begin};a.getEndFrame=function(){return this.playbackFrameRange_.end};a.getLastFrame=function(){return this.playbackFrameRange_.last};a.seekLastFrame=function(){this.seekFrame(this.getLastFrame())};a.replay=function(){this.seekFrame(this.getBeginFrame())};a.validateSequential_=function(d,c,b){if(d==true&&c==true){b=false}return b};a.parseInFrame=function(b){b=this.playbackFrameRange_.clampWithPlayableFrame(b);b=this.fixFrameProhibited(b);return b};a.seekFrame=function(c){var b=this.getStatus()==CriLaPlayStatus.PAUSE;var d=this.seekStyle==CriLaSeekStyle.BACK&&this.hasPlayedFrame<c;if(d){c=this.hasPlayedFrame}this.setFrame(c,false);this.seekingCommon();this.seekedCommon();if(d&&b){this.dispatchFrameUpdated_()}};a.seekTimeMs=function(b){var c=CriUnitValue.secondToFrame(this.sceneFPS_,b/1000);this.seekFrame(c)};a.getProhibiteOutsideFrame=function(){var b=Math.max(0,this.prohibitFrameRange_.begin-1);var c=Math.min(this.getLastFrame(),this.prohibitFrameRange_.end+1);if(!this.getIsFrameProhibited(b)){return b}else{if(!this.getIsFrameProhibited(c)){return c}}return null};a.setFrame=function(i,f){var h=this.isExceededLastFrame_(i);var e=this.loop;var d=Boolean(f);var c=this.parseInFrame(i);if(this.frame_===c){return}if(this.getIsFrameProhibited(c)){var g=this.getProhibiteOutsideFrame();if(g){this.seekFrame(g)}this.dispatchFrameUpdated_();this.pause();return}if(this.seekStyle==CriLaSeekStyle.BACK){var b=Math.max(this.hasPlayedFrame,i+1);b=this.playRangeEnd_!=0?Math.min(this.playRangeEnd_,b):b;this.setPlaybackRangeFrameBySeekStyleBack(this.playbackFrameRange_.begin,b);h=this.isExceededLastFrame_(i)}this.frame_=c;this.dispatchAnalyticsUpdated_(f,h);this.dispatchFrameUpdated_();this.hasPlayedFrame=Math.max(c,this.hasPlayedFrame);if(h){this.seekLastFrame();if(d){if(!e){this.end()}this.dispatchFirstPlayEnd()}if(e&&this.isPlaying()){this.replay()}}};a.updateAnalytics=function(b,d){if(this.isSeeking()){return}var c=this.getFrame();if(d==true){var e=this.getEndFrame();this.CriLaP11k.updateLog(this.sceneName_,e)}if(b==true){this.CriLaP11k.updateLog(this.sceneName_,c)}else{this.CriLaP11k.createLog(this.sceneName_,c)}};a.dispatchAnalyticsUpdated_=function(b,d){var e=CriLaEvent.ANALYTICS_UPDATED;var c=this.CriLaP11m;c.dispatch(e,c.createEvent(e,{isSequential:b,exceeded:d}))};a.setTimeMs=function(c,b){var d=(c*this.sceneFPS_/1000);this.setFrame(d,b)};a.getFrame=function(){return this.parseInFrame(this.frame_)};a.getTimeMs=function(){return this.getFrame()/this.sceneFPS_*1000};a.seekingCommon=function(){this.dispatch(CriLaEvent.SEEKING)};a.seekedCommon=function(){this.dispatch(CriLaEvent.SEEKED)};a.play=function(){var c=this.getFrame();var b=this.isExceededLastFrame_(c);if(b){this.replay()}if(this.playbackFrameRange_.duration===0&&this.sceneFrameRange_.duration!==0){return false}if(this.getIsFrameProhibited(this.getFrame())){return false}if(this.isPlaying()){this.updateMainLoopTime()}this.setStatus_(CriLaPlayStatus.PLAYING);this.dispatchFirstPlayStart();return true};a.pause=function(){this.setStatus_(CriLaPlayStatus.PAUSE);return true};a.stop=function(){this.seekFrame(this.getBeginFrame());this.setStatus_(CriLaPlayStatus.STOP);return true};a.end=function(){this.pause();this.dispatch(CriLaEvent.PLAY_END);return true};a.dispatchFirstPlayStart=function(){if(this.firstPlayStart==false){this.firstPlayStart=true;this.dispatch(CriLaEvent.FIRST_PLAY_START)}};a.dispatchFirstPlayEnd=function(){if(this.firstPlayEnd==false){this.firstPlayEnd=true;this.dispatch(CriLaEvent.FIRST_PLAY_END)}};a.isSeeking=function(){return this.CriLaP11l};a.getTimeMs_=function(){return criLaTimer_GetTimeMs()};a.fixFrameProhibited=function(b){if(this.getIsFrameProhibited(b)){return this.prohibitFrameRange_.begin}return b};a.getIsFrameProhibited=function(b){return this.enabledProhibitFrameRange_&&this.prohibitFrameRange_.isInnerFrame(b)};a.setProhibitTimeMsRange=function(b,c){this.prohibitFrameRange_.begin=CriUnitValue.secondToFrame(this.sceneFPS_,b/1000);this.prohibitFrameRange_.end=CriUnitValue.secondToFrame(this.sceneFPS_,c/1000);this.enabledProhibitFrameRange_=true};a.setPlaybackRangeFrameBySeekStyleBack=function(f,g){var b=this.playbackFrameRange_;var e=this.sceneFrameRange_.duration;f=this.sceneFrameRange_.clampWithPlayableFrame(f);g=CriGrxMath.clamp(f,e,g);f=Math.round(f);g=Math.round(g);var d=b.eq(b.begin,f);var c=b.eq(b.end,g);if(d&&c){return}b.begin=f;b.end=g;this.dispatch(CriLaEvent.PLAYBACK_RANGE_CHANGE)};a.setPlaybackRangeFrame=function(f,g){var b=this.playbackFrameRange_;var e=this.sceneFrameRange_.duration;f=this.sceneFrameRange_.clampWithPlayableFrame(f);g=CriGrxMath.clamp(f,e,g);f=Math.round(f);g=Math.round(g);var d=b.eq(b.begin,f);var c=b.eq(b.end,g);if(d&&c){return}if(this.isPlaying()){this.pause()}if(this.seekStyle==CriLaSeekStyle.BACK){f=Math.min(this.hasPlayedFrame,f)}b.begin=f;b.end=g;this.dispatch(CriLaEvent.PLAYBACK_RANGE_CHANGE);this.playRangeEnd_=g;if(!d){this.seekFrame(this.getBeginFrame())}else{this.seekLastFrame()}};a.getPlaybackRangeFrame=function(){return{beginFrame:this.playbackFrameRange_.begin,endFrame:this.playbackFrameRange_.end}};a.setLoop=function(b){this.loop=b;this.dispatch(CriLaEvent.LOOP_CHANGE)};a.getLoop=function(){return this.loop};a.setStatus_=function(b){this.status_=b;var c="";switch(b){case CriLaPlayStatus.PLAYING:c=CriLaEvent.PLAY_START;break;case CriLaPlayStatus.PAUSE:c=CriLaEvent.PAUSE;break;case CriLaPlayStatus.STOP:c=CriLaEvent.STOP;break}if(c){this.dispatch(c)}};a.getStatus=function(){return this.status_};a.isPlaying=function(){return this.getStatus()===CriLaPlayStatus.PLAYING};a.getStreamType=function(){return this.streamType_};a.setPlaybackRate=function(b){return this.setPlaybackRateImpl_(b)};a.getPlaybackRate=function(){return this.getPlaybackRateImpl_()};a.setPlaybackRateImpl_=function(b){};a.getPlaybackRateImpl_=function(){};a.switchStatus_=function(){var b=this.status_;if(b!=CriLaPlayStatus.PLAYING){this.play()}else{this.pause()}};a.dispatchFrameUpdated_=function(){var b=this.CriLaP11m;var c=b.createEvent(CriLaEvent.FRAME_UPDATED,{stepTimeMs:this.getDeltaTime()});this.dispatch(CriLaEvent.FRAME_UPDATED,c)};a.dispatch=function(c,b){this.CriLaP11m.dispatch(c,b)};a.notifyMediaSrcChange=function(){};a.setPageJumpMode=function(){this.restoreState=this.getStatus();this.pause();this.setStatus_(CriLaPlayStatus.BEFORE_PAGE_JUMP)};a.restoreFromPageJumpMode=function(){switch(this.restoreState){case CriLaPlayStatus.PLAYING:break;case CriLaPlayStatus.PAUSE:break;case CriLaPlayStatus.STOP:break}this.setStatus_(this.restoreState);this.restoreState=null};a.refMediaTime=function(){return false};a.forceSeekForChromeVideo=function(){};a.shouldForceSeekForChromeVideo=function(){return false};a.setSeekStyle=function(c){this.seekStyle=c;switch(this.seekStyle){case CriLaSeekStyle.ALL:this.setPlaybackRangeFrameBySeekStyleBack(this.playbackFrameRange_.begin,this.sceneFrameRange_.end);break;case CriLaSeekStyle.BACK:var b=this.hasPlayedFrame==0?1:this.hasPlayedFrame;this.setPlaybackRangeFrameBySeekStyleBack(this.playbackFrameRange_.begin,b);break}}})(CriLaC00K.prototype);function CriLaC00M(){CriLaC00K.call(this)}CriLaPolyfill.Object.setPrototypeOf(CriLaC00M.prototype,CriLaC00K.prototype);function CriLaC00O(a,b){this.elem_=a;this.canPlay_=false;this.requestPlayOnCanPlay_=false;this.sceneFPS_=b;this.activated_=false;this.frame_=0;this.CriLaP11m=document.createElement("eventdispatcher");this.frameRange_=new CriLaFrameRange(0,0);this.showFrameRange_=new CriLaFrameRange(0,0);this.playableUrlSet_={};this.registerEvents_()}(function(a){a.getElement=function(){return this.elem_};a.getReadyState=function(){return this.elem_.readyState};a.setFrame=function(c){var b=this.elem_;if(b.readyState===0){this.frameQueued_=c;return}this.updateFrameRangeByElem_();if(c<0){this.setFrame(0);return}if(this.isExceededLastShowFrame_(c)){this.seekLastFrame_();return}this.setFrame_(c)};a.setTimeMs=function(b){this.setFrame(b/1000*this.sceneFPS_)};a.setFrame_=function(e){var c=0.0001;var d=(e/this.sceneFPS_)+c;var b=((parseInt(e)+1)/this.sceneFPS_);d=d>=b?b-c:d;this.elem_.currentTime=d;this.frame_=e};a.setLastFrame_=function(b){this.elem_.currentTime=parseInt(b)/this.sceneFPS_;this.frame_=b};a.getFrame=function(){return this.elem_.currentTime*this.sceneFPS_};a.getDuration=function(){var b=Number(this.elem_.duration);if(isNaN(b)){b=0}var c=Math.round(b*this.sceneFPS_);return Math.max(c,0)};a.getLastFrame=function(){this.updateFrameRangeByElem_();return this.frameRange_.last};a.getLastShowFrame_=function(){this.updateFrameRangeByElem_();return this.showFrameRange_.last};a.containsFrame=function(b){this.updateFrameRangeByElem_();return this.frameRange_.isPlayableFrame(b)};a.play=function(e){if(this.isPlaying()||this.requestPlayOnCanPlay_){return false}function b(){if(typeof e==="function"){e()}}this.updateFrameRangeByElem_();if(this.isExceededLastShowFrame_(this.getFrame())){return false}var d=this.elem_.play();if(d!=null){d.then(function(){},function(g){var h=String(g);if(CriLaBrowserSetting.isSaveData()==true||h.match(/interact/)!=null){b()}else{if(h.match(/NotAllowedError/)!=null){b()}}})}if(!this.isPlaying()){var c=CriUAChecker.getOS();var f=CriUAChecker.getOSVersion();if(c===CriUAOS.iOS&&f<10){b();return false}this.requestPlayOnCanPlay_=true;return false}else{this.canPlay_=true;return true}};a.pause=function(){this.requestPlayOnCanPlay_=false;if(!this.isPlaying()){return}this.elem_.pause()};a.stop=function(){this.requestPlayOnCanPlay_=false;this.elem_.pause()};a.setVisibility=function(b){CriLaHtmlCss.setVisibility(this.elem_,b)};a.canPlayEvent_=function(b){if(this.requestPlayOnCanPlay_){this.requestPlayOnCanPlay_=false;this.play()}};a.isPlaying=function(){return !this.elem_.paused};a.canPlay=function(){return this.canPlay_};a.addEventListener=function(b,d,c){this.CriLaP11m.addEventListener(b,d,c)};a.dispatchEvent=function(b){this.CriLaP11m.dispatchEvent(b)};a.setPlaybackRate=function(b){try{var c=this.elem_;c.playbackRate=b;c.defaultPlaybackRate=b}catch(d){console.warn("LiveAct Warning：PlayBackRate"+b+"はブラウザの制限で設定することができません。")}};a.getPlaybackRate=function(){return parseFloat(this.elem_.playbackRate)};a.seekLastFrame_=function(){function b(){var d=navigator.userAgent;if(!d.match(/MSIE/)&&!d.match(/Trident/)){return false}var c=d.match(/(MSIE\s|rv:)([\d\.]+)/)[2];if(c!=11){return false}var e=/(Windows 7|Windows NT 6.1)/;if(!e.test(d)){return false}return true}if(!b()){this.setLastFrame_(this.getLastShowFrame_())}};a.loadByInteraction_=function(){if(this.elem_.networkState===0){this.load()}};a.load=function(){this.elem_.load()};a.registerEvents_=function(){var f=["abort","canplay","canplaythrough","durationchange","emptied","ended","error","loadeddata","loadedmetadata","loadstart","pause","play","playing","progress","ratechange","seeked","seeking","stalled","suspend","timeupdate","volumechange","waiting"];var e=this;var d=this.elem_;f.forEach(function(g){d.addEventListener(g,function(){var h=new CriLaPolyfill.Event.CustomEvent(g);e.dispatchEvent(h)},false)});d.addEventListener("canplay",this.canPlayEvent_.bind(this));d.addEventListener("click",this.loadByInteraction_.bind(this));d.addEventListener("waiting",function(){e.isWaiting_=true;e.waitStartPos_=e.getFrame()},false);d.addEventListener("timeupdate",function(g){if(e.waitStartPos_!==e.getFrame()){e.isWaiting_=false}},false);d.addEventListener("timeupdate",function c(g){e.activate();e.playableUrlSet_[d.src]=true;d.removeEventListener("timeupdate",c,false)},false);var b=CriUAChecker.getOS()==CriUAOS.iOS&&CriUAChecker.getBrowser()==CriUABrowser.Safari?"loadeddata":"loadedmetadata";d.addEventListener(b,function(){if(e.frameQueued_!=null){e.setFrame(e.frameQueued_);e.frameQueued_=null}});d.addEventListener("error",function(){var i=false;var g=d.error;if(g&&g.code===4){if(e.playableUrlSet_[d.src]){i=true}}if(i){var h=new CriLaPolyfill.Event.CustomEvent("crash");e.dispatchEvent(h)}})};a.isMuted=function(){return this.elem_.muted||this.elem_.volume===0};a.isWaiting=function(){return this.isWaiting_};a.activate=function(){if(this.isActivated()){return}if(this.elem_.currentTime<this.frame_){this.setFrame(this.frame_)}this.activated_=true};a.isActivated=function(){return this.activated_};a.updateFrameRangeByElem_=function(){var b=this.getDuration();if(b===0){return}this.frameRange_.duration=b;this.showFrameRange_.duration=b-1};a.isExceededLastShowFrame_=function(b){return this.showFrameRange_.isExceededLastFrame(b)};a.shouldForceSeekForChromeVideo=function(){if(this.elem_.readyState==1&&this.elem_.paused==false&&this.elem_.currentTime==0){return true}return false}})(CriLaC00O.prototype);function CriLaC00P(){CriLaC00K.call(this);this.streamType_=CriLaStreamType.SEQ;this.media_=null;this.videoFrameRange_=null;this.requestValidateRefMediaInSeeked_=false}(function(b,a){CriLaPolyfill.Object.setPrototypeOf(b,a);b.TARGET_RESOURCE_TYPE=CriLaResourceType.VIDEO;b.setup=function(c){a.setup.call(this,c);this.media_=new CriLaC00O(c.getCurrentMediaPlayer().getTimeManagerElement(),this.sceneFPS_);this.registerEvent_()};b.registerEvent_=function(){var d=this.media_;d.addEventListener("timeupdate",this.videoTimeUpdateEvent_.bind(this),false);d.addEventListener("seeking",this.videoSeekingEvent_.bind(this),false);d.addEventListener("seeked",this.videoSeekedEvent_.bind(this),false);d.addEventListener("loadedmetadata",this.mediaLoadedMetaDataEvent_.bind(this),false);var c=0;d.addEventListener("crash",function(){if(c<10){c++;window.setTimeout(function(){d.load()},Math.random()*1000)}});this.CriLaP11m.addEventListener(CriLaEvent.FRAME_UPDATED,this.validateRefMediaTime.bind(this))};b.setSceneParam=function(k){a.setSceneParam.call(this,k);var c=k.getNumLayers();var g=null;for(var f=0;f<c;f++){var e=k.getLayerByIndex(f);var j=e.resource;if(j&&j.type===this.TARGET_RESOURCE_TYPE){g=e;break}}var h=0;var d=this.sceneFrameRange_.duration;if(g){h=g.getStartShowFrame();d=g.getShowDuration()}h=isNaN(h)?0:h;d=isNaN(d)?60*this.sceneFPS_:d;this.videoFrameRange_=new CriLaFrameRange(h,d)};b.validateRefMediaTime=function(){if(this.requestValidateRefMediaInSeeked_==true){return}this.refMediaTime_()};b.hasTimeLag_=function(e){var d=Math.abs(e-this.getSceneFrameFromMedia_())/this.sceneFPS_;var c=d>0.3;return c};b.isMediaWaiting_=function(){var c=this.media_.isWaiting();return c};b.setFrame=function(i,f){var e=true;if(this.refMediaTime_()){var d=this.isMediaWaiting_();var c=this.hasTimeLag_(i);if(f&&(d||c)){e=false}if(this.shouldForceSeekForChromeVideo()==true){this.forceSeekForChromeVideo()}}if(e){a.setFrame.call(this,i,f);var g=this.media_;if(!f&&g){var h=this.getMediaFrame_();this.media_.setFrame(h)}}if(this.refMediaTime_()){this.syncMedia_()}};b.getSceneFrameFromMedia_=function(){return this.videoFrameRange_.start+this.media_.getFrame()};b.getMediaFrame_=function(){return this.getFrame()-this.videoFrameRange_.start};b.resetMediaDuration_=function(){var c=this.media_.getDuration();if(isNaN(c)){return}var d=this.videoFrameRange_?this.videoFrameRange_.start:0;this.calculatedSceneDuration_=Math.max(this.calculatedSceneDuration_,d+c);this.sceneFrameRange_.duration=Math.max(this.sceneFrameRange_.duration,this.calculatedSceneDuration_);this.playbackFrameRange_.duration=this.sceneFrameRange_.duration;this.videoDuration_=new CriLaFrameRange(d,this.sceneFrameRange_.duration);this.CriLaP11k.updateSceneLength(this.sceneName_,c);this.CriLaP11m.dispatch(CriLaEvent.SEEKBAR_RESET_NEEDED)};b.play=function(){var c=a.play.call(this);this.media_.play(this.pause.bind(this));if(this.refMediaTime_()){this.syncMedia_()}else{this.media_.pause()}return c};b.pause=function(){this.media_.pause();return a.pause.call(this)};b.stop=function(){this.media_.stop();return a.stop.call(this)};b.videoTimeUpdateEvent_=function(c){if(!this.refMediaTime_()){return}if(!this.media_){return}if(this.media_.getReadyState()===0){return}this.checkAndResetMediaDuration_();this.syncToMedia_()};b.videoSeekingEvent_=function(c){this.CriLaP11l=true;this.seekingCommon()};b.videoSeekedEvent_=function(c){var d=this.media_.getFrame();this.CriLaP11k.createLog(this.sceneName_,d);this.requestValidateRefMediaInSeeked_=false;this.seekedCommon();this.CriLaP11l=false};b.mediaLoadedMetaDataEvent_=function(c){this.checkAndResetMediaDuration_()};b.checkAndResetMediaDuration_=function(){if(this.sceneFrameRange_.duration<this.sceneFPS_){this.resetMediaDuration_()}};b.setPlaybackRateImpl_=function(c){this.media_.setPlaybackRate(c)};b.getPlaybackRateImpl_=function(){return this.media_.getPlaybackRate()};b.refMediaTime=function(){return this.refMediaTime_()};b.refMediaTime_=function(){var d=Boolean(this.refMediaTimeOld_);var c=this.refMediaTimeImpl_();this.refMediaTimeOld_=c;if(d!==c){this.onRefMediaTimeChange_(c)}return c};b.refMediaTimeImpl_=function(){var f=this.media_;var g=this.getMediaFrame_();var d=this.getFrame();var e=this.videoFrameRange_;var c=true;if(e.duration!=0){e.start<=d&&d<=(e.start+e.duration)}return Boolean(f&&f.containsFrame(g)&&c)};b.onRefMediaTimeChange_=function(c){var e=this.media_;var g=this.isPlaying();if(c){if(g){e.play(this.pause.bind(this))}}else{e.pause()}var d=c;this.media_.setVisibility(d);var f=this.getMediaFrame_();this.media_.setFrame(f)};b.syncMedia_=function(){var c=this.media_;if(!c){return}if(this.isPlaying()===c.isPlaying()){return}if(!c.containsFrame(this.getMediaFrame_())){return}if(this.isPlaying()&&!c.isPlaying()){c.play(this.pause.bind(this))}else{if(!this.isPlaying()&&c.isPlaying()){c.pause()}}};b.syncToMedia_=function(){if(!this.isPlaying()){return}if(!this.media_.isActivated()){return}var c=this.getSceneFrameFromMedia_();this.setFrame(c,true)};b.notifyMediaSrcChange=function(){this.resetMediaDuration_()}})(CriLaC00P.prototype,CriLaC00K.prototype);function CriLaC00Q(){CriLaC00P.call(this)}(function(b,a){CriLaPolyfill.Object.setPrototypeOf(b,a);b.forceSeekForChromeVideo=function(){var d=1;var c=this.media_.getFrame();if(c<d){this.media_.setFrame(d)}};b.shouldForceSeekForChromeVideo=function(){var c=this.getStatus();if(CriUAChecker.isMobile()==true||CriUAChecker.getBrowser()!=CriUABrowser.Chrome){return false}return this.media_.shouldForceSeekForChromeVideo()}})(CriLaC00Q.prototype,CriLaC00P.prototype);function CriLaC00R(){CriLaC00P.call(this);this.streamType_=CriLaStreamType.RANDOM}(function(c,b,a){CriLaPolyfill.Object.setPrototypeOf(c,b);c.TARGET_RESOURCE_TYPE=CriLaResourceType.AUDIO;c.refMediaTimeImpl_=function(){return b.refMediaTimeImpl_.call(this)&&!this.media_.isMuted()};c.play=function(){var d=a.play.call(this);if(this.media_.isMuted()==true){return d}this.media_.play(this.pause.bind(this));if(this.refMediaTime_()){this.syncMedia_()}else{this.media_.pause()}return d}})(CriLaC00R.prototype,CriLaC00P.prototype,CriLaC00K.prototype);function VideoAudioTimeManager(){CriLaC00Q.call(this);this.videoFrameRangeSub_=null}(function(b,c,a){CriLaPolyfill.Object.setPrototypeOf(b,c);b.setup=function(d){a.setup.call(this,d);this.media_=new CriLaC00O(d.getCurrentVideoPlayer().getTimeManagerElement(),this.sceneFPS_);this.subMedia_=new CriLaC00O(d.getCurrentAudioPlayer().getTimeManagerElement(),this.sceneFPS_);this.registerEvent_()};b.registerEvent_=function(){c.registerEvent_.call(this);var d=this.subMedia_;d.addEventListener("pause",function(){d.pause()})};b.play=function(){c.play.call(this);this.syncSubMedia_()};b.pause=function(){this.subMedia_.pause();c.pause.call(this)};b.setSceneParam=function(l){c.setSceneParam.call(this,l);var d=l.getNumLayers();var k=null;for(var g=0;g<d;g++){var f=l.getLayerByIndex(g);var j=f.resource;if(j&&j.type===CriLaResourceType.AUDIO){k=f;break}}var h=0;var e=this.sceneFrameRange_.duration;if(k){h=k.getStartShowFrame();e=k.getShowDuration()}this.videoFrameRangeSub_=new CriLaFrameRange(h,e)};b.getSubMediaFrame_=function(){return this.getFrame()-this.videoFrameRangeSub_.start};b.syncSubMediaTime_=function(){this.subMedia_.setFrame(this.getSubMediaFrame_())};b.syncMedia_=function(){c.syncMedia_.call(this);this.syncSubMedia_()};b.syncSubMedia_=function(){var d=this.subMedia_;if(!d){return}if(!this.videoFrameRangeSub_.isPlayableFrame(this.getFrame())){d.pause();return}if(this.isPlaying()===d.isPlaying()){return}if(!d.containsFrame(this.getSubMediaFrame_())){return}if(this.isPlaying()&&!d.isPlaying()){this.syncSubMediaTime_();d.play()}else{if(!this.isPlaying()&&d.isPlaying()){d.pause()}}}})(VideoAudioTimeManager.prototype,CriLaC00Q.prototype,CriLaC00K.prototype);function CriLaAction(){this.event_=null}(function(a){a.preAction=function(){};a.doAction=function(b){}})(CriLaAction.prototype);function CriLaActionOpenURL(a,b){CriLaAction.call(this);this.url_=a;this.target_=b}(function(a,b){CriLaPolyfill.Object.setPrototypeOf(a,b);a.doAction=function(c){window.open(this.url_,this.target_)}})(CriLaActionOpenURL.prototype,CriLaAction.prototype);function CriLaActionExecFunction(a){CriLaAction.call(this);this.functionName_=a}(function(a,b){CriLaPolyfill.Object.setPrototypeOf(a,b);a.doAction=function(c){var d=this.functionName_;if(CriLaUtility.functionExists(d)){window[d](c)}}})(CriLaActionExecFunction.prototype,CriLaAction.prototype);var CriLaClickableMapShapeType={RECT:"rect"};function CriLaClickableAnimation(){}function CriLaC010(){this.position=CriGrxVector2.createFromXY(0,0);this.scale=CriGrxVector2.createFromXY(100,100);this.pivot=CriGrxVector2.createFromXY(0,0);this.rotate=0}function CriLaClickableArea(b,a){this.shape=CriLaClickableMapShapeType.RECT;this.startTime=0;this.duration=0;this.name="";this.actionObj=null;this.animation=null;this.resolution=[b,a];this.transform=new CriLaC010();this.fillStyle=CriLaClickableArea.generateColor_()}CriLaClickableArea.generateColor_=(function(){var b=360;var a=0;return function(){var e=a.toString(2);var g=Array.prototype.reverse.call(e.split("")).join("");var d=parseInt(g,2);var h=1<<e.length;var f=Math.round(b*d/h);++a;var c="hsla("+f+", 100%, 50%, 0.25)";return c}})();(function(a){Object.defineProperty(a,"end",{get:function(){return this.startTime+this.duration},set:function(b){this.duration=b-this.startTime}});a.isValid=function(c){var d=this.startTime;var b=this.end;return d<=c&&c<b};a.isClicked=function(b,i){var h=this.transform.position;var e=this.resolution;var g=h.x;var d=h.x+e[0];var f=h.y;var c=h.y+e[1];return g<=b&&b<d&&f<=i&&i<c};a.draw=function(m,f){var b=m.canvas;var c=b.width;var l=b.height;var i=f[0];var d=f[1];var j=this.transform.position.x;var g=this.transform.position.y;var k=this.resolution[0];var e=this.resolution[1];j=j/i*c;g=g/d*l;k=k/i*c;e=e/d*l;m.beginPath();m.rect(j,g,k,e);m.fillStyle=this.fillStyle;m.fill()}})(CriLaClickableArea.prototype);function CriLaClickableMap(){this.isLoaded=false;this.isVisible_=false;this.list_=[];this.sceneFPS_=0;this.sceneResolution=[0,0];this.CriLaP11m=document.createElement("eventdispatcher")}(function(a){a.initialize=function(i,h){var d=this;var c=i.getCanvas();var k=c.getContext("2d");var e=false;var f=c.parentNode.getElementsByClassName("lac-video-div")[0]||c;var j=function(l){if(l){return f.style.cursor=l}else{return f.style.cursor}};i.addEventListener("click",function(o){var t=i.getControls();var v=t.getScreenPlayVisibility();if(v==true){return}var m=o.detail.layers;var n=m.map(function(x){return x.name});var u=d.list_.some(function(y){var x=y.name;if(x&&n.indexOf(x)!==-1){y.actionObj.preAction(i);y.actionObj.doAction(o);return true}return false});if(u){return}var s=o.detail.point;var r=s.x;var q=s.y;var p=i.getFrame();for(var l=0;l<d.list_.length;l++){var w=d.list_[l];if(!w.isValid(p)){continue}if(w.isClicked(r,q)){w.actionObj.preAction(i);w.actionObj.doAction(o);break}}});i.addEventListener(CriLaEvent.DRAW,function(n){var m=i.getFrame();if(d.getVisibility()){d.list_.forEach(function(o){if(o.isValid(m)){d.drawClickableArea_(k,o)}})}var l=d.list_.some(function(o){return o.isValid(m)});if(e!=l){j(l?"pointer":"unset");e=l}});d.addEventListener("load",function(){if(d.getVisibility()){return}var m=d.list_.map(function(n){return n.name}).filter(Boolean);var l=i.getSceneByName(i.getCurrentSceneName());m.forEach(function(o){var n=l.getLayersByName(o);n.forEach(function(p){p.visibility=false})})});this.sceneFPS_=i.getCurrentSceneFrameRate();var g=i.getCurrentSceneWidth();var b=i.getCurrentSceneHeight();this.sceneResolution=[g,b];this.setup_(h)};a.setup_=function(b){this.load_(b)};a.setVisibility=function(b){this.isVisible_=b};a.getVisibility=function(){return this.isVisible_};a.load_=function(b){var c=this;CriLaXHR.requestLoad(b,"json",function(d){c.list_=c.createArea_(d);c.isLoaded=true;c.dispatchEvent(new CriLaPolyfill.Event.CustomEvent("load"))},null,{async:true})};a.createArea_=function(e){var c=e.clickable_area;if(!c){return[]}var d=this;var b=e.clickable_area.map(function(i){var f=d.sceneResolution;var h=new CriLaClickableArea(f[0],f[1]);h.startTime=d.parseTime_(i.start_time,0);h.duration=d.parseTime_(i.duration,0);var g=d.parseTime_(i.end,-1);if(g>=0){h.end=g}h.name=String(i.name||"");h.transform=d.parseTransform_(i.transform,h.transform);h.resolution=d.parseResolution_(i,h.resolution);h.actionObj=d.createAction_(i.click_action);return h});return b};a.parseTime_=function(c,b){var d=b;var e=CriUnitValue.splitUnitFloat(c,"s");if(e[0]==null){return d}d=e[0];if(e[1]=="s"){d*=this.sceneFPS_}return d};a.parseTransform_=function(d,b){var c=b;if(d!=null){c.position=this.parseTransformXY_(d.position,c.position);c.pivot=this.parseTransformXY_(d.pivot,c.pivot);c.scale=this.parseTransformXY_(d.scale,c.scale);c.rotate=this.parseRotate_(d.rotate,c.rotate)}return c};a.parseRotate_=function(f,b){var c=this.validateValue_(f.rotate,b);var e=CriUnitValue.splitUnitFloat(c,"deg");var d=e[0];return d};a.parseArray2D_=function(f,e,b){if(e==null){return b}var d=this;var c=f.map(function(g,h){return d.validateValue_(e[g],b[h])});c=c.map(function(g,j){var h=CriUnitValue.splitUnitFloat(g,"px");var l=h[0];var k=h[1];if(k==="%"){l=Math.round(l*d.sceneResolution[j]/100)}return l});return c};a.parseTransformXY_=function(d,b){var c=this.parseArray2D_(["x","y"],d,[b.x,b.y]);return CriGrxVector2.createFromXY(c[0],c[1])};a.parseResolution_=function(c,b){return this.parseArray2D_(["width","height"],c,b)};a.validateValue_=function(c,b){if(c==null){return b}return c};a.createAction_=function(f){var c=new CriLaAction();if(f==null){return c}if(f.url!=null){var e=CriLaURL.sanitize(f.url,true);if(!e){return c}var d=this.validateValue_(f.target,"");c=new CriLaActionOpenURL(e,d)}else{if(f["function"]!=null){c=new CriLaActionExecFunction(f["function"])}else{}}var b=this.validateValue_(f.player,"pause");if(b=="pause"){c.preAction=function(g){g.pause()}}return c};a.drawClickableArea_=function(c,d){var b=this.sceneResolution;d.draw(c,b)};a.addEventListener=function(b,d,c){this.CriLaP11m.addEventListener(b,d,c)};a.dispatchEvent=function(b){this.CriLaP11m.dispatchEvent(b)}})(CriLaClickableMap.prototype);function CriLaControlTemplateLoader(){}(function(c){c.parser=new DOMParser();c.loadTemplateFromString=function(d){return b(this.parser,d)};c.loadTemplateFromUrl=function(e){var d=a(e);return this.loadTemplateFromString(d)};function a(e){var f=CriLaXHR.requestLoadSync(e);if(f.status!==200){var d="コントロールテンプレートの読み込みに失敗しました。XHR status: "+f.status;throw new CriLaControlTemplateLoaderError(d,{xhr:f})}return f.response}function b(h,d){var g=h.parseFromString(d,"text/html");if(g.getElementsByTagName("parsererror").length>0){var e="コントロールテンプレートのパースに失敗しました。";throw new CriLaControlTemplateLoaderError(e,{doc:g})}var f=document.createElement("div");CriLaPolyfill.Array.from(g.body.childNodes).forEach(function(i){f.appendChild(i)});return f}})(CriLaControlTemplateLoader);function CriLaControlTemplateLoaderError(b,a){Error.call(this,b);this.message=b;this.detail=a||{}}CriLaPolyfill.Object.setPrototypeOf(CriLaControlTemplateLoaderError.prototype,Error.prototype);function LaVideoDecoder(){this.canvas_=null;this.canvas_context_=null;this.video_=null;this.resolutionScale_=1;this.quality=0.85}(function(a){a.initialize=function(d,b){var c=document.createElement("canvas");c.width=Math.floor(d*this.resolutionScale_);c.height=Math.floor(b*this.resolutionScale_);this.canvas_=c;this.canvas_context_=c.getContext("2d")};a.setQuality=function(b){this.quality=b};a.updateCanvas=function(d,b){var f=(this.canvas_.width/this.canvas_.height)>1;var e=(d/b)>1;if(f!==e){var c=this.canvas_.width;this.canvas_.width=this.canvas_.height;this.canvas_.height=c}};a.decodeAllFrames=function(c,b){var d=[];if(c.readyState>=1){this.updateCanvas(c.videoWidth,c.videoHeight);this.decodeStart(c,b,d)}else{var e=this;c.addEventListener("loadeddata",function(){e.updateCanvas(c.videoWidth,c.videoHeight);e.decodeStart(c,b,d)},{once:true})}return d};a.decodeStart=function(c,b,i){var d=Math.floor(c.videoWidth*this.resolutionScale_);var j=Math.floor(c.videoHeight*this.resolutionScale_);var f=c.duration;var g=[];for(var e=0;e<=f;e+=b){var h={time:e,image:null};i.push(h)}g=this.createIndexTable(i.length);this.decodeFrame(c,d,j,i,g,0)};a.decodeFrame=function(b,c,m,k,j,f){if(j.length<=f){return}var e=this.canvas_;var n=this.canvas_context_;var i=this;var d=CriLaUtility.FitASizetoBSize(c,m,e.width,e.height);function l(o){n.drawImage(b,0,0,d[0],d[1]);CriLaPolyfill.Canvas.toBlob(e,function(p){var q=window.URL.createObjectURL(p);var r=new CriLaC005();r.requestLoad(q);r.setSrcRect_(0,0,d[0],d[1]);o.image=r;i.decodeFrame(b,c,m,k,j,f+1)},"image/jpeg",i.quality)}var h=j[f];var g=k[h];b.addEventListener("seeked",function(){l(g)},{once:true});b.currentTime=g.time};a.createIndexTable=function(g){var d=Array(g);var h=0;var c=d.length-1;this.setLevel(d,h,c,1);d[h]={index:h,level:0};d[c]={index:c,level:0};var f=d.sort(function(j,i){return j.level-i.level});var b=[];for(var e=0;e<g;e++){b.push(f[e].index)}return b};a.setLevel=function(f,e,c,d){if(e==c){return}var b=Math.floor((e+c)/2);this.setLevel(f,e,b,d+1);this.setLevel(f,b+1,c,d+1);f[b]={index:b,level:d}}})(LaVideoDecoder.prototype);var CriLiveActSharedSettings={customerCode_:null,additionalRequestHeaders_:null};CriLiveActSharedSettings.setCustomerCode=function(a){this.customerCode_=a};CriLiveActSharedSettings.getCustomerCode=function(){return this.customerCode_};CriLiveActSharedSettings.setAdditionalRequestHeaders_=function(a){this.additionalRequestHeaders_=a};CriLiveActSharedSettings.getAdditionalRequestHeaders_=function(){var b=this.additionalRequestHeaders_;if(!b){return null}var a={};Object.keys(b).forEach(function(c){var d=b[c];a[c]=d});return a};function CriLiveActViewMargin(c){var h=function(i){var k=CriTypeUtil.typeOf(i);if(k=="Number"){return i}else{if(k=="String"){var j=CriUnitValue.splitUnit(i,"%");if(j[1]=="%"){return j[0]}console.warn("マージン設定の単位は%のみ有効です。 value: "+i)}}return null};var g={};var e={head:null,tail:null};var b=c;var d=function(i){var j=e[i];return j==null?b:j};var a=function(j,i){e[j]=h(i)};var f=function(i){Object.defineProperty(g,i,{get:d.bind(null,i),set:a.bind(null,i)})};f("head");f("tail");return g}function CriLiveActContentMargin(a){this.distance=a}CriLiveActSharedSettings.ScrollInViewMargin=new CriLiveActViewMargin(50);CriLiveActSharedSettings.ContentInMargin=new CriLiveActContentMargin(100);CriLiveActSharedSettings.autoPause=(function(){var a=CriUAChecker.getOS();return a===CriUAOS.iOS||a===CriUAOS.Android})();CriLiveActSharedSettings.advancedAnalyticsDebug=false;function CriLaRenderTarget(e,d,a,c){d=parseInt(d);a=parseInt(a);c=this.resolveTextureParameter(e,c);this.width=d;this.height=a;this.magFilter=c.magFilter;this.minFilter=c.minFilter;this.warpS=c.warpS;this.warpT=c.warpT;var b=this.setup(e,d,a,c);this.colorTexture=b.texture;this.framebuffer=b.framebuffer}(function(a){a.resolveTextureParameter=function(c,b){b=b||{};return{magFilter:b.magFilter||c.NEAREST,minFilter:b.minFilter||c.NEAREST,warpS:b.warpS||c.CLAMP_TO_EDGE,warpT:b.warpT||c.CLAMP_TO_EDGE}};a.setup=function(g,d,b,c){var e=g.createFramebuffer();g.bindFramebuffer(g.FRAMEBUFFER,e);var f=g.createTexture();g.bindTexture(g.TEXTURE_2D,f);g.texImage2D(g.TEXTURE_2D,0,g.RGBA,d,b,0,g.RGBA,g.UNSIGNED_BYTE,null);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,c.magFilter);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,c.minFilter);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_S,c.warpS);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_T,c.warpT);g.framebufferTexture2D(g.FRAMEBUFFER,g.COLOR_ATTACHMENT0,g.TEXTURE_2D,f,0);g.bindFramebuffer(g.FRAMEBUFFER,null);return{texture:f,framebuffer:e}};a.set=function(b){b.bindFramebuffer(b.FRAMEBUFFER,this.framebuffer);b.viewport(0,0,this.width,this.height)};a.unset=function(b){b.bindFramebuffer(b.FRAMEBUFFER,null);b.viewport(0,0,b.drawingBufferWidth,b.drawingBufferHeight)};a.getTexture=function(){return this.colorTexture};a.getFrameBuffer=function(){return this.framebuffer}})(CriLaRenderTarget.prototype);function CriLaPassword(){this.dom_textdescription=null;this.dom_scroll_description=null;this.dom_send_button=null;this.dom_top=null;this.dom_inner=null;this.dom_wrap=null;this.dom_input=null;this.dom_input_area=null;this.enable_send_button=false;this.has_send=false;this.is_set_description_fade=false;this.pauseFunction=null}(function(a){a.setup=function(e,c){var g=this.createDom();this.setSendButtonState(false);var f=this;this.dom_input.addEventListener("input",function(){f.setSendButtonState(f.isDirty(f.dom_input.value)&&(!f.has_send))});this.dom_send_button.addEventListener("click",function(){if(f.enable_send_button){var h=e.getAssetURLForAuthor();if(h!=""){f.Author(h,f.getInputValue(),e)}else{e.dispatchEvent(CriLaEvent.AUTHORIZED)}}});var d=function(){e.setPassword(f.getInputValue());e.setCurrentScene(e.getCurrentScene());c.forEach(function(h){h.requestLoad(e.baseResourceDir_,e.sharedResourceDir_)});e.reloadMedia();f.hide();e.dispatchEvent(CriLaEvent.REQUEST_LOAD_RESOURCE);e.removeEventListener(CriLaEvent.AUTHORIZED,d)};e.addEventListener(CriLaEvent.AUTHORIZED,d);e.addEventListener(CriLaEvent.AUTHORIZATION_ERROR,function(){f.textDescriptionShow()});this.textDescriptionHide();var b=e.controlWrapperElem_;b.insertBefore(g,b.firstChild);this.updateWrapPosition()};a.getInputValue=function(){return this.dom_input.value};a.isDirty=function(c){var b=c.replace(/\s|　/g,"");return b.length>0};a.showError=function(){this.dom_description.style.setProperty("display","block")};a.show=function(){this.dom_top.style.setProperty("display","block")};a.hide=function(){this.dom_top.style.setProperty("display","none")};a.setSendButtonState=function(b){this.dom_send_button.className=b?window.atob("bGEtdXNlci1hdXRob3JpemF0aW9uLWJ1dHRvbiBsYS11c2VyLWF1dGhvcml6YXRpb24tc2VuZA=="):window.atob("bGEtdXNlci1hdXRob3JpemF0aW9uLWJ1dHRvbiBsYS11c2VyLWF1dGhvcml6YXRpb24tc2VuZGVk");this.enable_send_button=b};a.createSendButtonDom=function(){var c=this.createDiv("",window.atob("bGEtdXNlci1hdXRob3JpemF0aW9uLWJ1dHRvbiBsYS11c2VyLWF1dGhvcml6YXRpb24tc2VuZGVk"));var b=document.createElement("span");b.innerHTML="送信";c.appendChild(b);return c};a.createTextInputDom=function(){var b=document.createElement("input");b.className=window.atob("bGEtdXNlci1hdXRob3JpemF0aW9uLWl0ZW0tLXRleHQ=");b.setAttribute("placeholder","パスワードを入力してください");b.setAttribute("type","password");b.setAttribute("maxlength","64");return b};a.createTextDescriptionDom=function(b){var c=this.createDiv("不正なパスワードです",window.atob("bGEtdXNlci1hdXRob3JpemF0aW9uLXRpdGxl"));return c};a.textDescriptionShow=function(b){this.dom_textdescription.style.setProperty("display","block");this.dom_textdescription.style.setProperty("color","#fd8939")};a.textDescriptionHide=function(b){this.dom_textdescription.style.setProperty("display","none")};a.createScrollDescriptionDom=function(){var b=this.createDiv("↓スクロールしてください↓",window.atob("bGEtdXNlci1hdXRob3JpemF0aW9uLXNjcm9sbA=="));b.style.setProperty("display","none");return b};a.createDiv=function(b,c){var d=document.createElement("div");d.className=c;d.innerHTML=b;return d};a.createDom=function(){var h=this.createDiv("",window.atob("bGEtdXNlci1hdXRob3JpemF0aW9u"));var b=this.createDiv("",window.atob("bGEtdXNlci1hdXRob3JpemF0aW9uSW5uZXI="));var d=this.createDiv("",window.atob("bGEtdXNlci1hdXRob3JpemF0aW9uV3JhcC0tbWlkZGxl"));var i=this.createTextDescriptionDom();var g=this.createScrollDescriptionDom();var c=this.createDiv("",window.atob("bGEtdXNlci1hdXRob3JpemF0aW9uLWl0ZW0="));var f=this.createTextInputDom();c.appendChild(f);var e=this.createSendButtonDom();d.appendChild(i);d.appendChild(c);d.appendChild(e);b.appendChild(d);h.appendChild(b);h.appendChild(g);this.dom_textdescription=i;this.dom_scroll_description=g;this.dom_input=f;this.dom_input_area=c;this.dom_send_button=e;this.dom_wrap=d;this.dom_inner=b;this.dom_top=h;return h};a.parseText=function(b){return CriLaHtmlCss.escapeHtml(b||"")};a.setScrollDescriptionFadeOut=function(){var e=this.dom_scroll_description;var b=this.dom_inner;var d=1;var c=20;b.addEventListener("scroll",function f(){CriLaFwUtility.domFadeOut(d,e,c);b.removeEventListener("scroll",f)})};a.updateScrollDescriptionDisplay=function(){if(this.dom_inner.clientHeight<this.dom_wrap.clientHeight){this.dom_wrap.className="la-user-cognitionWrap--top"}var c=this.isValidScrollDescription();var b=c?"block":"none";this.dom_scroll_description.style.setProperty("display",b);if(!this.is_set_description_fade&&c){this.setScrollDescriptionFadeOut();this.is_set_description_fade=true}};a.updateWrapPosition=function(){var b=CriLaRectangle.createFromViewPort();var c=CriLaRectangle.createFromElement(this.dom_wrap);if(b.bottom<c.top){this.dom_wrap.className=window.atob("bGEtdXNlci1hdXRob3JpemF0aW9uV3JhcC0tdG9w")}};a.Author=function(e,d,c){var b=CriLaURL.addPwToUrl(e,d);var f=new XMLHttpRequest();f.open("HEAD",b,true);f.responseType="text";if(onerror){f.onerror=onerror;f.onabort=onerror;f.ontimeout=onerror}f.onreadystatechange=function(g){if(f.readyState>=2){if(f.status==403){c.dispatchEvent(CriLaEvent.AUTHORIZATION_ERROR)}else{if(200<=f.status&&f.status<300){c.dispatchEvent(CriLaEvent.AUTHORIZED)}else{if(400<=f.status){console.warn("LiveAct Warn：認証時にエラーが発生しました。",g)}else{}}}if(f.status!=0){f.abort()}}};f.send(null)}})(CriLaPassword.prototype);var CriLaSequenceType={MSE:0,HLS:1};Object.freeze(CriLaSequenceType);function CriLaC00w(){this.type=null;this.url="";this.playlistRelUrl="";this.videoInfo=null;this.audioInfo=null;this.progressiveList=[]}(function(a){a.parsePlaylistData=function(d,b){var c=JSON.parse(b);this.playlistRelUrl=d;this.createPlaylist(c);this.progressiveList=this.parseProgressiveVideoList(d,c);return this.url};a.parseProgressiveVideoList=function(d,e){var b=[];var c=this.getDirUrl(d);if(!e.Progressive){return b}e.Progressive.forEach(function(f){b.push(c+f.url)});return b};a.adaptationWithContentsType=function(e,b){for(var d=0;d<e.length;d++){var c=e[d];if(!c.contentType||c.contentType!==b){continue}if(!c.Representation||!c.Representation.length){continue}return c}return null};a.isValidSegment=function(b){return b.duration&&b.url};a.getProgressiveVideoUrlByIndex=function(b){if(this.progressiveList.length<b){return null}return this.progressiveList[b]};a.representationInfo=function(c,d){var e=c.Representation;var b=[];e.forEach(function(h){if(!h.init){return}if(!h.segments||!h.segments.length){return}if(!h.bandwidth){return}if(!h.mediaType){return}if(!h.id==null){return}var g=h.mediaType;var m=d+h.init;var n=h.id;var f=[];var l=0;for(var j=0;j<h.segments.length;j++){var k=h.segments[j];if(!this.isValidSegment(k)){return}f.push({url:d+k.url,duration:k.duration/1000,startTime:l/1000});l+=k.duration}b.push({id:n,mediaType:g,initSegment:m,segments:f})},this);return b};a.getDirUrl=function(c){var b=c.lastIndexOf("?")<0?c:c.substr(0,c.lastIndexOf("?"));return b.substr(0,b.lastIndexOf("/")+1)}})(CriLaC00w.prototype);function CriLaC00y(){CriLaC00w.call(this);this.type=CriLaSequenceType.HLS;this.playlistMaster_={}}(function(b,a){CriLaPolyfill.Object.setPrototypeOf(b,a);b.createPlaylist=function(c){this.url=this.createHlsPlaylist(this.playlistRelUrl,c)};b.createHlsPlaylist=function(j,k){if(!j){return null}var c=CriLaURL.absPath(j);var f=this.getDirUrl(c);if(!k){return null}if(!k.format||k.format!=="LASP"){return null}if(!k.version){return null}if(!k.Period||!k.Period.length){return null}var g=k.version;if(!k.HlsInfo){return this.createHlsPlaylistFromBlob(f,k)}this.playlistMaster_=k.HlsInfo;var h=k.Period[0];var e=h.AdaptationSet;var d=this.adaptationWithContentsType(e,"video");var i=this.adaptationWithContentsType(e,"audio");if(!d&&!i){return null}if(d){this.videoInfo=this.representationInfo(d,f)}if(i){this.audioInfo=this.representationInfo(i,f)}return f+k.HlsInfo.url};b.createHlsPlaylistFromBlob=function(d,c){return null}})(CriLaC00y.prototype,CriLaC00w.prototype);function CriLaC00A(){CriLaC00w.call(this);this.type=CriLaSequenceType.MSE;this.duration=0}(function(b,a){CriLaPolyfill.Object.setPrototypeOf(b,a);b.createPlaylist=function(c){this.createMsePlaylist(this.playlistRelUrl,c)};b.createMsePlaylist=function(d,k){if(!d){return null}var f=this.getDirUrl(d);if(!k){return null}if(!k.format||k.format!=="LASP"){return null}if(!k.version){return null}if(!k.Period||!k.Period.length){return null}var g=k.version;var h=k.Period[0];if(!h.duration){return null}if(!h.AdaptationSet||!h.AdaptationSet.length){return null}var j=h.duration;var e=h.AdaptationSet;var c=this.adaptationWithContentsType(e,"video");var i=this.adaptationWithContentsType(e,"audio");if(!c&&!i){return null}if(c){this.videoInfo=this.representationInfo(c,f)}if(i){this.audioInfo=this.representationInfo(i,f)}this.duration=j/1000}})(CriLaC00A.prototype,CriLaC00w.prototype);function CriLaStreamManagerBase(a){this.video=a.getElement();this.resource=a;this.isPrepared=false;this.currentVideoId=null;this.enableStream=true;this.password=null;this.isUnload=false}(function(a){a.initialize=function(b){if(b){this.enableStream=false;return false}return true};a.requestLoad=function(){this.currentVideoId=this.currentVideoId?this.currentVideoId:this.getAutoSelectRepresentationIndexByCriUAChecker();this.isUnload=false;this.enableStream?this.requestLoadWithStartTime(0):this.loadProgressive(0)};a.requestLoadWithStartTime=function(b){};a.getAutoSelectRepresentationIndexByCriUAChecker=function(){var c=0;var b=this.resource.playlist.videoInfo.length;if(CriUAChecker.isSmallScreen()){c=b-1}else{if(CriUAChecker.isTablet()){c=parseInt(b/2)}}c=Math.max(c,0);return c};a.unload=function(){this.isUnload=true;this.enableStream?this.unloadStream():this.unloadProgressive()};a.unloadStream=function(){};a.unloadProgressive=function(){this.video.removeAttribute("src");this.video.load()};a.reload=function(b){this.isUnload=false;this.enableStream?this.reloadStream(b):this.loadProgressive(b)};a.reloadStream=function(b){};a.loadProgressive=function(c){var b=this.resource.getProgressiveVideoUrlByIndex(this.currentVideoId);b=CriLaURL.addPwToUrl(b,this.password);this.video.src=b;this.video.load()};a.setPassword=function(b){this.password=b}})(CriLaStreamManagerBase.prototype);function CriLaStreamManagerMse(a){CriLaStreamManagerBase.call(this,a);this.mse=null;this.aSetVideoList=null;this.aSetAudioList=null;this.mediaLoaders=[];this.hasASetList=false;this.onSourceOpenHandler=null;this.onProgressHandler=null;this.onSeekingHandler=null}(function(b,a){CriLaPolyfill.Object.setPrototypeOf(a,b);a.initialize=function(d){if(d){this.enableStream=false;return false}try{this.mse=new MediaSource()}catch(c){this.enableStream=false;return false}this.onSourceOpenHandler=this.onSourceOpen.bind(this,this.video,0);this.mse.addEventListener("sourceopen",this.onSourceOpenHandler);this.setVideoSource(this.video,this.mse);return true};a.setVideoSource=function(d,c){d.src=window.URL.createObjectURL(c)};a.onSourceOpen=function(f,d,g){var c=g.target;c.removeEventListener("sourceopen",this.onSourceOpenHandler);if(c.sourceBuffers.length>0){return}d=isNaN(d)?0:d;this.requestLoadWithStartTime(d)};a.requestLoadWithStartTime=function(c){if(this.canStartLoad()){this.createASets();this.mse.duration=this.resource.playlist.duration;this.startLoad(c)}};a.canStartLoad=function(){if(this.isPrepared===false&&this.mse&&this.mse.readyState==="open"&&this.resource.isPlaylistLoaded===true&&!this.isUnload){this.isPrepared=true;return true}return false};a.createASets=function(){if(this.hasASetList){return}var c=null;c=this.resource.playlist.videoInfo;var d=[];c.forEach(function(g){var f=new CriLaC00I();f.initialize(g.id,g.mediaType,g.initSegment,g.segments);d.push(f)});var e=new CriLaC00G();e.setASets(d);this.aSetVideoList=e;c=this.resource.playlist.audioInfo;d=[];c.forEach(function(g){var f=new CriLaC00I();f.initialize(g.id,g.mediaType,g.initSegment,g.segments);d.push(f)});e=new CriLaC00G();e.setASets(d);this.aSetAudioList=e;this.setPasswordToAsetList(this.aSetAudioList,this.password);this.setPasswordToAsetList(this.aSetVideoList,this.password);this.hasASetList=true};a.setEventListners=function(){this.onProgressHandler=this.onProgress.bind(this);this.onSeekingHandler=this.onSeeking.bind(this);this.video.addEventListener("progress",this.onProgressHandler);this.video.addEventListener("timeupdate",this.onProgressHandler);this.video.addEventListener("seeking",this.onSeekingHandler)};a.startLoad=function(c){this.setEventListners();this.startLoadMedia(this.mse,this.aSetAudioList.aSets,this.aSetVideoList.aSets,this.currentVideoId,c)};a.startLoadMedia=function(c,f,e,d,g){f.forEach(function(i){var j=null;j=new CriLaC00E(c,i);j.startLoad(g);this.mediaLoaders.push(j)},this);d=Math.min(d,e.length-1);var h=null;h=new CriLaC00E(c,e[d]);h.startLoad(g);this.mediaLoaders.push(h)};a.onProgress=function(c){this.checkEos();this.mediaLoaders.forEach(function(d){d.appendMediaSegment(this.video.currentTime);d.refreshBuffer(this.video.currentTime)},this)};a.onSeeking=function(c){this.mediaLoaders.forEach(function(d){if(d.currentDownload){d.currentDownload.abort();d.currentDownload=null}d.aSet.changeSegmentByCurrentTime(this.video.currentTime);d.appendMediaSegment(this.video.currentTime);d.refreshBuffer(this.video.currentTime)},this)};a.isStreamUpdating=function(c){for(var e=0;e<this.mediaLoaders.length;e++){if(this.mediaLoaders[e].aSet.hasCurrentSegment()){return true}}for(var e=0;e<c.sourceBuffers.length;e++){var d=c.sourceBuffers[e];if(d.updating==true){return true}}return false};a.checkEos=function(){var c=this.mse;if(c&&c.readyState==="open"&&!this.isStreamUpdating(c)){c.endOfStream()}};a.removeVideoEventListeners=function(){this.video.removeEventListener("progress",this.onProgressHandler);this.video.removeEventListener("timeupdate",this.onProgressHandler);this.video.removeEventListener("seeking",this.onSeekingHandler)};a.abortLoadingSegments=function(){this.mediaLoaders.forEach(function(c){if(c.currentDownload){c.currentDownload.abort();c.currentDownload=null}})};a.unloadStream=function(){this.abortLoadingSegments();this.removeVideoEventListeners();this.isPrepared=false;this.mse=null;this.mediaLoaders.forEach(function(c){c.resetBuffer()});this.mediaLoaders=[];this.video.removeAttribute("src");this.video.load()};a.reloadStream=function(c){this.mse=new MediaSource();this.onSourceOpenHandler=this.onSourceOpenWithReload.bind(this,c);this.mse.addEventListener("sourceopen",this.onSourceOpenHandler);if(this.aSetAudioList){this.aSetAudioList.aSets.forEach(function(d){d.changeSegmentByCurrentTime(c)})}if(this.aSetVideoList){this.aSetVideoList.aSets.forEach(function(d){d.changeSegmentByCurrentTime(c)})}this.setEventListners();this.setVideoSource(this.video,this.mse)};a.onSourceOpenWithReload=function(d,f){var c=f.target;c.removeEventListener("sourceopen",this.onSourceOpenHandler);if(c.sourceBuffers.length>0){return}this.requestLoadWithStartTime(d)};a.setPassword=function(c){a.prototype.setPassword.call(this,c);this.setPasswordToAsetList(this.aSetAudioList,c);this.setPasswordToAsetList(this.aSetVideoList,c)};a.setPasswordToAsetList=function(d,c){if(d&&d.aSets){d.aSets.forEach(function(e){e.initUrl=CriLaURL.addPwToUrl(e.initUrl,c);for(var f=0;f<e.segmentUrls.length;f++){e.segmentUrls[f].url=CriLaURL.addPwToUrl(e.segmentUrls[f].url,c)}})}}})(CriLaStreamManagerBase.prototype,CriLaStreamManagerMse.prototype);function CriLaStreamManagerHls(a){CriLaStreamManagerBase.call(this,a);this.url=""}(function(b,a){CriLaPolyfill.Object.setPrototypeOf(a,b);a.initialize=function(c){if(c){this.enableStream=false;return false}return true};a.requestLoadWithStartTime=function(c){if(this.canStartLoad()){this.startLoad()}};a.canStartLoad=function(){if(this.isPrepared===false&&this.resource.isPlaylistLoaded===true){this.isPrepared=true;return true}return false};a.startLoad=function(){this.resource.loadMedia(this.resource.url);if(this.video.error){this.enableStream=false;this.requestLoad()}};a.unloadStream=function(){this.unloadProgressive()};a.reloadStream=function(c){this.startLoad()}})(CriLaStreamManagerBase.prototype,CriLaStreamManagerHls.prototype);function CriLaC00E(a,b){this.FORWARD_BUF=10;this.BACKWARD_BUF=10;this.BACKWARD_LEN=40;this.sourceBuffer=null;this.aSet=null;this.onInitAppendedHandler=null;this.mse=null;this.isInitLoaded=false;this.currentDownload=null;this.initialize(a,b.mimeType,b)}(function(a){a.initialize=function(b,d,c){this.sourceBuffer=b.addSourceBuffer(d);this.aSet=c;this.mse=b};a.startLoad=function(b){this.loadInit(b)};a.loadInit=function(c){c=isNaN(c)?0:c;var b=this.aSet.initUrl;if(!b){return}var d=new XMLHttpRequest();this.currentDownload=d;d.open("GET",b,true);d.responseType="arraybuffer";d.onload=function(g){var f=d.response;if(!f||!d.status||this.sourceBuffer.updating){this.currentDownload=null;this.loadInit(c);return}this.currentDownload=null;this.onInitAppendedHandler=this.onInitAppended.bind(this,c);this.sourceBuffer.addEventListener("updateend",this.onInitAppendedHandler);this.sourceBuffer.appendBuffer(f)}.bind(this);d.send(null)};a.onInitAppended=function(b,d){var c=d.target;c.removeEventListener("updateend",this.onInitAppendedHandler);this.isInitLoaded=true;this.appendMediaSegment(b)};a.appendMediaSegment=function(f){if(!this.isInitLoaded){return}if(this.currentDownload){return}if(this.sourceBuffer.updating){return}if(!this.aSet.hasCurrentSegment()){return}var b=this.mse;var e=this.aSet.currentSegment();var c=e.url;var g=e.duration;var d=e.startTime;if(f+this.FORWARD_BUF<d){return}var h=new XMLHttpRequest();this.currentDownload=h;h.open("GET",c,true);h.responseType="arraybuffer";h.onloadend=function(j){var i=h.response;if(!i||!h.status||this.sourceBuffer.updating){this.currentDownload=null;return}this.sourceBuffer.appendBuffer(i);this.aSet.advanceSegment();this.currentDownload=null}.bind(this);h.send(null)};a.refreshBuffer=function(f){var b=this.mse;var h=this.sourceBuffer;if(b.readyState==="closed"||b.readyState==="ended"){return}if(h.buffered.length<=0){return}var e=0;for(var d=0;d<h.buffered.length;d++){var c=h.buffered.end(d);var g=h.buffered.start(d);if(f<=g||f<=c){continue}e+=(c-g)}if(e<this.BACKWARD_LEN){return}if(f-this.BACKWARD_BUF<=0){return}if(h.updating){return}h.remove(0,f-this.BACKWARD_BUF)};a.resetBuffer=function(){var c=this.sourceBuffer;for(var b=0;b<c.buffered.length;b++){if(c.updating){return}c.remove(c.buffered.start(b),c.buffered.end(b))}}})(CriLaC00E.prototype);function CriLaC00G(){this.aSets=[]}(function(a){a.setASets=function(b){this.aSets=b}})(CriLaC00G.prototype);function CriLaC00I(){this.id=null;this.mimeType=null;this.initUrl=null;this.segmentUrls=[];this.currentSegmentIndex=0}(function(a){a.initialize=function(e,d,c,b){this.id=e;this.mimeType=d;this.initUrl=c;this.segmentUrls=b;this.currentSegmentIndex=0};a.currentSegment=function(){return this.segmentUrls[this.currentSegmentIndex]};a.advanceSegment=function(){this.currentSegmentIndex++};a.hasCurrentSegment=function(){return this.currentSegmentIndex<this.segmentUrls.length};a.changeSegmentByCurrentTime=function(d){for(var b=0;b<this.segmentUrls.length;b++){var c=this.segmentUrls[b];if(c.startTime<=d&&d<c.startTime+c.duration){this.currentSegmentIndex=b;return}}}})(CriLaC00I.prototype);